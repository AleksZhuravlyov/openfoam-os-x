 .gitignore                                         |   1 +
 Allwmake                                           |  27 +-
 applications/Allwmake                              |  14 +-
 .../solvers/combustion/reactingFoam/Allwmake       |   2 +-
 .../solvers/compressible/rhoCentralFoam/Allwclean  |   2 +-
 .../solvers/compressible/rhoCentralFoam/Allwmake   |   2 +-
 .../solvers/compressible/rhoPimpleFoam/Allwmake    |   2 +-
 .../solvers/compressible/rhoSimpleFoam/Allwclean   |   2 +-
 .../solvers/compressible/rhoSimpleFoam/Allwmake    |   2 +-
 .../solvers/compressible/sonicFoam/Allwmake        |   2 +-
 .../heatTransfer/chtMultiRegionFoam/Allwclean      |   2 +-
 .../heatTransfer/chtMultiRegionFoam/Allwmake       |   2 +-
 .../solvers/incompressible/pimpleFoam/Allwmake     |   2 +-
 .../solvers/incompressible/simpleFoam/Allwmake     |   2 +-
 applications/solvers/lagrangian/DPMFoam/Allwclean  |   2 +-
 applications/solvers/lagrangian/DPMFoam/Allwmake   |   2 +-
 .../icoUncoupledKinematicParcelFoam/Allwmake       |   2 +-
 .../solvers/lagrangian/reactingParcelFoam/Allwmake |   2 +-
 applications/solvers/lagrangian/sprayFoam/Allwmake |   2 +-
 .../solvers/multiphase/cavitatingFoam/Allwclean    |   2 +-
 .../solvers/multiphase/cavitatingFoam/Allwmake     |   2 +-
 .../multiphase/compressibleInterFoam/Allwclean     |   2 +-
 .../multiphase/compressibleInterFoam/Allwmake      |   2 +-
 .../compressibleTwoPhaseEulerFoam/Allwclean        |   2 +-
 .../compressibleTwoPhaseEulerFoam/Allwmake         |   2 +-
 .../solvers/multiphase/interFoam/Allwclean         |   2 +-
 applications/solvers/multiphase/interFoam/Allwmake |   2 +-
 .../threePhaseMixture.C                            |   2 +-
 .../threePhaseMixture.H                            |   2 +-
 .../multiphase/interPhaseChangeFoam/Allwclean      |   2 +-
 .../multiphase/interPhaseChangeFoam/Allwmake       |   2 +-
 .../multiphase/multiphaseEulerFoam/Allwclean       |   2 +-
 .../multiphase/multiphaseEulerFoam/Allwmake        |   2 +-
 .../multiphase/multiphaseInterFoam/Allwclean       |   2 +-
 .../multiphase/multiphaseInterFoam/Allwmake        |   2 +-
 .../solvers/multiphase/twoPhaseEulerFoam/Allwclean |   2 +-
 .../solvers/multiphase/twoPhaseEulerFoam/Allwmake  |   2 +-
 .../utilities/mesh/conversion/Optional/Allwmake    |   2 +-
 .../mesh/conversion/kivaToFoam/readKivaGrid.H      |   2 +-
 applications/utilities/mesh/generation/Allwmake    |   2 +-
 .../utilities/mesh/generation/extrude/Allwclean    |   2 +-
 .../utilities/mesh/generation/extrude/Allwmake     |   2 +-
 .../mesh/generation/extrude2DMesh/Allwclean        |   2 +-
 .../mesh/generation/extrude2DMesh/Allwmake         |   2 +-
 .../mesh/generation/snappyHexMesh/Make/options     |   1 -
 .../mesh/manipulation/renumberMesh/Allwmake        |  11 +-
 .../mesh/manipulation/renumberMesh/Make/options    |   1 -
 .../miscellaneous/foamDebugSwitches/Make/options   |   2 -
 .../dataConversion/foamToEnsight/Make/options      |   1 -
 .../dataConversion/foamToVTK/surfaceMeshWriter.C   |   1 -
 .../dataConversion/foamToVTK/surfaceMeshWriter.H   |   2 +-
 .../postProcessing/graphics/PV3Readers/Allwclean   |   2 +-
 .../postProcessing/graphics/PV3Readers/Allwmake    |   2 +-
 .../graphics/PV3Readers/PV3FoamReader/Allwclean    |   2 +-
 .../graphics/PV3Readers/PV3FoamReader/Allwmake     |   2 +-
 .../PV3Readers/PV3blockMeshReader/Allwclean        |   2 +-
 .../PV3Readers/PV3blockMeshReader/Allwmake         |   2 +-
 .../preProcessing/wallFunctionTable/Allwmake       |   2 +-
 .../surface/surfaceFeatureExtract/Allwmake         |  41 ++-
 .../surface/surfaceFeatureExtract/Make/options     |   2 +-
 .../surfaceFeatureExtract/surfaceFeatureExtract.C  |  16 +-
 bin/foamEtcFile                                    |   3 +
 bin/foamInstallationTest                           |  37 ++-
 bin/foamJob                                        |   8 +
 bin/paraFoam                                       |  10 +-
 bin/tools/RunFunctions                             | 121 ++++++--
 bin/tools/replaceAllShellSun                       |   2 +-
 doc/Allwmake                                       |   2 +-
 doc/Doxygen/Allwmake                               |   2 +-
 etc/bashrc                                         | 135 +++++----
 etc/config/paraview-osx.sh                         |  15 +
 etc/config/scotch.sh                               |  14 +-
 etc/config/settings.sh                             |  83 +++++-
 src/Allwmake                                       |  16 +-
 src/OSspecific/POSIX/POSIX.C                       |  37 +++
 src/OSspecific/POSIX/clockTime/clockTime.H         |   3 +
 src/OSspecific/POSIX/fileStat.C                    |   2 +
 src/OSspecific/POSIX/printStack.C                  | 332 ++++++++++-----------
 src/OSspecific/POSIX/signals/sigFpe.C              |  87 +++++-
 src/OSspecific/POSIX/signals/sigFpe.H              |  20 +-
 .../Lists/CompactListList/CompactListListI.H       |   2 +-
 .../containers/Lists/FixedList/FixedListI.H        |   2 +-
 src/OpenFOAM/containers/Lists/List/ListI.H         |   2 +-
 src/OpenFOAM/containers/Lists/SubList/SubListI.H   |   2 +-
 src/OpenFOAM/containers/Lists/UList/UList.H        |   1 +
 src/OpenFOAM/containers/Lists/UList/UListI.H       |   2 +-
 src/OpenFOAM/db/IOobject/IOobject.H                |   2 +-
 src/OpenFOAM/db/IOobject/IOobjectI.H               |  18 +-
 src/OpenFOAM/db/IOstreams/Pstreams/gatherScatter.C |   3 +
 .../functionEntries/codeStream/codeStream.C        |   3 +
 .../db/dynamicLibrary/dynamicCode/dynamicCode.C    |   4 +
 .../db/dynamicLibrary/dynamicCode/dynamicCode.H    |   4 +
 .../db/objectRegistry/objectRegistryTemplates.C    |   2 +-
 .../DimensionedField/DimensionedFieldI.H           |   2 +-
 .../DimensionedField/SubDimensionedFieldI.H        |   2 +-
 src/OpenFOAM/fields/Fields/Field/Field.C           |   4 +-
 src/OpenFOAM/fields/Fields/Field/Field.H           |   2 +-
 src/OpenFOAM/fields/Fields/Field/SubFieldI.H       |   2 +-
 .../GeometricField/GeometricFieldI.H               |   2 +-
 src/OpenFOAM/global/foamDoc.H                      |   2 +-
 src/OpenFOAM/global/global.Cver                    |   2 +
 src/OpenFOAM/matrices/Matrix/MatrixI.H             |   2 +-
 src/OpenFOAM/memory/Xfer/XferI.H                   |   4 +-
 .../meshes/meshShapes/cellShape/cellShapeIO.C      |   2 +-
 src/OpenFOAM/meshes/polyMesh/polyMesh.C            |   8 +-
 src/OpenFOAM/primitives/Scalar/doubleFloat.H       |   9 +
 src/OpenFOAM/primitives/nullObject/nullObject.C    |  34 +++
 src/OpenFOAM/primitives/nullObject/nullObject.H    | 110 +++++++
 src/OpenFOAM/primitives/nullObject/nullObjectI.H   |  65 ++++
 src/Pstream/Allwmake                               |  12 +-
 src/Pstream/mpi/Make/options                       |   4 +
 src/conversion/Allwmake                            |   2 +-
 src/conversion/ensight/part/ensightPartCells.C     |   2 +-
 src/conversion/ensight/part/ensightPartIO.C        |   2 +-
 src/dummyThirdParty/Allwmake                       |   2 +-
 src/dummyThirdParty/metisDecomp/metis.h            |  18 +-
 src/edgeMesh/edgeMesh.C                            |   4 +-
 .../DarcyForchheimer/DarcyForchheimer.C            |   4 +-
 .../DarcyForchheimer/DarcyForchheimer.H            |   2 +-
 .../general/porosityModel/fixedCoeff/fixedCoeff.C  |   4 +-
 .../general/porosityModel/fixedCoeff/fixedCoeff.H  |   2 +-
 .../porosityModel/porosityModel/porosityModel.C    |   2 +-
 .../porosityModel/porosityModelList.C              |   2 +-
 .../general/porosityModel/powerLaw/powerLaw.C      |   4 +-
 .../general/porosityModel/powerLaw/powerLaw.H      |   2 +-
 .../fixedGradient/fixedGradientFvPatchField.H      |   2 +-
 .../flowRateInletVelocityFvPatchVectorField.H      |   2 +-
 ...inletOutletTotalTemperatureFvPatchScalarField.H |   2 +-
 .../mappedFixedValueFvPatchField.H                 |   4 +-
 ...essureDirectedInletVelocityFvPatchVectorField.H |   2 +-
 ...PressureInletOutletVelocityFvPatchVectorField.H |   4 +-
 .../rotatingTotalPressureFvPatchScalarField.H      |   4 +-
 .../rotatingWallVelocityFvPatchVectorField.H       |   4 +-
 .../supersonicFreestreamFvPatchVectorField.H       |   2 +-
 .../fvPatchFields/fvPatchField/fvPatchField.C      |   6 +-
 src/fvAgglomerationMethods/Allwmake                |  19 +-
 .../MGridGenGamgAgglomeration/Make/options         |  10 +
 src/fvOptions/Make/options                         |   1 -
 src/lagrangian/Allwmake                            |   2 +-
 .../COxidationHurtMitchell.H                       |   2 +-
 .../distributionModels/uniform/uniform.C           |   3 +-
 .../distributionModels/uniform/uniform.H           |   2 +-
 .../InjectionModel/InjectionModelList.H            |   2 +-
 src/lagrangian/molecularDynamics/Allwmake          |   2 +-
 .../BreakupModel/PilchErdman/PilchErdman.H         |   2 +-
 src/mesh/Allwmake                                  |   2 +-
 .../momentOfInertia/volumeIntegration/volInt.c     |  28 +-
 src/parallel/Allwmake                              |   2 +-
 src/parallel/decompose/Allwmake                    |  22 +-
 src/parallel/decompose/AllwmakeLnInclude           |   2 +-
 src/parallel/decompose/ptscotchDecomp/Make/options |  10 +-
 src/parallel/decompose/scotchDecomp/Make/options   |   8 +-
 src/parallel/reconstruct/Allwmake                  |   2 +-
 src/postProcessing/Allwmake                        |   2 +-
 src/postProcessing/functionObjects/Allwmake        |   2 +-
 .../field/fieldValues/faceSource/faceSource.H      |   4 +-
 src/regionModels/Allwclean                         |   2 +-
 src/regionModels/Allwmake                          |   2 +-
 .../pyrolysisModel/pyrolysisModelCollection.C      |   2 +-
 .../pyrolysisModel/pyrolysisModelNew.C             |   2 +-
 .../thermalBaffleModels/noThermo/noThermo.C        |   2 +-
 src/renumber/Allwmake                              |  26 +-
 src/renumber/SloanRenumber/Make/options            |   9 +-
 src/sampling/cuttingPlane/cuttingPlane.C           |   6 +-
 .../sampledSurface/sampledPatch/sampledPatch.C     |   2 +-
 .../writers/nastran/nastranSurfaceWriter.C         |   2 +-
 src/surfMesh/MeshedSurface/MeshedSurface.C         |  20 +-
 src/surfMesh/MeshedSurface/MeshedSurface.H         |   2 +-
 .../MeshedSurfaceIOAllocator.C                     |   8 +-
 .../UnsortedMeshedSurface/UnsortedMeshedSurface.C  |   6 +-
 src/surfMesh/surfMesh/surfMesh.C                   |   2 +-
 src/thermophysicalModels/Allwmake                  |   2 +-
 src/thermophysicalModels/properties/Allwmake       |   2 +-
 .../chemistryReaders/chemkinReader/chemkinReader.C |   9 +
 .../specie/reaction/Reactions/Reaction/Reaction.C  |   6 +-
 src/transportModels/Allwmake                       |   2 +-
 src/turbulenceModels/Allwmake                      |   2 +-
 src/turbulenceModels/LES/Allwmake                  |   2 +-
 src/turbulenceModels/compressible/Allwmake         |   2 +-
 .../compressible/LES/DESModel/DESModelDoc.H        |   2 +-
 .../compressible/LES/GenEddyVisc/GenEddyVisc.H     |   2 +-
 .../compressible/LES/GenSGSStress/GenSGSStress.H   |   4 +-
 .../compressible/LES/LESModel/LESModelDoc.H        |   2 +-
 .../compressible/RAS/RASModel/RASModelDoc.H        |   2 +-
 ...gLengthDissipationRateInletFvPatchScalarField.H |   2 +-
 ...tMixingLengthFrequencyInletFvPatchScalarField.H |   2 +-
 .../turbulenceModel/turbulenceModelDoc.H           |   2 +-
 src/turbulenceModels/incompressible/Allwmake       |   2 +-
 .../incompressible/LES/DESModel/DESModelDoc.H      |   2 +-
 .../incompressible/LES/GenEddyVisc/GenEddyVisc.H   |   2 +-
 .../incompressible/LES/GenSGSStress/GenSGSStress.H |   6 +-
 .../incompressible/LES/LESModel/LESModelDoc.H      |   2 +-
 .../incompressible/RAS/RASModel/RASModelDoc.H      |   2 +-
 ...tmBoundaryLayerInletEpsilonFvPatchScalarField.H |   2 +-
 ...urbulentHeatFluxTemperatureFvPatchScalarField.H |   2 +-
 ...gLengthDissipationRateInletFvPatchScalarField.H |   2 +-
 ...tMixingLengthFrequencyInletFvPatchScalarField.H |   2 +-
 .../turbulenceModel/turbulenceModelDoc.H           |   2 +-
 wmake/Makefile                                     |  97 +++---
 wmake/rules/General/CGAL                           |  35 ++-
 wmake/rules/General/X                              |   2 +
 wmake/rules/General/bison                          |  14 +-
 wmake/rules/General/btyacc                         |   2 +
 wmake/rules/General/btyacc++                       |   2 +
 wmake/rules/General/byacc                          |   4 +-
 wmake/rules/General/coco-cpp                       |  15 -
 wmake/rules/General/flex                           |  12 +-
 wmake/rules/General/flex++                         |  13 +-
 wmake/rules/General/general                        |   2 +
 wmake/rules/General/moc                            |   2 +
 wmake/rules/General/mplib                          |   2 +
 wmake/rules/General/mplibGAMMA                     |   2 +
 wmake/rules/General/sourceToDep                    |   9 +-
 wmake/rules/General/standard                       |  16 +
 wmake/rules/General/version                        |   8 +
 wmake/rules/General/yacc                           |  15 +-
 wmake/rules/darwin64Clang/CGAL                     |   7 +
 wmake/rules/darwin64Clang/c                        |  20 ++
 wmake/rules/darwin64Clang/c++                      |  28 ++
 wmake/rules/darwin64Clang/c++Debug                 |   2 +
 wmake/rules/darwin64Clang/c++Opt                   |   3 +
 wmake/rules/darwin64Clang/c++Prof                  |   2 +
 wmake/rules/darwin64Clang/cDebug                   |   2 +
 wmake/rules/darwin64Clang/cOpt                     |   2 +
 wmake/rules/darwin64Clang/cProf                    |   2 +
 wmake/rules/darwin64Clang/general                  |  14 +
 wmake/scripts/addCompile                           |   9 +-
 wmake/src/Makefile                                 |  18 +-
 wmake/src/wmkdep.l                                 |  20 +-
 wmake/wmake                                        |  37 ++-
 wmake/wmakeLnInclude                               |  19 +-
 231 files changed, 1584 insertions(+), 690 deletions(-)

diff --git a/.gitignore b/.gitignore
index 7c8bce03..039c3703 100644
--- a/.gitignore
+++ b/.gitignore
@@ -42,6 +42,7 @@ linuxming*/
 SiCortex*Gcc*/
 solaris*Gcc*/
 SunOS*Gcc*/
+darwin*Clang*/
 platforms/
 
 # reinstate wmake/rules that might look like build folders
diff --git a/Allwmake b/Allwmake
index 16edfd1f..0f3e419d 100755
--- a/Allwmake
+++ b/Allwmake
@@ -2,17 +2,19 @@
 cd ${0%/*} || exit 1    # run from this directory
 
 wmakeCheckPwd "$WM_PROJECT_DIR" || {
-    echo "Error: Current directory is not \$WM_PROJECT_DIR"
-    echo "    The environment variables are inconsistent with the installation."
-    echo "    Check the OpenFOAM entries in your dot-files and source them."
-    exit 1
+	echo "Error: Current directory is not \$WM_PROJECT_DIR"
+	echo "    The environment variables are inconsistent with the installation."
+	echo "    Check the OpenFOAM entries in your dot-files and source them."
+	exit 1
 }
 
-[ -n "$FOAM_EXT_LIBBIN" ] || {
-    echo "Error: FOAM_EXT_LIBBIN not set"
-    echo "    Check the OpenFOAM entries in your dot-files and source them."
-    exit 1
-}
+if [ "$(uname -s)" != "Darwin" ]; then
+	[ -n "$FOAM_EXT_LIBBIN" ] || {
+		echo "Error: FOAM_EXT_LIBBIN not set"
+		echo "    Check the OpenFOAM entries in your dot-files and source them."
+		exit 1
+	}
+fi
 
 # wmake is required for subsequent targets
 ( cd wmake/src && make )
@@ -20,9 +22,10 @@ wmakeCheckPwd "$WM_PROJECT_DIR" || {
 # build ThirdParty sources
 if [ -d "$WM_THIRD_PARTY_DIR" ]
 then
-    $WM_THIRD_PARTY_DIR/Allwmake
+	$WM_THIRD_PARTY_DIR/Allwmake
 else
-    echo "no ThirdParty sources found - skipping"
+	[ "$(uname -s)" != "Darwin" ] \
+		&& echo "no ThirdParty sources found - skipping"
 fi
 
 # build OpenFOAM libraries and applications
@@ -31,7 +34,7 @@ applications/Allwmake
 
 if [ "$1" = doc ]
 then
-    doc/Allwmake
+	doc/Allwmake
 fi
 
 # ----------------------------------------------------------------- end-of-file
diff --git a/applications/Allwmake b/applications/Allwmake
index 00bc3266..112e2a3d 100755
--- a/applications/Allwmake
+++ b/applications/Allwmake
@@ -8,13 +8,15 @@ wmakeCheckPwd "$WM_PROJECT_DIR/applications" || {
     exit 1
 }
 
-[ -n "$FOAM_EXT_LIBBIN" ] || {
-    echo "Error: FOAM_EXT_LIBBIN not set"
-    echo "    Check the OpenFOAM entries in your dot-files and source them."
-    exit 1
-}
+if [ "$(uname -s)" != "Darwin" ]; then
+	[ -n "$FOAM_EXT_LIBBIN" ] || {
+		echo "Error: FOAM_EXT_LIBBIN not set"
+		echo "    Check the OpenFOAM entries in your dot-files and source them."
+		exit 1
+	}
+fi
 
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake all utilities
 wmake all solvers
diff --git a/applications/solvers/combustion/reactingFoam/Allwmake b/applications/solvers/combustion/reactingFoam/Allwmake
index 0512e534..6346914d 100755
--- a/applications/solvers/combustion/reactingFoam/Allwmake
+++ b/applications/solvers/combustion/reactingFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake rhoReactingFoam
diff --git a/applications/solvers/compressible/rhoCentralFoam/Allwclean b/applications/solvers/compressible/rhoCentralFoam/Allwclean
index cc5398c0..83011c5e 100755
--- a/applications/solvers/compressible/rhoCentralFoam/Allwclean
+++ b/applications/solvers/compressible/rhoCentralFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso BCs
 wclean
diff --git a/applications/solvers/compressible/rhoCentralFoam/Allwmake b/applications/solvers/compressible/rhoCentralFoam/Allwmake
index 33e08e10..eae5225a 100755
--- a/applications/solvers/compressible/rhoCentralFoam/Allwmake
+++ b/applications/solvers/compressible/rhoCentralFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 (wmake libso BCs && wmake && wmake rhoCentralDyMFoam)
 
diff --git a/applications/solvers/compressible/rhoPimpleFoam/Allwmake b/applications/solvers/compressible/rhoPimpleFoam/Allwmake
index 1b272c17..967f701a 100755
--- a/applications/solvers/compressible/rhoPimpleFoam/Allwmake
+++ b/applications/solvers/compressible/rhoPimpleFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake rhoPimplecFoam
diff --git a/applications/solvers/compressible/rhoSimpleFoam/Allwclean b/applications/solvers/compressible/rhoSimpleFoam/Allwclean
index a1fd479e..a12d86a2 100755
--- a/applications/solvers/compressible/rhoSimpleFoam/Allwclean
+++ b/applications/solvers/compressible/rhoSimpleFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean
 wclean rhoPorousSimpleFoam
diff --git a/applications/solvers/compressible/rhoSimpleFoam/Allwmake b/applications/solvers/compressible/rhoSimpleFoam/Allwmake
index dc0fd648..39a2e0e9 100755
--- a/applications/solvers/compressible/rhoSimpleFoam/Allwmake
+++ b/applications/solvers/compressible/rhoSimpleFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake rhoPorousSimpleFoam
diff --git a/applications/solvers/compressible/sonicFoam/Allwmake b/applications/solvers/compressible/sonicFoam/Allwmake
index 27c1194e..84ffc478 100755
--- a/applications/solvers/compressible/sonicFoam/Allwmake
+++ b/applications/solvers/compressible/sonicFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake sonicDyMFoam
diff --git a/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwclean b/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwclean
index c583a8de..411f1c2b 100755
--- a/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwclean
+++ b/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean
 wclean chtMultiRegionSimpleFoam
diff --git a/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwmake b/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwmake
index f65ba118..e929be82 100755
--- a/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwmake
+++ b/applications/solvers/heatTransfer/chtMultiRegionFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake chtMultiRegionSimpleFoam
diff --git a/applications/solvers/incompressible/pimpleFoam/Allwmake b/applications/solvers/incompressible/pimpleFoam/Allwmake
index 8727bdb2..15edf19c 100755
--- a/applications/solvers/incompressible/pimpleFoam/Allwmake
+++ b/applications/solvers/incompressible/pimpleFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake SRFPimpleFoam
diff --git a/applications/solvers/incompressible/simpleFoam/Allwmake b/applications/solvers/incompressible/simpleFoam/Allwmake
index 801fd3b7..6d19cb31 100755
--- a/applications/solvers/incompressible/simpleFoam/Allwmake
+++ b/applications/solvers/incompressible/simpleFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 
diff --git a/applications/solvers/lagrangian/DPMFoam/Allwclean b/applications/solvers/lagrangian/DPMFoam/Allwclean
index ed697d99..684c898b 100755
--- a/applications/solvers/lagrangian/DPMFoam/Allwclean
+++ b/applications/solvers/lagrangian/DPMFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean dragModels
 wclean
diff --git a/applications/solvers/lagrangian/DPMFoam/Allwmake b/applications/solvers/lagrangian/DPMFoam/Allwmake
index 17722925..55121e54 100755
--- a/applications/solvers/lagrangian/DPMFoam/Allwmake
+++ b/applications/solvers/lagrangian/DPMFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake dragModels
 wmake
diff --git a/applications/solvers/lagrangian/icoUncoupledKinematicParcelFoam/Allwmake b/applications/solvers/lagrangian/icoUncoupledKinematicParcelFoam/Allwmake
index 845cebd7..69d13764 100755
--- a/applications/solvers/lagrangian/icoUncoupledKinematicParcelFoam/Allwmake
+++ b/applications/solvers/lagrangian/icoUncoupledKinematicParcelFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake icoUncoupledKinematicParcelDyMFoam
diff --git a/applications/solvers/lagrangian/reactingParcelFoam/Allwmake b/applications/solvers/lagrangian/reactingParcelFoam/Allwmake
index f615df21..b24f69b7 100755
--- a/applications/solvers/lagrangian/reactingParcelFoam/Allwmake
+++ b/applications/solvers/lagrangian/reactingParcelFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake simpleReactingParcelFoam
diff --git a/applications/solvers/lagrangian/sprayFoam/Allwmake b/applications/solvers/lagrangian/sprayFoam/Allwmake
index 542509db..b62792e4 100755
--- a/applications/solvers/lagrangian/sprayFoam/Allwmake
+++ b/applications/solvers/lagrangian/sprayFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 
diff --git a/applications/solvers/multiphase/cavitatingFoam/Allwclean b/applications/solvers/multiphase/cavitatingFoam/Allwclean
index 62548246..a06cc1f0 100755
--- a/applications/solvers/multiphase/cavitatingFoam/Allwclean
+++ b/applications/solvers/multiphase/cavitatingFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean
 wclean cavitatingDyMFoam
diff --git a/applications/solvers/multiphase/cavitatingFoam/Allwmake b/applications/solvers/multiphase/cavitatingFoam/Allwmake
index 211c1978..2d4eaa83 100755
--- a/applications/solvers/multiphase/cavitatingFoam/Allwmake
+++ b/applications/solvers/multiphase/cavitatingFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake cavitatingDyMFoam
diff --git a/applications/solvers/multiphase/compressibleInterFoam/Allwclean b/applications/solvers/multiphase/compressibleInterFoam/Allwclean
index aa0f3c01..2ce4befb 100755
--- a/applications/solvers/multiphase/compressibleInterFoam/Allwclean
+++ b/applications/solvers/multiphase/compressibleInterFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso twoPhaseMixtureThermo
 wclean
diff --git a/applications/solvers/multiphase/compressibleInterFoam/Allwmake b/applications/solvers/multiphase/compressibleInterFoam/Allwmake
index a93da26c..7a20e329 100755
--- a/applications/solvers/multiphase/compressibleInterFoam/Allwmake
+++ b/applications/solvers/multiphase/compressibleInterFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso twoPhaseMixtureThermo
 wmake
diff --git a/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwclean b/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwclean
index cc138bc0..42d8d983 100755
--- a/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwclean
+++ b/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso phaseModel
 wclean libso interfacialModels
diff --git a/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwmake b/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwmake
index 29294d16..aca0b8d7 100755
--- a/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwmake
+++ b/applications/solvers/multiphase/compressibleTwoPhaseEulerFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso phaseModel
 wmake libso interfacialModels
diff --git a/applications/solvers/multiphase/interFoam/Allwclean b/applications/solvers/multiphase/interFoam/Allwclean
index 8b080006..39e9c740 100755
--- a/applications/solvers/multiphase/interFoam/Allwclean
+++ b/applications/solvers/multiphase/interFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean
 wclean interDyMFoam
diff --git a/applications/solvers/multiphase/interFoam/Allwmake b/applications/solvers/multiphase/interFoam/Allwmake
index cc883614..a0b8cea1 100755
--- a/applications/solvers/multiphase/interFoam/Allwmake
+++ b/applications/solvers/multiphase/interFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake
 wmake interDyMFoam
diff --git a/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.C b/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.C
index 4d8ead85..6c7cd896 100644
--- a/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.C
+++ b/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.C
@@ -92,7 +92,7 @@ Foam::threePhaseMixture::threePhaseMixture
     rho3_(nuModel3_->viscosityProperties().lookup("rho")),
 
     U_(U),
-    phi_(phi),
+    // phi_(phi),
 
     alpha1_(U_.db().lookupObject<const volScalarField> ("alpha1")),
     alpha2_(U_.db().lookupObject<const volScalarField> ("alpha2")),
diff --git a/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.H b/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.H
index 67743ad2..e72c0e17 100644
--- a/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.H
+++ b/applications/solvers/multiphase/interFoam/interMixingFoam/incompressibleThreePhaseMixture/threePhaseMixture.H
@@ -67,7 +67,7 @@ class threePhaseMixture
         dimensionedScalar rho3_;
 
         const volVectorField& U_;
-        const surfaceScalarField& phi_;
+        // const surfaceScalarField& phi_;
 
         const volScalarField& alpha1_;
         const volScalarField& alpha2_;
diff --git a/applications/solvers/multiphase/interPhaseChangeFoam/Allwclean b/applications/solvers/multiphase/interPhaseChangeFoam/Allwclean
index 99c52e59..e17cd5aa 100755
--- a/applications/solvers/multiphase/interPhaseChangeFoam/Allwclean
+++ b/applications/solvers/multiphase/interPhaseChangeFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso phaseChangeTwoPhaseMixtures
 wclean
diff --git a/applications/solvers/multiphase/interPhaseChangeFoam/Allwmake b/applications/solvers/multiphase/interPhaseChangeFoam/Allwmake
index 414ed904..6c35a136 100755
--- a/applications/solvers/multiphase/interPhaseChangeFoam/Allwmake
+++ b/applications/solvers/multiphase/interPhaseChangeFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso phaseChangeTwoPhaseMixtures
 wmake
diff --git a/applications/solvers/multiphase/multiphaseEulerFoam/Allwclean b/applications/solvers/multiphase/multiphaseEulerFoam/Allwclean
index a1a5b83b..79f4af9e 100755
--- a/applications/solvers/multiphase/multiphaseEulerFoam/Allwclean
+++ b/applications/solvers/multiphase/multiphaseEulerFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso phaseModel
 wclean libso multiphaseSystem
diff --git a/applications/solvers/multiphase/multiphaseEulerFoam/Allwmake b/applications/solvers/multiphase/multiphaseEulerFoam/Allwmake
index 4ab7ebbf..12d6884a 100755
--- a/applications/solvers/multiphase/multiphaseEulerFoam/Allwmake
+++ b/applications/solvers/multiphase/multiphaseEulerFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso phaseModel
 wmake libso interfacialModels
diff --git a/applications/solvers/multiphase/multiphaseInterFoam/Allwclean b/applications/solvers/multiphase/multiphaseInterFoam/Allwclean
index 6f55580c..2b7313d3 100755
--- a/applications/solvers/multiphase/multiphaseInterFoam/Allwclean
+++ b/applications/solvers/multiphase/multiphaseInterFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean
 wclean MRFMultiphaseInterFoam
diff --git a/applications/solvers/multiphase/multiphaseInterFoam/Allwmake b/applications/solvers/multiphase/multiphaseInterFoam/Allwmake
index 6e47f91d..9b0ba460 100755
--- a/applications/solvers/multiphase/multiphaseInterFoam/Allwmake
+++ b/applications/solvers/multiphase/multiphaseInterFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso multiphaseMixture
 wmake
diff --git a/applications/solvers/multiphase/twoPhaseEulerFoam/Allwclean b/applications/solvers/multiphase/twoPhaseEulerFoam/Allwclean
index cc138bc0..42d8d983 100755
--- a/applications/solvers/multiphase/twoPhaseEulerFoam/Allwclean
+++ b/applications/solvers/multiphase/twoPhaseEulerFoam/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso phaseModel
 wclean libso interfacialModels
diff --git a/applications/solvers/multiphase/twoPhaseEulerFoam/Allwmake b/applications/solvers/multiphase/twoPhaseEulerFoam/Allwmake
index 29294d16..aca0b8d7 100755
--- a/applications/solvers/multiphase/twoPhaseEulerFoam/Allwmake
+++ b/applications/solvers/multiphase/twoPhaseEulerFoam/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso phaseModel
 wmake libso interfacialModels
diff --git a/applications/utilities/mesh/conversion/Optional/Allwmake b/applications/utilities/mesh/conversion/Optional/Allwmake
index 25800377..1afa0291 100755
--- a/applications/utilities/mesh/conversion/Optional/Allwmake
+++ b/applications/utilities/mesh/conversion/Optional/Allwmake
@@ -3,7 +3,7 @@
 # Build optional components (eg, may depend on third-party libraries)
 # -----------------------------------------------------------------------------
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 # build libccmio and create lnInclude directory
 $WM_THIRD_PARTY_DIR/AllwmakeLibccmio
diff --git a/applications/utilities/mesh/conversion/kivaToFoam/readKivaGrid.H b/applications/utilities/mesh/conversion/kivaToFoam/readKivaGrid.H
index 1a559559..075f2135 100644
--- a/applications/utilities/mesh/conversion/kivaToFoam/readKivaGrid.H
+++ b/applications/utilities/mesh/conversion/kivaToFoam/readKivaGrid.H
@@ -426,7 +426,7 @@ if (pFaces[WEDGE].size() && pFaces[WEDGE][0].size())
         for
         (
             ;
-            iterf != pFaces[WEDGE][0].end(), iterb != pFaces[WEDGE][1].end();
+            iterb != pFaces[WEDGE][1].end();
             ++iterf, ++iterb
         )
         {
diff --git a/applications/utilities/mesh/generation/Allwmake b/applications/utilities/mesh/generation/Allwmake
index d557fa34..fabc2db9 100755
--- a/applications/utilities/mesh/generation/Allwmake
+++ b/applications/utilities/mesh/generation/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake blockMesh
 wmake all extrude
diff --git a/applications/utilities/mesh/generation/extrude/Allwclean b/applications/utilities/mesh/generation/extrude/Allwclean
index 253b4b4d..b4ece2d7 100755
--- a/applications/utilities/mesh/generation/extrude/Allwclean
+++ b/applications/utilities/mesh/generation/extrude/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean extrudeMesh
 wclean extrudeToRegionMesh
diff --git a/applications/utilities/mesh/generation/extrude/Allwmake b/applications/utilities/mesh/generation/extrude/Allwmake
index 3fd3d231..1b22d901 100755
--- a/applications/utilities/mesh/generation/extrude/Allwmake
+++ b/applications/utilities/mesh/generation/extrude/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake extrudeMesh
 wmake extrudeToRegionMesh
diff --git a/applications/utilities/mesh/generation/extrude2DMesh/Allwclean b/applications/utilities/mesh/generation/extrude2DMesh/Allwclean
index 44537ed6..75594be1 100755
--- a/applications/utilities/mesh/generation/extrude2DMesh/Allwclean
+++ b/applications/utilities/mesh/generation/extrude2DMesh/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso extrude2DMesh
 wclean
diff --git a/applications/utilities/mesh/generation/extrude2DMesh/Allwmake b/applications/utilities/mesh/generation/extrude2DMesh/Allwmake
index 6f54612f..d731c1e2 100755
--- a/applications/utilities/mesh/generation/extrude2DMesh/Allwmake
+++ b/applications/utilities/mesh/generation/extrude2DMesh/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso extrude2DMesh
 wmake
diff --git a/applications/utilities/mesh/generation/snappyHexMesh/Make/options b/applications/utilities/mesh/generation/snappyHexMesh/Make/options
index af056ec7..77451ed0 100644
--- a/applications/utilities/mesh/generation/snappyHexMesh/Make/options
+++ b/applications/utilities/mesh/generation/snappyHexMesh/Make/options
@@ -1,5 +1,4 @@
 EXE_INC = \
-    /* -g -DFULLDEBUG -O0 */ \
     -I$(LIB_SRC)/parallel/decompose/decompositionMethods/lnInclude \
     -I$(LIB_SRC)/mesh/autoMesh/lnInclude \
     -I$(LIB_SRC)/meshTools/lnInclude \
diff --git a/applications/utilities/mesh/manipulation/renumberMesh/Allwmake b/applications/utilities/mesh/manipulation/renumberMesh/Allwmake
index 25091457..7af63875 100755
--- a/applications/utilities/mesh/manipulation/renumberMesh/Allwmake
+++ b/applications/utilities/mesh/manipulation/renumberMesh/Allwmake
@@ -4,15 +4,18 @@ cd ${0%/*} || exit 1    # run from this directory
 export COMPILE_FLAGS=''
 export LINK_FLAGS=''
 
-if [ -f "${FOAM_LIBBIN}/libSloanRenumber.so" ]
+DYLIB_EXT="so"
+[ "$(uname -s)" == "Darwin" ] && DYLIB_EXT="dylib"
+
+if [ -f "${FOAM_LIBBIN}/libSloanRenumber.$DYLIB_EXT" ]
 then
-    echo "Found libSloanRenumber.so  --  enabling Sloan renumbering support."
+	echo "Found libSloanRenumber.$DYLIB_EXT  --  enabling Sloan renumbering support."
     export LINK_FLAGS="${LINK_FLAGS} -lSloanRenumber"
 fi
 
-if [ "${ZOLTAN_ARCH_PATH}/lib/libzoltan.a" -a -f "${FOAM_LIBBIN}/libzoltanRenumber.so" ]
+if [ "${ZOLTAN_ARCH_PATH}/lib/libzoltan.a" -a -f "${FOAM_LIBBIN}/libzoltanRenumber.$DYLIB_EXT" ]
 then
-    echo "Found libzoltanRenumber.so  --  enabling zoltan renumbering support."
+    echo "Found libzoltanRenumber.$DYLIB_EXT  --  enabling zoltan renumbering support."
     export COMPILE_FLAGS="-DFOAM_USE_ZOLTAN"
     export LINK_FLAGS="${LINK_FLAGS} -lzoltanRenumber -L${ZOLTAN_ARCH_PATH}/lib -lzoltan"
 fi
diff --git a/applications/utilities/mesh/manipulation/renumberMesh/Make/options b/applications/utilities/mesh/manipulation/renumberMesh/Make/options
index 49a1c3d2..882d1e43 100644
--- a/applications/utilities/mesh/manipulation/renumberMesh/Make/options
+++ b/applications/utilities/mesh/manipulation/renumberMesh/Make/options
@@ -1,5 +1,4 @@
 EXE_INC = \
-    /* -DFULLDEBUG -g -O0 */ \
     ${COMPILE_FLAGS} \
     -I$(LIB_SRC)/meshTools/lnInclude \
     -I$(LIB_SRC)/dynamicMesh/lnInclude \
diff --git a/applications/utilities/miscellaneous/foamDebugSwitches/Make/options b/applications/utilities/miscellaneous/foamDebugSwitches/Make/options
index 43f0c24c..262b4c35 100644
--- a/applications/utilities/miscellaneous/foamDebugSwitches/Make/options
+++ b/applications/utilities/miscellaneous/foamDebugSwitches/Make/options
@@ -42,10 +42,8 @@ EXE_LIBS = \
     -lmeshTools \
     -lmolecularMeasurements \
     -lmolecule \
-/*    -lmultiphaseInterFoam  */ \
     -lODE \
     -lOpenFOAM \
-/*    -lphaseModel  */ \
     -lpotential \
     -lradiationModels \
     -lrandomProcesses \
diff --git a/applications/utilities/postProcessing/dataConversion/foamToEnsight/Make/options b/applications/utilities/postProcessing/dataConversion/foamToEnsight/Make/options
index 77992428..b4382c4d 100644
--- a/applications/utilities/postProcessing/dataConversion/foamToEnsight/Make/options
+++ b/applications/utilities/postProcessing/dataConversion/foamToEnsight/Make/options
@@ -1,5 +1,4 @@
 EXE_INC = \
-    /* -DFULLDEBUG -g -O0 */ \
     -I$(LIB_SRC)/finiteVolume/lnInclude \
     -I$(LIB_SRC)/meshTools/lnInclude \
     -I$(LIB_SRC)/sampling/lnInclude \
diff --git a/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.C b/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.C
index dc37b02d..cffc6cc4 100644
--- a/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.C
+++ b/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.C
@@ -37,7 +37,6 @@ Foam::surfaceMeshWriter::surfaceMeshWriter
     const fileName& fName
 )
 :
-    vMesh_(vMesh),
     binary_(binary),
     pp_(pp),
     fName_(fName),
diff --git a/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.H b/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.H
index 66bfbdb9..651c5280 100644
--- a/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.H
+++ b/applications/utilities/postProcessing/dataConversion/foamToVTK/surfaceMeshWriter.H
@@ -58,7 +58,7 @@ class volPointInterpolation;
 
 class surfaceMeshWriter
 {
-    const vtkMesh& vMesh_;
+    // const vtkMesh& vMesh_;
 
     const bool binary_;
 
diff --git a/applications/utilities/postProcessing/graphics/PV3Readers/Allwclean b/applications/utilities/postProcessing/graphics/PV3Readers/Allwclean
index b867e563..d1668b19 100755
--- a/applications/utilities/postProcessing/graphics/PV3Readers/Allwclean
+++ b/applications/utilities/postProcessing/graphics/PV3Readers/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean libso vtkPV3Readers
 PV3blockMeshReader/Allwclean
diff --git a/applications/utilities/postProcessing/graphics/PV3Readers/Allwmake b/applications/utilities/postProcessing/graphics/PV3Readers/Allwmake
index 1568f8af..1d3df641 100755
--- a/applications/utilities/postProcessing/graphics/PV3Readers/Allwmake
+++ b/applications/utilities/postProcessing/graphics/PV3Readers/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-#set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 if [ -d "$ParaView_DIR" -a -r "$ParaView_DIR" ]
 then
diff --git a/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwclean b/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwclean
index c5f41ab9..c6f5b870 100755
--- a/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwclean
+++ b/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 # deal with client/server vs combined plugins
 rm -f $FOAM_LIBBIN/libPV3FoamReader* 2>/dev/null
diff --git a/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwmake b/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwmake
index c99e05fd..6b8e6ede 100755
--- a/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwmake
+++ b/applications/utilities/postProcessing/graphics/PV3Readers/PV3FoamReader/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 if [ -d "$ParaView_DIR" -a -r "$ParaView_DIR" ]
 then
diff --git a/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwclean b/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwclean
index d2c85df0..eaf225ca 100755
--- a/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwclean
+++ b/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwclean
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 # deal with client/server vs combined plugins
 rm -f $FOAM_LIBBIN/libPV3blockMeshReader*  2>/dev/null
diff --git a/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwmake b/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwmake
index 4f055b3c..bd68d579 100755
--- a/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwmake
+++ b/applications/utilities/postProcessing/graphics/PV3Readers/PV3blockMeshReader/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 if [ -d "$ParaView_DIR" -a -r "$ParaView_DIR" ]
 then
diff --git a/applications/utilities/preProcessing/wallFunctionTable/Allwmake b/applications/utilities/preProcessing/wallFunctionTable/Allwmake
index 55a6cbd3..b37a733b 100755
--- a/applications/utilities/preProcessing/wallFunctionTable/Allwmake
+++ b/applications/utilities/preProcessing/wallFunctionTable/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libso tabulatedWallFunction
 wmake
diff --git a/applications/utilities/surface/surfaceFeatureExtract/Allwmake b/applications/utilities/surface/surfaceFeatureExtract/Allwmake
index 2b9a927d..f0092c32 100755
--- a/applications/utilities/surface/surfaceFeatureExtract/Allwmake
+++ b/applications/utilities/surface/surfaceFeatureExtract/Allwmake
@@ -1,27 +1,48 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 if [ -n "$CGAL_ARCH_PATH" ]
 then
+    [ -z "$WM_SILENT_RULES" ] && {
     echo
     echo "Compiling surfaceFeatureExtract with CGAL curvature support"
     echo
+    }
 
-    wmake "ENABLE_CURVATURE=-DENABLE_CURVATURE \
-           EXE_FROUNDING_MATH=-frounding-math \
-           USE_F2C=-DCGAL_USE_F2C \
-           CGAL_LIBDIR=-L$CGAL_ARCH_PATH/lib \
-           LAPACK_LIB=-llapack \
-           BLAS_LIB=-lblas \
-           CGAL_LIB=-lCGAL \
-           CGAL_BOOST_LIB=-lboost_thread \
-           CGAL_MPFR_LIB=-lmpfr"
+	if [ "$(uname -s)" = "Darwin" ]
+    then
+		WM_FLAGS="ENABLE_CURVATURE=-DENABLE_CURVATURE \
+            EXE_FROUNDING_MATH= \
+			USE_F2C=-DCGAL_USE_F2C \
+			CGAL_LIBDIR=-L$CGAL_ARCH_PATH/lib \
+            EIGEN3_LIBDIR=-L$EIGEN_ARCH_PATH/lib \
+			LAPACK_LIB=-llapack \
+			BLAS_LIB=-lblas \
+			CGAL_LIB=-lCGAL \
+			CGAL_BOOST_LIB=-lboost_thread-mt \
+			CGAL_MPFR_LIB=-lmpfr"
+        [ -d "$CGAL_ARCH_PATH/include/CGAL/Lapack" ] \
+            && WM_FLAGS="$WM_FLAGS -DCGAL_HAS_LAPACK"
+        wmake "$WM_FLAGS"
+	else
+		wmake "ENABLE_CURVATURE=-DENABLE_CURVATURE \
+			EXE_FROUNDING_MATH=-frounding-math \
+			USE_F2C=-DCGAL_USE_F2C \
+			CGAL_LIBDIR=-L$CGAL_ARCH_PATH/lib \
+			LAPACK_LIB=-llapack \
+			BLAS_LIB=-lblas \
+			CGAL_LIB=-lCGAL \
+			CGAL_BOOST_LIB=-lboost_thread \
+			CGAL_MPFR_LIB=-lmpfr"
+	fi
 else
+    [ -z "$WM_SILENT_RULES" ] && {
     echo
     echo "Compiling surfaceFeatureExtract without CGAL curvature support"
     echo
+    }
 
     wmake
 fi
diff --git a/applications/utilities/surface/surfaceFeatureExtract/Make/options b/applications/utilities/surface/surfaceFeatureExtract/Make/options
index 461cec9f..8ab9849e 100644
--- a/applications/utilities/surface/surfaceFeatureExtract/Make/options
+++ b/applications/utilities/surface/surfaceFeatureExtract/Make/options
@@ -1,4 +1,4 @@
-include $(GENERAL_RULES)/CGAL
+include $(RULES)/CGAL
 
 EXE_INC = \
     ${ENABLE_CURVATURE}\
diff --git a/applications/utilities/surface/surfaceFeatureExtract/surfaceFeatureExtract.C b/applications/utilities/surface/surfaceFeatureExtract/surfaceFeatureExtract.C
index 87350c4c..74d0f584 100644
--- a/applications/utilities/surface/surfaceFeatureExtract/surfaceFeatureExtract.C
+++ b/applications/utilities/surface/surfaceFeatureExtract/surfaceFeatureExtract.C
@@ -48,11 +48,14 @@ Description
 #include "plane.H"
 
 #ifdef ENABLE_CURVATURE
-#include "buildCGALPolyhedron.H"
-#include "CGALPolyhedronRings.H"
-#include <CGAL/Monge_via_jet_fitting.h>
-#include <CGAL/Lapack/Linear_algebra_lapack.h>
-#include <CGAL/property_map.h>
+#   include "buildCGALPolyhedron.H"
+#   include "CGALPolyhedronRings.H"
+#   define CGAL_EIGEN3_ENABLED
+#   include <CGAL/Monge_via_jet_fitting.h>
+#   ifdef CGAL_HAS_LAPACK
+#       include <CGAL/Lapack/Linear_algebra_lapack.h>
+#   endif
+#   include <CGAL/property_map.h>
 #endif
 
 using namespace Foam;
@@ -82,7 +85,8 @@ scalarField calcCurvature(const triSurface& surf)
         Vertex_PM_type;
     typedef T_PolyhedralSurf_rings<Polyhedron, Vertex_PM_type > Poly_rings;
 
-    typedef CGAL::Monge_via_jet_fitting<Kernel>         Monge_via_jet_fitting;
+#   define CGAL_EIGEN3_ENABLED
+    typedef CGAL::Monge_via_jet_fitting<Kernel> Monge_via_jet_fitting;
     typedef Monge_via_jet_fitting::Monge_form           Monge_form;
 
     std::vector<Point_3> in_points;  //container for data points
diff --git a/bin/foamEtcFile b/bin/foamEtcFile
index a0816714..daf64671 100755
--- a/bin/foamEtcFile
+++ b/bin/foamEtcFile
@@ -120,6 +120,9 @@ openfoam[0-9]*)     # debian naming convention 'openfoam<VERSION>'
         ;;
     esac
     ;;
+[0-9][0-9]* | [0-9][0-9]*.[0-9][0-9]*)  # version naming scheme
+    version="$projectDirName"
+    ;;
 
 *)
     echo "Error : unknown/unsupported naming convention"
diff --git a/bin/foamInstallationTest b/bin/foamInstallationTest
index fe72e8ce..9870a35d 100755
--- a/bin/foamInstallationTest
+++ b/bin/foamInstallationTest
@@ -42,8 +42,8 @@ fatalError=0
 criticalError=0
 
 # System variables
-HOST=`uname -n`
-OSTYPE=`uname -s`
+HOST=$(uname -n)
+OSTYPE=$(uname -s)
 USER_NAME=$LOGNAME
 : ${USER_NAME:=$USER}
 
@@ -249,6 +249,9 @@ reportExecutable()
         VERSION=`$1 --version /dev/null 2>&1      \
             | sed -ne 's/flex \([0-9][0-9.]*\).*/\1/p' `
         ;;
+	clang)
+		VERSION=$($1 --version 2>&1 | sed -ne 's/.*clang-\([0-9.]*\)/\1/p')
+		;;
     gcc)
         VERSION=`$1 -v 2>&1 \
             | sed -ne 's/^gcc version \([0-9][0-9.]*\).*/\1/p' `
@@ -264,9 +267,9 @@ reportExecutable()
 
         gccOK=""
         pass=""
-        if [ $V1 -lt $MINV1 ]; then
+        if [ "$V1" -lt "$MINV1" ]; then
             gccOk="ERROR"
-        elif [ $V1 -gt $MINV1 ]; then
+        elif [ "$V1" -gt "$MINV1" ]; then
             pass="yes"
         fi
 
@@ -298,13 +301,23 @@ reportExecutable()
         VERSION=`$APP_PATH --version | head -1`
         ;;
     tar)
-        VERSION=`$APP_PATH --version | head -1 | cut -d" " -f4`
+		case "$OSTYPE" in
+		Darwin)
+			VERSION=$($APP_PATH --version | head -1 | cut -d" " -f2)
+			;;
+		*)
+			VERSION=`$APP_PATH --version | head -1 | cut -d" " -f4`
+			;;
+		esac
         ;;
     gzip)
         case "$OSTYPE" in
         SunOS)
             VERSION=`$1 --version 2>&1 | grep gzip | cut -d" " -f2`
             ;;
+		Darwin)
+			VERSION=$($1 --version 2>&1)
+			;;
         *)
             VERSION=`$1 --version | head -1 | cut -d" " -f2`
             ;;
@@ -332,7 +345,8 @@ reportExecutable()
 
 checkOpenFOAMEnvironment()
 {
-    [ -d "$WM_PROJECT_INST_DIR" ] && [ -d "$WM_THIRD_PARTY_DIR" ] || {
+    [ -d "$WM_PROJECT_INST_DIR" ] \
+		&& [ -d "$WM_THIRD_PARTY_DIR" -o "$(uname -s)" = "Darwin" ] || {
         echo ""
         echo "FATAL ERROR: OpenFOAM environment not configured."
         echo ""
@@ -380,7 +394,7 @@ checkHostName()
 checkOS()
 {
     case "$OSTYPE" in
-    Linux | LinuxAMD64 | SunOS )
+    Linux | LinuxAMD64 | SunOS | Darwin )
         echo "`fixlen OS: $WIDTH` $OSTYPE version $(uname -r)"
         ;;
     *)
@@ -457,9 +471,14 @@ hline
 echo "$COL1 $COL2 $COL3"
 hline
 reportExecutable flex
-reportExecutable gcc
+if [ "$OSTYPE" = "Darwin" ]
+then
+	reportExecutable clang
+else
+	reportExecutable gcc
+fi
 reportExecutable gzip
-if [ "$OSTYPE" = Linux ]
+if [ "$OSTYPE" = Linux -o "$OSTYPE" = "Darwin" ]
 then
     reportExecutable tar
 else
diff --git a/bin/foamJob b/bin/foamJob
index 20793c3d..5a35f186 100755
--- a/bin/foamJob
+++ b/bin/foamJob
@@ -247,6 +247,14 @@ then
     fi
 
 else
+	# Check if we are on El Capitan
+	if test "$(uname -s)" = "Darwin" && \
+		{ test "$(uname -r | cut -d. -f1)" -eq "15"; }
+	then
+		# Using foamExec workaround to reexport (DY)LD_LIBRARY_PATH variables
+		APPLICATION="foamExec $APPLICATION"
+	fi
+
     #
     # run (on single processor)
     #
diff --git a/bin/paraFoam b/bin/paraFoam
index d288e3fb..6e46cdd1 100755
--- a/bin/paraFoam
+++ b/bin/paraFoam
@@ -68,9 +68,15 @@ unset regionName optTouch
 export LC_ALL=C
 
 # reader extension
-extension=OpenFOAM
+if [ "$(uname -s)" == "Darwin" ]; then
+	extension=foam
 
-requirePV=1
+	requirePV=0
+else
+	extension=OpenFOAM
+
+	requirePV=1
+fi
 
 # parse options
 while [ "$#" -gt 0 ]
diff --git a/bin/tools/RunFunctions b/bin/tools/RunFunctions
index 3632a62d..bc33826b 100644
--- a/bin/tools/RunFunctions
+++ b/bin/tools/RunFunctions
@@ -28,75 +28,142 @@
 #     Miscellaneous functions for running tutorial cases
 #------------------------------------------------------------------------------
 
+isSIPEnabled()
+{
+    $(which -s csrutil) && {
+    [ $(csrutil status | awk '{print $5}' | tr -d ".") = "enabled" ] \
+        && return 0
+    }
+    return 1
+}
+
+# Workaround for cleared DYLD_LIBRARY_PATH
+[ "$(uname -s)" = "Darwin" ] && isSIPEnabled && . $WM_PROJECT_DIR/etc/bashrc
+
 getNumberOfProcessors()
 {
-    sed -ne 's/^numberOfSubdomains *\(.*\);/\1/p' system/decomposeParDict
+    grep numberOfSubdomains system/decomposeParDict \
+        | awk '{print $2}' \
+        | tr -d ";"
 }
 
 getApplication()
 {
-    sed -ne 's/^ *application *\([a-zA-Z]*\) *;.*$/\1/p' system/controlDict
+    grep application system/controlDict \
+        | awk '{print $2}' \
+        | tr -d ";"
 }
 
 runApplication()
 {
-    APP_RUN=$1
-    APP_NAME=${1##*/}
+    local force=
+    local append=
+
+    local app_run="$1"
+    while [ "$(echo $app_run | cut -c1)" = "-" ]; do
+        case $app_run in
+        -f|--force|-force|-overwrite)
+            force=y
+            ;;
+        -a|--append|-append)
+            append=y
+            ;;
+        esac
+        shift
+        app_run="$1"
+    done
     shift
+    local app_name=${app_run##*/}
+
+    [ -x "$(which $app_run)" ] || {
+    echo "Application $app_run does not exist or is not executable."
+    exit 1
+    }
+
+    [ "$force" = "y" ] && rm -f "log.$app_name"
 
-    if [ -f log.$APP_NAME ]
+    if [ -f "log.$app_name" ]
     then
-        echo "$APP_NAME already run on $PWD: remove log file to re-run"
+        if [ "$append" = "y" ]
+        then
+            echo "Running $app_run on $PWD (appending to log.$app_name)"
+            $app_run "$@" >> "log.$app_name" 2>&1
+        else
+            echo "$app_name already run on $PWD: remove log file to re-run"
+        fi
     else
-        echo "Running $APP_RUN on $PWD"
-        $APP_RUN "$@" > log.$APP_NAME 2>&1
+        echo "Running $app_run on $PWD"
+        $app_run "$@" > "log.$app_name" 2>&1
     fi
 }
 
 runParallel()
 {
-    APP_RUN=$1
-    APP_NAME=${1##*/}
+    local force=
+    local append=
+
+    local app_run="$1"
+    while [ "$(echo $app_run | cut -c1)" = "-" ]; do
+        case $app_run in
+        -f|--force)
+            force=y
+            ;;
+        -a|--append)
+            append=y
+            ;;
+        esac
+        shift
+        app_run="$1"
+    done
+    shift
+    local app_name=${app_run##*/}
+
+    [ -x "$(which $app_run)" ] || {
+    echo "Application $app_run does not exist or is not executable."
+    exit 1
+    }
+
+    [ "$force" = "y" ] && rm -f "log.$app_name"
+
+    local n_procs="$1"
     shift
 
-    if [ -f log.$APP_NAME ]
+    if [ -f "log.$app_name" ]
     then
-        echo "$APP_NAME already run on $PWD: remove log file to re-run"
+        if [ "$append" = "y" ]
+        then
+            echo
+        else
+            echo "$app_name already run on $PWD: remove log file to re-run"
+        fi
     else
-        nProcs=$1
-        shift
-        echo "Running $APP_RUN in parallel on $PWD using $nProcs processes"
-
-        #if [ "$WM_SCHEDULER" ]
-        #then
-        #    echo "$PWD: $WM_SCHEDULER -np $nProcs" 1>&2
-        #    $WM_SCHEDULER -np $nProcs "( mpirun -np $nProcs $APP_RUN -parallel "$@" < /dev/null > log.$APP_NAME 2>&1 )"
-        #else
-            ( mpirun -np $nProcs $APP_RUN -parallel "$@" < /dev/null > log.$APP_NAME 2>&1 )
-        #fi
+        echo "Running $app_run in parallel on $PWD using $n_procs processes"
+
+        ( mpirun -np "$n_procs" $app_run -parallel "$@" < /dev/null > "log.$app_name" 2>&1 )
     fi
 }
 
 compileApplication()
 {
     echo "Compiling $1 application"
-    wmake $1
+    wmake "$1"
 }
 
 cloneCase()
 {
-    if [ -d $2 ]
+    if [ -d "$2" ]
     then
         echo "Case already cloned: remove case directory $2 to clone"
     else
         echo "Cloning $2 case from $1"
-        mkdir $2
+        mkdir "$2"
         cpfiles="0 system constant"
         for f in $cpfiles
         do
-            cp -r $1/$f $2
+            cp -r "$1/$f" "$2"
         done
     fi
 }
 
+# vim: set ft=sh:
 #------------------------------------------------------------------------------
diff --git a/bin/tools/replaceAllShellSun b/bin/tools/replaceAllShellSun
index d5a0d8db..b57271e8 100755
--- a/bin/tools/replaceAllShellSun
+++ b/bin/tools/replaceAllShellSun
@@ -1,6 +1,6 @@
 #!/usr/xpg4/bin/sh
 
-# Replace all shell script headers with 
+# Replace all shell script headers with
 if [ $# -ne 1 -o ! -d "$1" ]
 then
     echo "Usage: ${0##*/} <dir>"
diff --git a/doc/Allwmake b/doc/Allwmake
index 5d8ed9c5..dff41f26 100755
--- a/doc/Allwmake
+++ b/doc/Allwmake
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 # fix permissions (NB: '+X' and not '+x'!)
 chmod a+rX $WM_PROJECT_DIR $WM_PROJECT_DIR/doc Doxygen
diff --git a/doc/Doxygen/Allwmake b/doc/Doxygen/Allwmake
index fbc20d93..fde5e5cc 100755
--- a/doc/Doxygen/Allwmake
+++ b/doc/Doxygen/Allwmake
@@ -8,7 +8,7 @@ cd ${0%/*} || exit 1    # run from this directory
     exit 1
 }
 
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 rm -rf latex man
 
diff --git a/etc/bashrc b/etc/bashrc
index 0f0ff507..d400eb71 100644
--- a/etc/bashrc
+++ b/etc/bashrc
@@ -81,7 +81,7 @@ export WM_COMPILE_OPTION=Opt
 #- MPI implementation:
 #    WM_MPLIB = SYSTEMOPENMPI | OPENMPI | MPICH | MPICH-GM | HPMPI
 #               | GAMMA | MPI | QSMPI | SGIMPI
-export WM_MPLIB=OPENMPI
+export WM_MPLIB=SYSTEMOPENMPI
 
 #- Operating System:
 #    WM_OSTYPE = POSIX | ???
@@ -104,7 +104,7 @@ export FOAM_SIGFPE=
 foamOldDirs="$FOAM_INST_DIR $WM_PROJECT_SITE $HOME/$WM_PROJECT/$USER"
 if [ "$WM_PROJECT_INST_DIR" != "$FOAM_INST_DIR" ]
 then
-    foamOldDirs="$WM_PROJECT_INST_DIR $foamOldDirs"
+	foamOldDirs="$WM_PROJECT_INST_DIR $foamOldDirs"
 fi
 
 
@@ -115,16 +115,17 @@ export WM_PROJECT_DIR=$WM_PROJECT_INST_DIR/$WM_PROJECT-$WM_PROJECT_VERSION
 
 # Location of third-party software
 # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-export WM_THIRD_PARTY_DIR=$WM_PROJECT_INST_DIR/ThirdParty-$WM_PROJECT_VERSION
+[ "$(uname -s)" = "Darwin" ] \
+	|| export WM_THIRD_PARTY_DIR=$WM_PROJECT_INST_DIR/ThirdParty-$WM_PROJECT_VERSION
 
 # Location of site-specific templates etc
 # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 # unset is equivalent to $WM_PROJECT_INST_DIR/site
 if [ -d "$WM_PROJECT_SITE" ]
 then
-    export WM_PROJECT_SITE
+	export WM_PROJECT_SITE
 else
-    unset WM_PROJECT_SITE
+	unset WM_PROJECT_SITE
 fi
 
 # Location of user files
@@ -135,46 +136,46 @@ export WM_PROJECT_USER_DIR=$HOME/$WM_PROJECT/$USER-$WM_PROJECT_VERSION
 # Source files, possibly with some verbosity
 _foamSource()
 {
-    while [ $# -ge 1 ]
-    do
-        [ "$FOAM_VERBOSE" -a "$PS1" ] && echo "Sourcing: $1" 1>&2
-        . $1
-       shift
-    done
+	while [ $# -ge 1 ]
+	do
+		[ "$FOAM_VERBOSE" -a "$PS1" ] && echo "Sourcing: $1" 1>&2
+		. $1
+		shift
+	done
 }
 
 # Evaluate command-line parameters
 _foamEval()
 {
-    while [ $# -gt 0 ]
-    do
-        case "$1" in
-        -*)
-            # stray option (not meant for us here) -> get out
-            break
-            ;;
-        *=)
-            # name=       -> unset name
-            [ "$FOAM_VERBOSE" -a "$PS1" ] && echo "unset ${1%=}" 1>&2
-            eval "unset ${1%=}"
-            ;;
-        *=*)
-            # name=value  -> export name=value
-            [ "$FOAM_VERBOSE" -a "$PS1" ] && echo "export $1" 1>&2
-            eval "export $1"
-            ;;
-        *)
-            # filename: source it
-            if [ -f "$1" ]
-            then
-                _foamSource "$1"
-            else
-                _foamSource `$WM_PROJECT_DIR/bin/foamEtcFile -silent "$1"`
-            fi
-            ;;
-        esac
-        shift
-    done
+	while [ $# -gt 0 ]
+	do
+		case "$1" in
+		-*)
+			# stray option (not meant for us here) -> get out
+			break
+			;;
+		*=)
+			# name=       -> unset name
+			[ "$FOAM_VERBOSE" -a "$PS1" ] && echo "unset ${1%=}" 1>&2
+			eval "unset ${1%=}"
+			;;
+		*=*)
+			# name=value  -> export name=value
+			[ "$FOAM_VERBOSE" -a "$PS1" ] && echo "export $1" 1>&2
+			eval "export $1"
+			;;
+		*)
+			# filename: source it
+			if [ -f "$1" ]
+			then
+				_foamSource "$1"
+			else
+				_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile -silent "$1"`
+			fi
+			;;
+		esac
+		shift
+	done
 }
 
 
@@ -193,15 +194,28 @@ foamClean=$WM_PROJECT_DIR/bin/foamCleanPath
 #- Clean PATH
 cleaned=`$foamClean "$PATH" "$foamOldDirs"` && PATH="$cleaned"
 
-#- Clean LD_LIBRARY_PATH
-cleaned=`$foamClean "$LD_LIBRARY_PATH" "$foamOldDirs"` \
-    && LD_LIBRARY_PATH="$cleaned"
+if [ "$(uname -s)" = "Darwin" ]
+then
+    #- Clean DYLD_LIBRARY_PATH on OS X
+	cleaned=`$foamClean "$DYLD_LIBRARY_PATH" "$foamOldDirs"` \
+		&& DYLD_LIBRARY_PATH="$cleaned"
+else
+    #- Clean LD_LIBRARY_PATH
+    cleaned=`$foamClean "$LD_LIBRARY_PATH" "$foamOldDirs"` \
+        && LD_LIBRARY_PATH="$cleaned"
+fi
 
 #- Clean MANPATH
 cleaned=`$foamClean "$MANPATH" "$foamOldDirs"` && MANPATH="$cleaned"
 
-export PATH LD_LIBRARY_PATH MANPATH
+export PATH MANPATH
 
+if [ "$(uname -s)" = "Darwin" ]
+then
+    export DYLD_LIBRARY_PATH
+else
+    export LD_LIBRARY_PATH
+fi
 
 # Source project setup files
 # ~~~~~~~~~~~~~~~~~~~~~~~~~~
@@ -211,9 +225,13 @@ _foamSource $WM_PROJECT_DIR/etc/config/aliases.sh
 
 # Source user setup files for optional packages
 # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/paraview.sh`
-_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/ensight.sh`
-_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/gperftools.sh`
+if [ "$(uname -s)" = "Darwin" ]; then
+	_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/paraview-osx.sh`
+else
+	_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/paraview.sh`
+	_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/ensight.sh`
+	_foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/gperftools.sh`
+fi
 
 
 # Clean environment paths again. Only remove duplicates
@@ -221,19 +239,32 @@ _foamSource `$WM_PROJECT_DIR/bin/foamEtcFile config/gperftools.sh`
 #- Clean PATH
 cleaned=`$foamClean "$PATH"` && PATH="$cleaned"
 
-#- Clean LD_LIBRARY_PATH
-cleaned=`$foamClean "$LD_LIBRARY_PATH"` && LD_LIBRARY_PATH="$cleaned"
+if [ "$(uname -s)" = "Darwin" ]
+then
+    #- Clean DYLD_LIBRARY_PATH on OS X
+	cleaned=`$foamClean "$DYLD_LIBRARY_PATH"` && DYLD_LIBRARY_PATH="$cleaned"
+else
+    #- Clean LD_LIBRARY_PATH
+    cleaned=`$foamClean "$LD_LIBRARY_PATH"` && LD_LIBRARY_PATH="$cleaned"
+fi
 
 #- Clean MANPATH (trailing ':' to find system pages)
 cleaned=`$foamClean "$MANPATH"`: && MANPATH="$cleaned"
 
-export PATH LD_LIBRARY_PATH MANPATH
+export PATH MANPATH
+
+if [ "$(uname -s)" = "Darwin" ]
+then
+    export DYLD_LIBRARY_PATH
+else
+    export LD_LIBRARY_PATH
+fi
 
 #- Clean LD_PRELOAD
 if [ -n "$LD_PRELOAD" ]
 then
-    cleaned=`$foamClean "$LD_PRELOAD"` && LD_PRELOAD="$cleaned"
-    export LD_PRELOAD
+	cleaned=`$foamClean "$LD_PRELOAD"` && LD_PRELOAD="$cleaned"
+	export LD_PRELOAD
 fi
 
 
diff --git a/etc/config/paraview-osx.sh b/etc/config/paraview-osx.sh
new file mode 100644
index 00000000..8a45da2a
--- /dev/null
+++ b/etc/config/paraview-osx.sh
@@ -0,0 +1,15 @@
+if [ -d "/Applications/paraview.app" ]; then
+	[ "$FOAM_VERBOSE" -a "$PS1" ] && echo "Using /Applications/paraview.app"
+
+	paraview () {
+		"/Applications/paraview.app/Contents/MacOS/paraview" "$@"
+	}
+
+	export -f paraview
+else
+	echo
+	echo "Please download binary Paraview release from"
+	echo "http://paraview.org and install it in /Applications"
+	echo "folder."
+	echo
+fi
diff --git a/etc/config/scotch.sh b/etc/config/scotch.sh
index 1ee06e80..d1aed11f 100644
--- a/etc/config/scotch.sh
+++ b/etc/config/scotch.sh
@@ -33,7 +33,17 @@
 #     during the wmake process
 #------------------------------------------------------------------------------
 
-export SCOTCH_VERSION=scotch_6.0.0
-export SCOTCH_ARCH_PATH=$WM_THIRD_PARTY_DIR/platforms/$WM_ARCH$WM_COMPILER/$SCOTCH_VERSION
+if [ "$(uname -s)" = "Darwin" ]
+then
+    _scotch_path="$(brew --prefix)/opt/scotch"
+
+	export SCOTCH_VERSION="scotch_$(basename $(readlink "$_scotch_path"))"
+	export SCOTCH_ARCH_PATH="$_scotch_path"
+
+    unset _scotch_path
+else
+	export SCOTCH_VERSION=scotch_6.0.0
+	export SCOTCH_ARCH_PATH=$WM_THIRD_PARTY_DIR/platforms/$WM_ARCH$WM_COMPILER/$SCOTCH_VERSION
+fi
 
 # -----------------------------------------------------------------------------
diff --git a/etc/config/settings.sh b/etc/config/settings.sh
index 5a77479b..bc7be6da 100644
--- a/etc/config/settings.sh
+++ b/etc/config/settings.sh
@@ -45,7 +45,12 @@ _foamAddLib()
 {
     while [ $# -ge 1 ]
     do
-        export LD_LIBRARY_PATH=$1:$LD_LIBRARY_PATH
+        if [ "$(uname -s)" = "Darwin" ]
+        then
+            export DYLD_LIBRARY_PATH=$1:$DYLD_LIBRARY_PATH
+        else
+            export LD_LIBRARY_PATH=$1:$LD_LIBRARY_PATH
+        fi
         shift
     done
 }
@@ -60,6 +65,31 @@ _foamAddMan()
     done
 }
 
+# get formula version
+_brew_formula_version()
+{
+    if [ "$#" -lt 1 ]
+    then
+        echo "-1"
+    else
+        local brew_prefix="$(brew --prefix)"
+        local formula_link_path="$brew_prefix/opt/$1"
+        local formula_cellar_path="$(readlink "$formula_link_path")"
+        echo "$(basename "$formula_cellar_path")"
+    fi
+}
+
+_brew_formula_path()
+{
+    if [ "$#" -lt 1 ]
+    then
+        echo ""
+    else
+        local brew_prefix="$(brew --prefix)"
+        echo "$brew_prefix/opt/$1"
+    fi
+}
+
 #------------------------------------------------------------------------------
 # Set environment variables according to system type
 export WM_ARCH=`uname -s`
@@ -151,6 +181,12 @@ SunOS)
     export WM_LDFLAGS='-mabi=64 -G0'
     ;;
 
+Darwin)
+    WM_ARCH=darwin64
+    export WM_CC='clang'
+    export WM_CXX='clang++'
+    ;;
+
 *)    # an unsupported operating system
     /bin/cat <<USAGE 1>&2
 
@@ -177,7 +213,8 @@ export FOAM_APPBIN=$WM_PROJECT_DIR/platforms/$WM_OPTIONS/bin
 export FOAM_LIBBIN=$WM_PROJECT_DIR/platforms/$WM_OPTIONS/lib
 
 # external (ThirdParty) libraries
-export FOAM_EXT_LIBBIN=$WM_THIRD_PARTY_DIR/platforms/$WM_OPTIONS/lib
+[ "$(uname -s)" = "Darwin" ] \
+    || export FOAM_EXT_LIBBIN=$WM_THIRD_PARTY_DIR/platforms/$WM_OPTIONS/lib
 
 # site-specific directory
 siteDir="${WM_PROJECT_SITE:-$WM_PROJECT_INST_DIR/site}"
@@ -221,7 +258,11 @@ unset siteDir
 
 _foamAddPath $FOAM_USER_APPBIN:$FOAM_SITE_APPBIN:$FOAM_APPBIN
 # Make sure to pick up dummy versions of external libraries last
-_foamAddLib  $FOAM_USER_LIBBIN:$FOAM_SITE_LIBBIN:$FOAM_LIBBIN:$FOAM_EXT_LIBBIN:$FOAM_LIBBIN/dummy
+if [ "$(uname -s)" = "Darwin" ]; then
+    _foamAddLib $FOAM_USER_LIBBIN:$FOAM_SITE_LIBBIN:$FOAM_LIBBIN:$FOAM_LIBBIN/dummy
+else
+    _foamAddLib $FOAM_USER_LIBBIN:$FOAM_SITE_LIBBIN:$FOAM_LIBBIN:$FOAM_EXT_LIBBIN:$FOAM_LIBBIN/dummy
+fi
 
 # Compiler settings
 # ~~~~~~~~~~~~~~~~~
@@ -362,11 +403,22 @@ fi
 # boost and CGAL
 # ~~~~~~~~~~~~~~
 
-boost_version=boost_1_45_0
-cgal_version=CGAL-4.0
+if [ "$(uname -s)" = "Darwin" ]; then
+    boost_version="boost-$(_brew_formula_version boost)"
+    cgal_version="CGAL-$(_brew_formula_version cgal)"
 
-export BOOST_ARCH_PATH=$WM_THIRD_PARTY_DIR/platforms/$WM_ARCH$WM_COMPILER/$boost_version
-export CGAL_ARCH_PATH=$WM_THIRD_PARTY_DIR/platforms/$WM_ARCH$WM_COMPILER/$cgal_version
+    export BOOST_ARCH_PATH="$(_brew_formula_path boost)"
+    export CGAL_ARCH_PATH="$(_brew_formula_path cgal)"
+    export GMP_ARCH_PATH="$(_brew_formula_path gmp)"
+    export MPFR_ARCH_PATH="$(_brew_formula_path mpfr)"
+    export EIGEN_ARCH_PATH="$(_brew_formula_path eigen)"
+else
+    boost_version=boost_1_45_0
+    cgal_version=CGAL-4.0
+
+    export BOOST_ARCH_PATH=$WM_THIRD_PARTY_DIR/platforms/$WM_ARCH$WM_COMPILER/$boost_version
+    export CGAL_ARCH_PATH=$WM_THIRD_PARTY_DIR/platforms/$WM_ARCH$WM_COMPILER/$cgal_version
+fi
 
 # enabled if CGAL is available
 if [ "$FOAM_VERBOSE" -a "$PS1" ]
@@ -380,11 +432,11 @@ if [ -d "$CGAL_ARCH_PATH" ]
 then
     if [ -d "$BOOST_ARCH_PATH" ]
     then
-        _foamAddLib $BOOST_ARCH_PATH/lib
+        _foamAddLib "$BOOST_ARCH_PATH/lib"
     else
         unset BOOST_ARCH_PATH
     fi
-    _foamAddLib $CGAL_ARCH_PATH/lib
+    _foamAddLib "$CGAL_ARCH_PATH/lib"
 else
     unset BOOST_ARCH_PATH CGAL_ARCH_PATH MPFR_ARCH_PATH GMP_ARCH_PATH
 fi
@@ -572,7 +624,8 @@ esac
 # dummy MPI already added to LD_LIBRARY_PATH and has no external libraries
 if [ "$FOAM_MPI" != dummy ]
 then
-    _foamAddLib $FOAM_LIBBIN/$FOAM_MPI:$FOAM_EXT_LIBBIN/$FOAM_MPI
+    [ "$(uname -s)" = "Darwin" ] || _foamAddLib $FOAM_EXT_LIBBIN/$FOAM_MPI
+    _foamAddLib $FOAM_LIBBIN/$FOAM_MPI
 fi
 
 
@@ -587,9 +640,19 @@ then
 fi
 export MPI_BUFFER_SIZE
 
+_increase_maxfiles ()
+{
+    local maxfiles=4096
+    [ "$(ulimit -n)" -lt $maxfiles ] \
+        && ulimit -n $maxfiles > /dev/null 2>&1
+}
+
+# Increase max open files for lnInclude
+[ "$(uname -s)" = "Darwin" ] && _increase_maxfiles
 
 # cleanup environment:
 # ~~~~~~~~~~~~~~~~~~~~
 unset _foamAddPath _foamAddLib _foamAddMan foamCompiler minBufferSize
+unset _increase_maxfiles _brew_formula_version _brew_formula_version
 
 # ----------------------------------------------------------------- end-of-file
diff --git a/src/Allwmake b/src/Allwmake
index 55b8981c..a12f14f6 100755
--- a/src/Allwmake
+++ b/src/Allwmake
@@ -9,13 +9,15 @@ wmakeCheckPwd "$WM_PROJECT_DIR/src" || {
     exit 1
 }
 
-[ -n "$FOAM_EXT_LIBBIN" ] || {
-    echo "Error: FOAM_EXT_LIBBIN not set"
-    echo "    Check the OpenFOAM entries in your dot-files and source them."
-    exit 1
-}
-
-set -x
+if [ "$(uname -s)" != "Darwin" ]; then
+	[ -n "$FOAM_EXT_LIBBIN" ] || {
+		echo "Error: FOAM_EXT_LIBBIN not set"
+		echo "    Check the OpenFOAM entries in your dot-files and source them."
+		exit 1
+	}
+fi
+
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 # update OpenFOAM version strings if required
 wmakePrintBuild -check || /bin/rm -f OpenFOAM/Make/*/global.? 2>/dev/null
diff --git a/src/OSspecific/POSIX/POSIX.C b/src/OSspecific/POSIX/POSIX.C
index 92077811..4afd9b12 100644
--- a/src/OSspecific/POSIX/POSIX.C
+++ b/src/OSspecific/POSIX/POSIX.C
@@ -53,7 +53,11 @@ Description
 #include <sys/socket.h>
 #include <netdb.h>
 #include <dlfcn.h>
+#if defined(darwin64)
+#include <mach-o/dyld.h>
+#else
 #include <link.h>
+#endif
 
 #include <netinet/in.h>
 
@@ -1173,6 +1177,20 @@ void* Foam::dlOpen(const fileName& lib, const bool check)
             << " : dlopen of " << lib << std::endl;
     }
     void* handle = ::dlopen(lib.c_str(), RTLD_LAZY|RTLD_GLOBAL);
+#if defined(darwin64)
+    if (!handle && lib.ext() == "so")
+    {
+        fileName fallback_lib = lib.lessExt() + ".dylib";
+        if (check)
+        {
+            WarningIn("dlOpen(const fileName&, const bool)")
+                << "dlopen: using fallback library name "
+                << fallback_lib
+                << endl;
+        }
+        handle = ::dlopen(fallback_lib.c_str(), RTLD_LAZY|RTLD_GLOBAL);
+    }
+#endif
 
     if (!handle && check)
     {
@@ -1260,6 +1278,24 @@ bool Foam::dlSymFound(void* handle, const std::string& symbol)
 }
 
 
+#if defined(darwin64)
+Foam::fileNameList Foam::dlLoaded()
+{
+    DynamicList<fileName> libs;
+    for(uint32_t cnt = 0; cnt < _dyld_image_count(); ++cnt)
+    {
+        libs.append(_dyld_get_image_name(cnt));
+    }
+
+    if (POSIX::debug)
+    {
+        std::cout
+            << "dlLoaded()"
+            << " : determined loaded libraries :" << libs.size() << std::endl;
+    }
+    return libs;
+}
+#else
 static int collectLibsCallback
 (
     struct dl_phdr_info *info,
@@ -1286,6 +1322,7 @@ Foam::fileNameList Foam::dlLoaded()
     }
     return libs;
 }
+#endif
 
 
 void Foam::osRandomSeed(const label seed)
diff --git a/src/OSspecific/POSIX/clockTime/clockTime.H b/src/OSspecific/POSIX/clockTime/clockTime.H
index 8708ba94..65f046c1 100644
--- a/src/OSspecific/POSIX/clockTime/clockTime.H
+++ b/src/OSspecific/POSIX/clockTime/clockTime.H
@@ -37,6 +37,9 @@ SourceFiles
 #define clockTime_H
 
 #include <sys/types.h>
+#if defined(darwin64)
+#include <sys/time.h>
+#endif
 
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
diff --git a/src/OSspecific/POSIX/fileStat.C b/src/OSspecific/POSIX/fileStat.C
index bf04835f..8a3c7967 100644
--- a/src/OSspecific/POSIX/fileStat.C
+++ b/src/OSspecific/POSIX/fileStat.C
@@ -29,7 +29,9 @@ License
 
 #include <signal.h>
 #include <unistd.h>
+#if ! defined(darwin64)
 #include <sys/sysmacros.h>
+#endif
 
 // * * * * * * * * * * * * * * * * Constructors  * * * * * * * * * * * * * * //
 
diff --git a/src/OSspecific/POSIX/printStack.C b/src/OSspecific/POSIX/printStack.C
index 4a3859dc..506e72cd 100644
--- a/src/OSspecific/POSIX/printStack.C
+++ b/src/OSspecific/POSIX/printStack.C
@@ -2,7 +2,7 @@
   =========                 |
   \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
    \\    /   O peration     |
-    \\  /    A nd           | Copyright (C) 2011-2012 OpenFOAM Foundation
+    \\  /    A nd           | Copyright (C) 2011-2015 OpenFOAM Foundation
      \\/     M anipulation  |
 -------------------------------------------------------------------------------
 License
@@ -23,16 +23,22 @@ License
 
 \*---------------------------------------------------------------------------*/
 
+#if defined(darwin64)
+#include "ulong.H"
+#endif
 #include "error.H"
-#include "IStringStream.H"
 #include "OStringStream.H"
 #include "OSspecific.H"
 #include "IFstream.H"
-#include "readHexLabel.H"
 
+#include <inttypes.h>
 #include <cxxabi.h>
 #include <execinfo.h>
 #include <dlfcn.h>
+#if defined(darwin64)
+// To parse lldb output
+#include <regex.h>
+#endif
 
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
@@ -43,90 +49,140 @@ namespace Foam
 
 string pOpen(const string &cmd, label line=0)
 {
-    const int MAX = 1000;
+    string res = "\n";
 
     FILE *cmdPipe = popen(cmd.c_str(), "r");
 
     if (cmdPipe)
     {
+        char *buf = NULL;
+
         // Read line number of lines
         for (label cnt = 0; cnt <= line; cnt++)
         {
-            char buffer[MAX];
-            char* s = fgets(buffer, MAX-1, cmdPipe);
+            size_t linecap = 0;
+            ssize_t linelen;
+            linelen = getline(&buf, &linecap, cmdPipe);
 
-            if (s == NULL)
+            if (linelen < 0)
             {
-                return "";
+                break;
             }
 
             if (cnt == line)
             {
-                string str(buffer);
-                return str.substr(0, str.size()-1);
+                res = string(buf);
+                break;
             }
         }
+
+        if (buf != NULL)
+        {
+            free(buf);
+        }
+
         pclose(cmdPipe);
     }
 
-    return "";
+    return res.substr(0, res.size() - 1);
 }
 
 
-// use popen to call addr2line (using bfd.h directly would have
-// meant relinking everything)
+inline word addressToWord(const uintptr_t addr)
+{
+    OStringStream nStream;
+    nStream << "0x" << hex << addr;
+    return nStream.str();
+}
+
 
 void printSourceFileAndLine
 (
     Ostream& os,
-    const HashTable<label, fileName>& addressMap,
     const fileName& filename,
-    const word& address
+    Dl_info *info,
+    void *addr
 )
 {
-    word myAddress = address;
+    uintptr_t address = uintptr_t(addr);
+    word myAddress = addressToWord(address);
 
+#if ! defined(darwin64)
     if (filename.ext() == "so")
     {
-        // Convert offset into .so into offset into executable.
-
-        void *addr;
-        sscanf(myAddress.c_str(), "%p",&addr);
-
-        Dl_info info;
-
-        dladdr(addr, &info);
-
-        unsigned long offset = ulong(info.dli_fbase);
-
-        IStringStream addressStr(address.substr(2));
-        label addressValue = readHexLabel(addressStr);
-        label relativeAddress = addressValue-offset;
-
-        // Reconstruct hex word from address
-        OStringStream nStream;
-        nStream << "0x" << hex << relativeAddress;
-        myAddress = nStream.str();
+        // Convert address into offset into dynamic library
+        uintptr_t offset = uintptr_t(info->dli_fbase);
+        intptr_t relativeAddress = address - offset;
+        myAddress = addressToWord(relativeAddress);
     }
+#endif
 
     if (filename[0] == '/')
     {
         string line = pOpen
         (
+#if ! defined(darwin64)
             "addr2line -f --demangle=auto --exe "
           + filename
           + " "
           + myAddress,
             1
+#else
+            "echo 'image lookup -a "
+          + myAddress
+          + " "
+          + filename
+          + "'"
+          + " | xcrun lldb "
+          + "-O 'target create --no-dependents -a x86_64 "
+          + filename
+          + "' -o '"
+          + "target modules load -f "
+          + filename
+          + " __TEXT "
+          + addressToWord(reinterpret_cast<const uintptr_t>(info->dli_fbase))
+          + "' 2> /dev/null"
+          + " | tail -1"
+#endif
         );
 
+#if defined(darwin64)
+        {
+            const char *buf = line.c_str();
+            regex_t re;
+            regmatch_t mt[3];
+            int st;
+
+            regcomp(&re, ".\\+at \\(.\\+\\):\\(\\d\\+\\)", REG_ENHANCED);
+            st = regexec(&re, buf, 3, mt, 0);
+
+            if (st == REG_NOMATCH)
+            {
+                line = "??:0";
+            }
+            else
+            {
+                size_t len = mt[1].rm_eo - mt[1].rm_so;
+                string fname(buf + mt[1].rm_so, len);
+                len = mt[2].rm_eo - mt[2].rm_so;
+                string lnum(buf + mt[2].rm_so, len);
+                line = fname + ":" + lnum;
+            }
+            regfree(&re);
+        }
+#endif
+
         if (line == "")
         {
             os  << " addr2line failed";
         }
         else if (line == "??:0")
         {
-            os  << " in " << filename;
+            line = filename;
+            string cwdLine(line.replaceAll(cwd() + '/', ""));
+            string homeLine(cwdLine.replaceAll(home(), '~'));
+
+            os  << " in " << homeLine;
         }
         else
         {
@@ -139,83 +195,59 @@ void printSourceFileAndLine
 }
 
 
-void getSymbolForRaw
-(
-    Ostream& os,
-    const string& raw,
-    const fileName& filename,
-    const word& address
-)
+fileName absolutePath(const char* fn)
 {
-    if (filename.size() && filename[0] == '/')
+    fileName fname(fn);
+
+    if (fname[0] != '/' && fname[0] != '~')
     {
-        string fcnt = pOpen
-        (
-            "addr2line -f --demangle=auto --exe "
-          + filename
-          + " "
-          + address
-        );
+        string tmp = pOpen("which " + fname);
 
-        if (fcnt != "")
+        if (tmp[0] == '/' || tmp[0] == '~')
         {
-            os  << fcnt.c_str();
-            return;
+            fname = tmp;
         }
     }
-    os  << "Uninterpreted: " << raw.c_str();
+
+    return fname;
 }
 
 
-void error::safePrintStack(std::ostream& os)
+string demangleSymbol(const char* sn)
 {
-    // Get raw stack symbols
-    void *array[100];
-    size_t size = backtrace(array, 100);
-    char **strings = backtrace_symbols(array, size);
-
-    // See if they contain function between () e.g. "(__libc_start_main+0xd0)"
-    // and see if cplus_demangle can make sense of part before +
-    for (size_t i = 0; i < size; i++)
+    string res;
+    int st;
+    char* cxx_sname = abi::__cxa_demangle
+    (
+        sn,
+        NULL,
+        0,
+        &st
+    );
+
+    if (st == 0 && cxx_sname)
     {
-        string msg(strings[i]);
-        fileName programFile;
-        word address;
-
-        os  << '#' << label(i) << '\t' << msg << std::endl;
+        res = string(cxx_sname);
+        free(cxx_sname);
+    }
+    else
+    {
+        res = string(sn);
     }
-}
 
+    return res;
+}
 
-void error::printStack(Ostream& os)
-{
-    // Reads the starting addresses for the dynamically linked libraries
-    // from the /proc/pid/maps-file
-    // I'm afraid this works only for Linux 2.6-Kernels (may work on 2.4)
-    // Note2: the filenames in here will have softlinks resolved so will
-    // go wrong when having e.g. OpenFOAM installed under a softlink.
 
-    HashTable<label, fileName> addressMap;
-    {
-        IFstream is("/proc/" + name(pid()) + "/maps");
+// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
-        while (is.good())
-        {
-            string line;
-            is.getLine(line);
+} // End namespace Foam
 
-            string::size_type space = line.rfind(' ') + 1;
-            fileName libPath = line.substr(space, line.size()-space);
+// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
-            if (libPath.size() && libPath[0] == '/')
-            {
-                string offsetString(line.substr(0, line.find('-')));
-                IStringStream offsetStr(offsetString);
-                addressMap.insert(libPath, readHexLabel(offsetStr));
-            }
-        }
-    }
 
+void Foam::error::safePrintStack(std::ostream& os)
+{
     // Get raw stack symbols
     void *array[100];
     size_t size = backtrace(array, 100);
@@ -229,101 +261,51 @@ void error::printStack(Ostream& os)
         fileName programFile;
         word address;
 
-        os  << '#' << label(i) << "  ";
-        //os  << "Raw   : " << msg << "\n\t";
-        {
-            string::size_type lPos = msg.find('[');
-            string::size_type rPos = msg.find(']');
+        os  << '#' << label(i) << '\t' << msg << std::endl;
+    }
+}
 
-            if (lPos != string::npos && rPos != string::npos && lPos < rPos)
-            {
-                address = msg.substr(lPos+1, rPos-lPos-1);
-                msg = msg.substr(0, lPos);
-            }
 
-            string::size_type bracketPos = msg.find('(');
-            string::size_type spacePos = msg.find(' ');
-            if (bracketPos != string::npos || spacePos != string::npos)
-            {
-                programFile = msg.substr(0, min(spacePos, bracketPos));
-
-                // not an absolute path
-                if (programFile[0] != '/')
-                {
-                    string tmp = pOpen("which " + programFile);
-                    if (tmp[0] == '/' || tmp[0] == '~')
-                    {
-                        programFile = tmp;
-                    }
-                }
-            }
-        }
+void Foam::error::printStack(Ostream& os)
+{
+    // Get raw stack symbols
+    const size_t CALLSTACK_SIZE = 128;
 
-        string::size_type bracketPos = msg.find('(');
+    void *callstack[CALLSTACK_SIZE];
+    size_t size = backtrace(callstack, CALLSTACK_SIZE);
 
-        if (bracketPos != string::npos)
-        {
-            string::size_type start = bracketPos+1;
+    Dl_info *info = new Dl_info;
 
-            string::size_type plusPos = msg.find('+', start);
+    fileName fname = "???";
+    word address;
 
-            if (plusPos != string::npos)
-            {
-                string cName(msg.substr(start, plusPos-start));
-
-                int status;
-                char* cplusNamePtr = abi::__cxa_demangle
-                (
-                    cName.c_str(),
-                    NULL,                   // have it malloc itself
-                    0,
-                    &status
-                );
-
-                if (status == 0 && cplusNamePtr)
-                {
-                    os  << cplusNamePtr;
-                    free(cplusNamePtr);
-                }
-                else
-                {
-                    os  << cName.c_str();
-                }
-            }
-            else
-            {
-                string::size_type endBracketPos = msg.find(')', start);
-
-                if (endBracketPos != string::npos)
-                {
-                    string fullName(msg.substr(start, endBracketPos-start));
-
-                    os  << fullName.c_str() << nl;
-                }
-                else
-                {
-                    // Print raw message
-                    getSymbolForRaw(os, msg, programFile, address);
-                }
-            }
+    for(size_t i=0; i<size; i++)
+    {
+        int st = dladdr(callstack[i], info);
+
+        os << '#' << label(i) << "  ";
+        if (st != 0 && info->dli_fname != NULL && info->dli_fname[0] != '\0')
+        {
+            fname = absolutePath(info->dli_fname);
+
+            os <<
+            (
+                (info->dli_sname != NULL)
+              ? demangleSymbol(info->dli_sname)
+              : "?"
+            );
         }
         else
         {
-            // Print raw message
-            getSymbolForRaw(os, msg, programFile, address);
+            os << "?";
         }
 
-        printSourceFileAndLine(os, addressMap, programFile, address);
-
-        os  << nl;
+        printSourceFileAndLine(os, fname, info, callstack[i]);
+        os << nl;
     }
 
-    free(strings);
+    delete info;
 }
 
 
-// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
-
-} // End namespace Foam
-
 // ************************************************************************* //
diff --git a/src/OSspecific/POSIX/signals/sigFpe.C b/src/OSspecific/POSIX/signals/sigFpe.C
index 501ff95c..8f503d60 100644
--- a/src/OSspecific/POSIX/signals/sigFpe.C
+++ b/src/OSspecific/POSIX/signals/sigFpe.C
@@ -44,12 +44,43 @@ License
 
 #endif
 
+#if defined(__APPLE__)
+#include <xmmintrin.h>
+#include <malloc/malloc.h>
+#include <sys/mman.h>
+#include <unistd.h>
+#endif
+
 #include <stdint.h>
+#include <limits>
 
 // * * * * * * * * * * * * * * Static Data Members * * * * * * * * * * * * * //
 
 struct sigaction Foam::sigFpe::oldAction_;
 
+#if defined(__APPLE__)
+void *(*Foam::sigFpe::oldMallocHook_)
+(
+    struct _malloc_zone_t *zone,
+    size_t size
+) = NULL;
+
+void *Foam::sigFpe::nanMallocHook_
+(
+    struct _malloc_zone_t *zone,
+    size_t size
+)
+{
+    void *result;
+
+    result = oldMallocHook_(zone, size);
+
+    UList<scalar> lst(reinterpret_cast<scalar*>(result), size/sizeof(scalar));
+    lst = std::numeric_limits<scalar>::signaling_NaN();
+
+    return result;
+}
+#endif
 
 #ifdef LINUX
 
@@ -94,7 +125,7 @@ void* Foam::sigFpe::nanMallocHook_(size_t size, const void *caller)
 #endif
 
 
-#ifdef LINUX_GNUC
+#if defined(LINUX_GNUC) || defined(__APPLE__)
 
 void Foam::sigFpe::sigHandler(int)
 {
@@ -134,10 +165,14 @@ Foam::sigFpe::~sigFpe()
 {
     if (env("FOAM_SIGFPE"))
     {
-#       ifdef LINUX_GNUC
+#       if defined(LINUX_GNUC) || defined(__APPLE__)
 
         // Reset signal
+#       if defined(__APPLE__)
+        if (oldAction_.sa_handler && sigaction(SIGFPE, NULL, NULL) < 0)
+#       else
         if (oldAction_.sa_handler && sigaction(SIGFPE, &oldAction_, NULL) < 0)
+#       endif
         {
             FatalErrorIn
             (
@@ -160,6 +195,20 @@ Foam::sigFpe::~sigFpe()
         }
 
 #       endif
+
+#       if defined(__APPLE__)
+        // Restoring old malloc handler
+        if (oldMallocHook_ != NULL) {
+            malloc_zone_t *zone = malloc_default_zone();
+
+            if (zone != NULL)
+            {
+                mprotect(zone, getpagesize(), PROT_READ | PROT_WRITE);
+                zone->malloc = oldMallocHook_;
+                mprotect(zone, getpagesize(), PROT_READ);
+            }
+        }
+#       endif
     }
 }
 
@@ -181,21 +230,31 @@ void Foam::sigFpe::set(const bool verbose)
     {
         bool supported = false;
 
-#       ifdef LINUX_GNUC
+#       if defined(LINUX_GNUC) || defined(__APPLE__)
         supported = true;
 
+#       if defined(LINUX_GNUC)
         feenableexcept
         (
             FE_DIVBYZERO
           | FE_INVALID
           | FE_OVERFLOW
         );
+#       endif
+#       if defined(__APPLE__)
+        _mm_setcsr(_MM_MASK_MASK &~
+                   (_MM_MASK_OVERFLOW|_MM_MASK_INVALID|_MM_MASK_DIV_ZERO));
+#       endif
 
         struct sigaction newAction;
         newAction.sa_handler = sigHandler;
         newAction.sa_flags = SA_NODEFER;
         sigemptyset(&newAction.sa_mask);
+#       if defined(__APPLE__)
+        if (sigaction(SIGFPE, &newAction, NULL) < 0)
+#       else
         if (sigaction(SIGFPE, &newAction, &oldAction_) < 0)
+#       endif
         {
             FatalErrorIn
             (
@@ -258,6 +317,28 @@ void Foam::sigFpe::set(const bool verbose)
 
 #       endif
 
+#       if defined(__APPLE__)
+        malloc_zone_t *zone = malloc_default_zone();
+
+        if (zone != NULL)
+        {
+            oldMallocHook_ = zone->malloc;
+            if
+            (
+                mprotect(zone, getpagesize(), PROT_READ | PROT_WRITE) == 0
+            )
+            {
+                zone->malloc = nanMallocHook_;
+                if
+                (
+                    mprotect(zone, getpagesize(), PROT_READ) == 0
+                )
+                {
+                    supported = true;
+                }
+            }
+        }
+#       endif
 
         if (verbose)
         {
diff --git a/src/OSspecific/POSIX/signals/sigFpe.H b/src/OSspecific/POSIX/signals/sigFpe.H
index b7fdec8d..c36885b6 100644
--- a/src/OSspecific/POSIX/signals/sigFpe.H
+++ b/src/OSspecific/POSIX/signals/sigFpe.H
@@ -53,6 +53,10 @@ SourceFiles
 #    define LINUX_GNUC
 #endif
 
+#if defined(__APPLE__)
+#include <malloc/malloc.h>
+#endif
+
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
 namespace Foam
@@ -79,10 +83,24 @@ class sigFpe
 
 #       endif
 
+#       if defined(__APPLE__)
+            static void *(*oldMallocHook_)
+            (
+                struct _malloc_zone_t *zone,
+                size_t size
+            );
+
+            static void *nanMallocHook_
+            (
+                struct _malloc_zone_t *zone,
+                size_t size
+            );
+#       endif
+
 
     // Static data members
 
-#   ifdef LINUX_GNUC
+#   if defined(LINUX_GNUC) || defined(__APPLE__)
 
         //- Handler for caught signals
         static void sigHandler(int);
diff --git a/src/OpenFOAM/containers/Lists/CompactListList/CompactListListI.H b/src/OpenFOAM/containers/Lists/CompactListList/CompactListListI.H
index 91987aca..9691c490 100644
--- a/src/OpenFOAM/containers/Lists/CompactListList/CompactListListI.H
+++ b/src/OpenFOAM/containers/Lists/CompactListList/CompactListListI.H
@@ -79,7 +79,7 @@ template<class T, class Container>
 inline const Foam::CompactListList<T, Container>&
 Foam::CompactListList<T, Container>::null()
 {
-    return *reinterpret_cast< CompactListList<T, Container>* >(0);
+    return NullObjectRef<CompactListList<T, Container> >();
 }
 
 
diff --git a/src/OpenFOAM/containers/Lists/FixedList/FixedListI.H b/src/OpenFOAM/containers/Lists/FixedList/FixedListI.H
index 65383193..af877eba 100644
--- a/src/OpenFOAM/containers/Lists/FixedList/FixedListI.H
+++ b/src/OpenFOAM/containers/Lists/FixedList/FixedListI.H
@@ -107,7 +107,7 @@ Foam::FixedList<T, Size>::clone() const
 template<class T, unsigned Size>
 inline const Foam::FixedList<T, Size>& Foam::FixedList<T, Size>::null()
 {
-    return *reinterpret_cast< FixedList<T, Size>* >(0);
+    return NullObjectRef<FixedList<T, Size> >();
 }
 
 
diff --git a/src/OpenFOAM/containers/Lists/List/ListI.H b/src/OpenFOAM/containers/Lists/List/ListI.H
index 26c65bd3..2c759b4d 100644
--- a/src/OpenFOAM/containers/Lists/List/ListI.H
+++ b/src/OpenFOAM/containers/Lists/List/ListI.H
@@ -42,7 +42,7 @@ inline Foam::autoPtr<Foam::List<T> > Foam::List<T>::clone() const
 template<class T>
 inline const Foam::List<T>& Foam::List<T>::null()
 {
-    return *reinterpret_cast< List<T>* >(0);
+    return NullObjectRef<List<T> >();
 }
 
 
diff --git a/src/OpenFOAM/containers/Lists/SubList/SubListI.H b/src/OpenFOAM/containers/Lists/SubList/SubListI.H
index 36fc5a4a..09b40d86 100644
--- a/src/OpenFOAM/containers/Lists/SubList/SubListI.H
+++ b/src/OpenFOAM/containers/Lists/SubList/SubListI.H
@@ -74,7 +74,7 @@ inline Foam::SubList<T>::SubList
 template<class T>
 inline const Foam::SubList<T>& Foam::SubList<T>::null()
 {
-    return *reinterpret_cast< SubList<T>* >(0);
+    return NullObjectRef<SubList<T> >();
 }
 
 
diff --git a/src/OpenFOAM/containers/Lists/UList/UList.H b/src/OpenFOAM/containers/Lists/UList/UList.H
index 06ef4cbb..1e782e01 100644
--- a/src/OpenFOAM/containers/Lists/UList/UList.H
+++ b/src/OpenFOAM/containers/Lists/UList/UList.H
@@ -42,6 +42,7 @@ SourceFiles
 #ifndef UList_H
 #define UList_H
 
+#include "nullObject.H"
 #include "bool.H"
 #include "label.H"
 #include "uLabel.H"
diff --git a/src/OpenFOAM/containers/Lists/UList/UListI.H b/src/OpenFOAM/containers/Lists/UList/UListI.H
index 3994b3de..a1c92bcd 100644
--- a/src/OpenFOAM/containers/Lists/UList/UListI.H
+++ b/src/OpenFOAM/containers/Lists/UList/UListI.H
@@ -50,7 +50,7 @@ inline Foam::UList<T>::UList(T* __restrict__ v, label size)
 template<class T>
 inline const Foam::UList<T>& Foam::UList<T>::null()
 {
-    return *reinterpret_cast< UList<T>* >(0);
+    return NullObjectRef<UList<T> >();
 }
 
 
diff --git a/src/OpenFOAM/db/IOobject/IOobject.H b/src/OpenFOAM/db/IOobject/IOobject.H
index 7b9d73ee..4a13ed9f 100644
--- a/src/OpenFOAM/db/IOobject/IOobject.H
+++ b/src/OpenFOAM/db/IOobject/IOobject.H
@@ -375,7 +375,7 @@ public:
 
             //- Write the standard end file divider
             template<class Stream>
-            static inline Stream& writeEndDivider(Stream& os);
+            static inline Stream& writeEndDivider(Stream& os, bool noHint=false);
 
             //- Write header
             bool writeHeader(Ostream&) const;
diff --git a/src/OpenFOAM/db/IOobject/IOobjectI.H b/src/OpenFOAM/db/IOobject/IOobjectI.H
index ea0d6550..bfe402fe 100644
--- a/src/OpenFOAM/db/IOobject/IOobjectI.H
+++ b/src/OpenFOAM/db/IOobject/IOobjectI.H
@@ -91,14 +91,22 @@ inline Stream& Foam::IOobject::writeDivider(Stream& os)
 }
 
 template<class Stream>
-inline Stream& Foam::IOobject::writeEndDivider(Stream& os)
+inline Stream& Foam::IOobject::writeEndDivider(Stream& os, bool noHint)
 {
-    os  << "\n\n"
-        "// *****************************************"
-        "******************************** //\n";
+    if (noHint)
+    {
+        os  << "\n\n"
+            "// *****************************************"
+            "******************************** //\n";
+    }
+    else
+    {
+        os  << "\n\n"
+            "// **************************** vi: set ft=foam: "
+            "*************************** //\n";
+    }
 
     return os;
 }
 
-
 // ************************************************************************* //
diff --git a/src/OpenFOAM/db/IOstreams/Pstreams/gatherScatter.C b/src/OpenFOAM/db/IOstreams/Pstreams/gatherScatter.C
index 33c7581f..5fd597ef 100644
--- a/src/OpenFOAM/db/IOstreams/Pstreams/gatherScatter.C
+++ b/src/OpenFOAM/db/IOstreams/Pstreams/gatherScatter.C
@@ -29,6 +29,9 @@ Description
 
 \*---------------------------------------------------------------------------*/
 
+#if defined(darwin64)
+#include "longLong.H"
+#endif
 #include "UOPstream.H"
 #include "OPstream.H"
 #include "UIPstream.H"
diff --git a/src/OpenFOAM/db/dictionary/functionEntries/codeStream/codeStream.C b/src/OpenFOAM/db/dictionary/functionEntries/codeStream/codeStream.C
index 1c774c35..bdc7b8b9 100644
--- a/src/OpenFOAM/db/dictionary/functionEntries/codeStream/codeStream.C
+++ b/src/OpenFOAM/db/dictionary/functionEntries/codeStream/codeStream.C
@@ -24,6 +24,9 @@ License
 \*---------------------------------------------------------------------------*/
 
 #include "codeStream.H"
+#if defined(darwin64)
+#include "longLong.H"
+#endif
 #include "addToMemberFunctionSelectionTable.H"
 #include "IStringStream.H"
 #include "OStringStream.H"
diff --git a/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.C b/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.C
index 2f975771..026519c2 100644
--- a/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.C
+++ b/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.C
@@ -334,7 +334,11 @@ Foam::fileName Foam::dynamicCode::codeRelPath() const
 
 Foam::fileName Foam::dynamicCode::libRelPath() const
 {
+#if defined(darwin64)
+    return codeRelPath()/libSubDir_/"lib" + codeName_ + ".dylib";
+#else
     return codeRelPath()/libSubDir_/"lib" + codeName_ + ".so";
+#endif
 }
 
 
diff --git a/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.H b/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.H
index 852ba6d9..cecf678c 100644
--- a/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.H
+++ b/src/OpenFOAM/db/dynamicLibrary/dynamicCode/dynamicCode.H
@@ -221,7 +221,11 @@ public:
         //  Corresponds to codeRoot()/libSubDir()/lib\<codeName\>.so
         fileName libPath() const
         {
+#if defined(darwin64)
+            return codeRoot_/libSubDir_/"lib" + codeName_ + ".dylib";
+#else
             return codeRoot_/libSubDir_/"lib" + codeName_ + ".so";
+#endif
         }
 
         //- Path for specified code name relative to \$FOAM_CASE
diff --git a/src/OpenFOAM/db/objectRegistry/objectRegistryTemplates.C b/src/OpenFOAM/db/objectRegistry/objectRegistryTemplates.C
index 483e1c24..3d495af6 100644
--- a/src/OpenFOAM/db/objectRegistry/objectRegistryTemplates.C
+++ b/src/OpenFOAM/db/objectRegistry/objectRegistryTemplates.C
@@ -170,7 +170,7 @@ const Type& Foam::objectRegistry::lookupObject(const word& name) const
             << abort(FatalError);
     }
 
-    return *reinterpret_cast< const Type* >(0);
+    return NullObjectRef<Type>();
 }
 
 
diff --git a/src/OpenFOAM/fields/DimensionedFields/DimensionedField/DimensionedFieldI.H b/src/OpenFOAM/fields/DimensionedFields/DimensionedField/DimensionedFieldI.H
index 05a8a311..6d3c9a1c 100644
--- a/src/OpenFOAM/fields/DimensionedFields/DimensionedField/DimensionedFieldI.H
+++ b/src/OpenFOAM/fields/DimensionedFields/DimensionedField/DimensionedFieldI.H
@@ -34,7 +34,7 @@ template<class Type, class GeoMesh>
 inline const DimensionedField<Type, GeoMesh>&
 DimensionedField<Type, GeoMesh>::null()
 {
-    return *reinterpret_cast< DimensionedField<Type, GeoMesh>* >(0);
+    return NullObjectRef<DimensionedField<Type, GeoMesh> >();
 }
 
 
diff --git a/src/OpenFOAM/fields/DimensionedFields/DimensionedField/SubDimensionedFieldI.H b/src/OpenFOAM/fields/DimensionedFields/DimensionedField/SubDimensionedFieldI.H
index 7cfdc972..9f75b5fb 100644
--- a/src/OpenFOAM/fields/DimensionedFields/DimensionedField/SubDimensionedFieldI.H
+++ b/src/OpenFOAM/fields/DimensionedFields/DimensionedField/SubDimensionedFieldI.H
@@ -80,7 +80,7 @@ template<class Type, class GeoMesh>
 inline const SubDimensionedField<Type, GeoMesh>&
 SubDimensionedField<Type, GeoMesh>::null()
 {
-    return *reinterpret_cast< SubDimensionedField<Type, GeoMesh>* >(0);
+    return NullObjectRef<SubDimensionedField<Type, GeoMesh> >();
 }
 
 
diff --git a/src/OpenFOAM/fields/Fields/Field/Field.C b/src/OpenFOAM/fields/Fields/Field/Field.C
index 334eba8e..3e7d1dd6 100644
--- a/src/OpenFOAM/fields/Fields/Field/Field.C
+++ b/src/OpenFOAM/fields/Fields/Field/Field.C
@@ -402,7 +402,7 @@ void Foam::Field<Type>::map
     if
     (
         mapper.direct()
-     && &mapper.directAddressing()
+     && notNull(mapper.directAddressing())
      && mapper.directAddressing().size()
     )
     {
@@ -437,7 +437,7 @@ void Foam::Field<Type>::autoMap
     (
         (
             mapper.direct()
-         && &mapper.directAddressing()
+         && notNull(mapper.directAddressing())
          && mapper.directAddressing().size()
         )
      || (!mapper.direct() && mapper.addressing().size())
diff --git a/src/OpenFOAM/fields/Fields/Field/Field.H b/src/OpenFOAM/fields/Fields/Field/Field.H
index 9b4088a4..f56170ea 100644
--- a/src/OpenFOAM/fields/Fields/Field/Field.H
+++ b/src/OpenFOAM/fields/Fields/Field/Field.H
@@ -100,7 +100,7 @@ public:
         //- Return a null field
         inline static const Field<Type>& null()
         {
-            return *reinterpret_cast< Field<Type>* >(0);
+            return NullObjectRef<Field<Type> >();
         }
 
 
diff --git a/src/OpenFOAM/fields/Fields/Field/SubFieldI.H b/src/OpenFOAM/fields/Fields/Field/SubFieldI.H
index d6c28d07..e2326cc2 100644
--- a/src/OpenFOAM/fields/Fields/Field/SubFieldI.H
+++ b/src/OpenFOAM/fields/Fields/Field/SubFieldI.H
@@ -84,7 +84,7 @@ inline Foam::SubField<Type>::SubField
 template<class Type>
 inline const Foam::SubField<Type>& Foam::SubField<Type>::null()
 {
-    return *reinterpret_cast< SubField<Type>* >(0);
+    return NullObjectRef<SubField<Type> >();
 }
 
 
diff --git a/src/OpenFOAM/fields/GeometricFields/GeometricField/GeometricFieldI.H b/src/OpenFOAM/fields/GeometricFields/GeometricField/GeometricFieldI.H
index 49fd3c85..12ce96ab 100644
--- a/src/OpenFOAM/fields/GeometricFields/GeometricField/GeometricFieldI.H
+++ b/src/OpenFOAM/fields/GeometricFields/GeometricField/GeometricFieldI.H
@@ -29,7 +29,7 @@ template<class Type, template<class> class PatchField, class GeoMesh>
 inline const Foam::GeometricField<Type, PatchField, GeoMesh>&
 Foam::GeometricField<Type, PatchField, GeoMesh>::null()
 {
-    return *reinterpret_cast< GeometricField<Type, PatchField, GeoMesh>* >(0);
+    return NullObjectRef<GeometricField<Type, PatchField, GeoMesh> >();
 }
 
 
diff --git a/src/OpenFOAM/global/foamDoc.H b/src/OpenFOAM/global/foamDoc.H
index 1dbd19ff..f3b4b280 100644
--- a/src/OpenFOAM/global/foamDoc.H
+++ b/src/OpenFOAM/global/foamDoc.H
@@ -46,7 +46,7 @@ License
     - applications:
         collections of library functionality wrapped up into applications,
         such as solvers and utilities
-        
+
     - tutorials:
         a suite of test cases that highlight a broad cross-section of
         OpenFOAM's capabilities
diff --git a/src/OpenFOAM/global/global.Cver b/src/OpenFOAM/global/global.Cver
index ea711ef8..b898715f 100644
--- a/src/OpenFOAM/global/global.Cver
+++ b/src/OpenFOAM/global/global.Cver
@@ -42,6 +42,8 @@ const char* const Foam::FOAMbuild = "BUILD_STRING";
 
 #include "new.C"
 
+#include "nullObject.C"
+
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 // Global IO streams
 
diff --git a/src/OpenFOAM/matrices/Matrix/MatrixI.H b/src/OpenFOAM/matrices/Matrix/MatrixI.H
index a3604b27..49aa369f 100644
--- a/src/OpenFOAM/matrices/Matrix/MatrixI.H
+++ b/src/OpenFOAM/matrices/Matrix/MatrixI.H
@@ -47,7 +47,7 @@ clone() const
 template<class Form, class Type>
 inline const Foam::Matrix<Form, Type>& Foam::Matrix<Form, Type>::null()
 {
-    return *reinterpret_cast< Matrix<Form, Type>* >(0);
+    return NullObjectRef<Matrix<Form, Type> >();
 }
 
 
diff --git a/src/OpenFOAM/memory/Xfer/XferI.H b/src/OpenFOAM/memory/Xfer/XferI.H
index 3cb50772..490ee69f 100644
--- a/src/OpenFOAM/memory/Xfer/XferI.H
+++ b/src/OpenFOAM/memory/Xfer/XferI.H
@@ -23,12 +23,14 @@ License
 
 \*---------------------------------------------------------------------------*/
 
+#include "nullObject.H"
+
 // * * * * * * * * * * * * Static Member Functions * * * * * * * * * * * * * //
 
 template<class T>
 inline const Foam::Xfer<T>& Foam::Xfer<T>::null()
 {
-    return *reinterpret_cast< Xfer<T>* >(0);
+    return NullObjectRef<Xfer<T> >();
 }
 
 
diff --git a/src/OpenFOAM/meshes/meshShapes/cellShape/cellShapeIO.C b/src/OpenFOAM/meshes/meshShapes/cellShape/cellShapeIO.C
index 27332911..25528fcf 100644
--- a/src/OpenFOAM/meshes/meshShapes/cellShape/cellShapeIO.C
+++ b/src/OpenFOAM/meshes/meshShapes/cellShape/cellShapeIO.C
@@ -128,7 +128,7 @@ Ostream& operator<<(Ostream& os, const InfoProxy<cellShape>& ip)
 {
     const cellShape& cs = ip.t_;
 
-    if (!(&cs.model()))
+    if (isNull(cs.model()))
     {
         os  << "    cellShape has no model!\n";
     }
diff --git a/src/OpenFOAM/meshes/polyMesh/polyMesh.C b/src/OpenFOAM/meshes/polyMesh/polyMesh.C
index 9b0d11ac..aad77293 100644
--- a/src/OpenFOAM/meshes/polyMesh/polyMesh.C
+++ b/src/OpenFOAM/meshes/polyMesh/polyMesh.C
@@ -675,23 +675,23 @@ void Foam::polyMesh::resetPrimitives
 
     // Take over new primitive data.
     // Optimized to avoid overwriting data at all
-    if (&points)
+    if (notNull(points))
     {
         points_.transfer(points());
         bounds_ = boundBox(points_, validBoundary);
     }
 
-    if (&faces)
+    if (notNull(faces))
     {
         faces_.transfer(faces());
     }
 
-    if (&owner)
+    if (notNull(owner))
     {
         owner_.transfer(owner());
     }
 
-    if (&neighbour)
+    if (notNull(neighbour))
     {
         neighbour_.transfer(neighbour());
     }
diff --git a/src/OpenFOAM/primitives/Scalar/doubleFloat.H b/src/OpenFOAM/primitives/Scalar/doubleFloat.H
index 57373e0b..69ce1a5f 100644
--- a/src/OpenFOAM/primitives/Scalar/doubleFloat.H
+++ b/src/OpenFOAM/primitives/Scalar/doubleFloat.H
@@ -31,6 +31,15 @@ License
 
 #include <cmath>
 
+#if defined(darwin64)
+inline float j0f(float x) { return float(j0(double(x)));}
+inline float j1f(float x) { return float(j1(double(x)));}
+inline float y0f(float x) { return float(y0(double(x)));}
+inline float y1f(float x) { return float(y1(double(x)));}
+inline float jnf(const int n, const float s) { return float(jn(n, double(s))); }
+inline float ynf(const int n, const float s) { return float(yn(n, double(s))); }
+#endif
+
 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
 
 namespace Foam
diff --git a/src/OpenFOAM/primitives/nullObject/nullObject.C b/src/OpenFOAM/primitives/nullObject/nullObject.C
new file mode 100644
index 00000000..cfcbfdf1
--- /dev/null
+++ b/src/OpenFOAM/primitives/nullObject/nullObject.C
@@ -0,0 +1,34 @@
+/*---------------------------------------------------------------------------*\
+  =========                 |
+  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
+   \\    /   O peration     |
+    \\  /    A nd           | Copyright (C) 2014 OpenFOAM Foundation
+     \\/     M anipulation  |
+-------------------------------------------------------------------------------
+License
+    This file is part of OpenFOAM.
+
+    OpenFOAM is free software: you can redistribute it and/or modify it
+    under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    OpenFOAM is distributed in the hope that it will be useful, but WITHOUT
+    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+    for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with OpenFOAM.  If not, see <http://www.gnu.org/licenses/>.
+
+\*---------------------------------------------------------------------------*/
+
+#include "nullObject.H"
+
+// * * * * * * * * * * * * * * Static Data Members * * * * * * * * * * * * * //
+
+const Foam::NullObject Foam::NullObject::nullObject;
+const Foam::NullObject* Foam::nullObjectPtr = &Foam::NullObject::nullObject;
+
+
+// ************************************************************************* //
diff --git a/src/OpenFOAM/primitives/nullObject/nullObject.H b/src/OpenFOAM/primitives/nullObject/nullObject.H
new file mode 100644
index 00000000..d324a925
--- /dev/null
+++ b/src/OpenFOAM/primitives/nullObject/nullObject.H
@@ -0,0 +1,110 @@
+/*---------------------------------------------------------------------------*\
+  =========                 |
+  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
+   \\    /   O peration     |
+    \\  /    A nd           | Copyright (C) 2014 OpenFOAM Foundation
+     \\/     M anipulation  |
+-------------------------------------------------------------------------------
+License
+    This file is part of OpenFOAM.
+
+    OpenFOAM is free software: you can redistribute it and/or modify it
+    under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    OpenFOAM is distributed in the hope that it will be useful, but WITHOUT
+    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+    for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with OpenFOAM.  If not, see <http://www.gnu.org/licenses/>.
+
+Class
+    Foam::nullObject
+
+Description
+    Singleton null-object class and instance
+
+SourceFiles
+    nullObjectI.H
+    nullObject.C
+
+\*---------------------------------------------------------------------------*/
+
+#ifndef nullObject_H
+#define nullObject_H
+
+// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
+
+namespace Foam
+{
+
+/*---------------------------------------------------------------------------*\
+                         Class nullObject Declaration
+\*---------------------------------------------------------------------------*/
+
+class NullObject
+{
+    //- Private constructor
+    NullObject()
+    {}
+
+    //- Prevent copy-construction
+    NullObject(const NullObject&);
+
+    //- Prevent assignment
+    NullObject& operator=(const NullObject&);
+
+public:
+
+    //- The unique null object
+    static const NullObject nullObject;
+};
+
+
+//- Pointer to the unique nullObject
+extern const NullObject* nullObjectPtr;
+
+
+//- Return reference to the nullObject of type T
+template <class T>
+inline const T& NullObjectRef();
+
+//- Return pointer to the nullObject of type T
+template <class T>
+inline const T* NullObjectPtr();
+
+
+//- Return true if t is a reference to the nullObject of type T
+template <class T>
+inline bool isNull(const T& t);
+
+//- Return true if t is not a reference to the nullObject of type T
+template <class T>
+inline bool notNull(const T& t);
+
+
+//- Return true if t is a pointer to the nullObject of type T
+template <class T>
+inline bool isNull(const T* t);
+
+//- Return true if t is not a pointer to the nullObject of type T
+template <class T>
+inline bool notNull(const T* t);
+
+
+// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
+
+} // End namespace Foam
+
+// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
+
+#include "nullObjectI.H"
+
+// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
+
+#endif
+
+// ************************************************************************* //
diff --git a/src/OpenFOAM/primitives/nullObject/nullObjectI.H b/src/OpenFOAM/primitives/nullObject/nullObjectI.H
new file mode 100644
index 00000000..4f8fbc1f
--- /dev/null
+++ b/src/OpenFOAM/primitives/nullObject/nullObjectI.H
@@ -0,0 +1,65 @@
+/*---------------------------------------------------------------------------*\
+  =========                 |
+  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
+   \\    /   O peration     |
+    \\  /    A nd           | Copyright (C) 2014 OpenFOAM Foundation
+     \\/     M anipulation  |
+-------------------------------------------------------------------------------
+License
+    This file is part of OpenFOAM.
+
+    OpenFOAM is free software: you can redistribute it and/or modify it
+    under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    OpenFOAM is distributed in the hope that it will be useful, but WITHOUT
+    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+    for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with OpenFOAM.  If not, see <http://www.gnu.org/licenses/>.
+
+\*---------------------------------------------------------------------------*/
+
+template <class T>
+inline const T& Foam::NullObjectRef()
+{
+    return *reinterpret_cast<const T*>(nullObjectPtr);
+}
+
+template <class T>
+inline const T* Foam::NullObjectPtr()
+{
+    return reinterpret_cast<const T*>(nullObjectPtr);
+}
+
+
+template <class T>
+inline bool Foam::isNull(const T& t)
+{
+    return &t == NullObjectPtr<T>();
+}
+
+template <class T>
+inline bool Foam::notNull(const T& t)
+{
+    return &t != NullObjectPtr<T>();
+}
+
+
+template <class T>
+inline bool Foam::isNull(const T* t)
+{
+    return t == NullObjectPtr<T>();
+}
+
+template <class T>
+inline bool Foam::notNull(const T* t)
+{
+    return t != NullObjectPtr<T>();
+}
+
+
+// ************************************************************************* //
diff --git a/src/Pstream/Allwmake b/src/Pstream/Allwmake
index 50ccb5fe..e2fdfc26 100755
--- a/src/Pstream/Allwmake
+++ b/src/Pstream/Allwmake
@@ -10,30 +10,32 @@ makeType=${1:-libso}
 #
 wmakeMpiLib()
 {
-    set +x
+    [ -z "$WM_SILENT_RULES" ] && set +x
     for libName
     do
     (
         WM_OPTIONS="$WM_OPTIONS$WM_MPLIB"
         whichmpi="$libName/Make/$WM_OPTIONS/using:$FOAM_MPI"
         [ -e "$whichmpi" ] || wclean $libName
-        echo "wmake $makeType $libName"
+        [ -z "$WM_SILENT_RULES" ] && echo "wmake $makeType $libName"
         wmake $makeType $libName
         touch "$whichmpi"
     )
     done
-    set -x
+    [ -z "$WM_SILENT_RULES" ] && set -x
 }
 
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 wmake $makeType dummy
 
 case "$WM_MPLIB" in
 *MPI*)
-    set +x
+    [ -z "$WM_SILENT_RULES" ] && set +x
+    [ -z "$WM_SILENT_RULES" ] && {
     echo
     echo "Note: ignore spurious warnings about missing mpicxx.h headers"
     echo
+    }
     wmakeMpiLib mpi
     ;;
 
diff --git a/src/Pstream/mpi/Make/options b/src/Pstream/mpi/Make/options
index 74b66596..60bb85af 100644
--- a/src/Pstream/mpi/Make/options
+++ b/src/Pstream/mpi/Make/options
@@ -1,5 +1,9 @@
 sinclude $(GENERAL_RULES)/mplib$(WM_MPLIB)
 sinclude $(RULES)/mplib$(WM_MPLIB)
 
+ifneq ($(WM_SILENT_RULES),)
+c++FLAGS += -w
+endif
+
 EXE_INC  = $(PFLAGS) $(PINC)
 LIB_LIBS = $(PLIBS)
diff --git a/src/conversion/Allwmake b/src/conversion/Allwmake
index 014885de..0137b992 100755
--- a/src/conversion/Allwmake
+++ b/src/conversion/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType
 
diff --git a/src/conversion/ensight/part/ensightPartCells.C b/src/conversion/ensight/part/ensightPartCells.C
index 80f0cdc4..beb2d546 100644
--- a/src/conversion/ensight/part/ensightPartCells.C
+++ b/src/conversion/ensight/part/ensightPartCells.C
@@ -67,7 +67,7 @@ void Foam::ensightPartCells::classify
     size_ = mesh.nCells();
 
     bool limited = false;
-    if (&idList)
+    if (notNull(idList))
     {
         limited = true;
         size_ = idList.size();
diff --git a/src/conversion/ensight/part/ensightPartIO.C b/src/conversion/ensight/part/ensightPartIO.C
index 7fe2e6ea..6d827d7e 100644
--- a/src/conversion/ensight/part/ensightPartIO.C
+++ b/src/conversion/ensight/part/ensightPartIO.C
@@ -59,7 +59,7 @@ void Foam::ensightPart::writeFieldList
     const labelUList& idList
 ) const
 {
-    if (&idList)
+    if (notNull(idList))
     {
         forAll(idList, i)
         {
diff --git a/src/dummyThirdParty/Allwmake b/src/dummyThirdParty/Allwmake
index d747a472..938d1691 100755
--- a/src/dummyThirdParty/Allwmake
+++ b/src/dummyThirdParty/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType scotchDecomp
 wmake $makeType ptscotchDecomp
diff --git a/src/dummyThirdParty/metisDecomp/metis.h b/src/dummyThirdParty/metisDecomp/metis.h
index 7b6ca31f..c5adaad0 100644
--- a/src/dummyThirdParty/metisDecomp/metis.h
+++ b/src/dummyThirdParty/metisDecomp/metis.h
@@ -11,7 +11,7 @@
 #define IDXTYPEWIDTH 32
 
 /*------------------------------------------------------------------------
-* Undefine the following #define in order to use short idxtype as the idxtype 
+* Undefine the following #define in order to use short idxtype as the idxtype
 *-------------------------------------------------------------------------*/
 #if IDXTYPEWIDTH == 32
   #define SCNIDX  SCNd32
@@ -29,17 +29,17 @@
 
 
 void METIS_WPartGraphRecursive(idxtype *nvtxs, idxtype *xadj, idxtype *adjncy, idxtype *vwgt,
-                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, float *tpwgts, 
+                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, float *tpwgts,
                    idxtype *options, idxtype *edgecut, idxtype *part);
 void METIS_PartGraphRecursive(idxtype *nvtxs, idxtype *xadj, idxtype *adjncy, idxtype *vwgt,
-                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, idxtype *options, 
+                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, idxtype *options,
+                   idxtype *edgecut, idxtype *part);
+void METIS_WPartGraphKway(idxtype *nvtxs, idxtype *xadj, idxtype *adjncy, idxtype *vwgt,
+                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, float *tpwgts,
+                   idxtype *options, idxtype *edgecut, idxtype *part);
+void METIS_PartGraphKway(idxtype *nvtxs, idxtype *xadj, idxtype *adjncy, idxtype *vwgt,
+                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, idxtype *options,
                    idxtype *edgecut, idxtype *part);
-void METIS_WPartGraphKway(idxtype *nvtxs, idxtype *xadj, idxtype *adjncy, idxtype *vwgt, 
-                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, float *tpwgts, 
-                   idxtype *options, idxtype *edgecut, idxtype *part); 
-void METIS_PartGraphKway(idxtype *nvtxs, idxtype *xadj, idxtype *adjncy, idxtype *vwgt, 
-                   idxtype *adjwgt, idxtype *wgtflag, idxtype *numflag, idxtype *nparts, idxtype *options, 
-                   idxtype *edgecut, idxtype *part); 
 
 
 
diff --git a/src/edgeMesh/edgeMesh.C b/src/edgeMesh/edgeMesh.C
index 7e2a3972..fa00fe7a 100644
--- a/src/edgeMesh/edgeMesh.C
+++ b/src/edgeMesh/edgeMesh.C
@@ -182,12 +182,12 @@ void Foam::edgeMesh::reset
 {
     // Take over new primitive data.
     // Optimized to avoid overwriting data at all
-    if (&pointLst)
+    if (notNull(pointLst))
     {
         points_.transfer(pointLst());
     }
 
-    if (&edgeLst)
+    if (notNull(edgeLst))
     {
         edges_.transfer(edgeLst());
 
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.C b/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.C
index d70c040c..0374f953 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.C
+++ b/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.C
@@ -150,7 +150,7 @@ void Foam::porosityModels::DarcyForchheimer::correct
     const scalarField& V = mesh_.V();
     scalarField& Udiag = UEqn.diag();
     vectorField& Usource = UEqn.source();
- 
+
     if (UEqn.dimensions() == dimForce)
     {
         const volScalarField& rho =
@@ -181,7 +181,7 @@ void Foam::porosityModels::DarcyForchheimer::correct
     const scalarField& V = mesh_.V();
     scalarField& Udiag = UEqn.diag();
     vectorField& Usource = UEqn.source();
- 
+
     apply(Udiag, Usource, V, rho, mu, U);
 }
 
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.H b/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.H
index 51107928..2f6f00b2 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.H
+++ b/src/finiteVolume/cfdTools/general/porosityModel/DarcyForchheimer/DarcyForchheimer.H
@@ -170,7 +170,7 @@ public:
         virtual void correct
         (
             const fvVectorMatrix& UEqn,
-            volTensorField& AU            
+            volTensorField& AU
         ) const;
 
 
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.C b/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.C
index bcc8554d..e63b2031 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.C
+++ b/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.C
@@ -202,7 +202,7 @@ void Foam::porosityModels::fixedCoeff::correct
     const scalarField& V = mesh_.V();
     scalarField& Udiag = UEqn.diag();
     vectorField& Usource = UEqn.source();
- 
+
     scalar rho = 1.0;
     if (UEqn.dimensions() == dimForce)
     {
@@ -230,7 +230,7 @@ void Foam::porosityModels::fixedCoeff::correct
     {
         coeffs_.lookup("rhoRef") >> rho;
     }
- 
+
     apply(Udiag, Usource, V, U, rho);
 }
 
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.H b/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.H
index 15813183..345f0b6c 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.H
+++ b/src/finiteVolume/cfdTools/general/porosityModel/fixedCoeff/fixedCoeff.H
@@ -147,7 +147,7 @@ public:
         virtual void correct
         (
             const fvVectorMatrix& UEqn,
-            volTensorField& AU            
+            volTensorField& AU
         ) const;
 
 
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModel.C b/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModel.C
index f940ff2c..5aacf6fc 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModel.C
+++ b/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModel.C
@@ -187,7 +187,7 @@ void Foam::porosityModel::addResistance
 (
     const fvVectorMatrix& UEqn,
     volTensorField& AU,
-    bool correctAUprocBC         
+    bool correctAUprocBC
 ) const
 {
     if (cellZoneIds_.empty())
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModelList.C b/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModelList.C
index df302854..ca382557 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModelList.C
+++ b/src/finiteVolume/cfdTools/general/porosityModel/porosityModel/porosityModelList.C
@@ -153,7 +153,7 @@ void Foam::porosityModelList::addResistance
 (
     const fvVectorMatrix& UEqn,
     volTensorField& AU,
-    bool correctAUprocBC         
+    bool correctAUprocBC
 ) const
 {
     forAll(*this, i)
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.C b/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.C
index 485f0beb..b3134ecd 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.C
+++ b/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.C
@@ -91,7 +91,7 @@ void Foam::porosityModels::powerLaw::correct
     const vectorField& U = UEqn.psi();
     const scalarField& V = mesh_.V();
     scalarField& Udiag = UEqn.diag();
- 
+
     if (UEqn.dimensions() == dimForce)
     {
         const volScalarField& rho =
@@ -116,7 +116,7 @@ void Foam::porosityModels::powerLaw::correct
     const vectorField& U = UEqn.psi();
     const scalarField& V = mesh_.V();
     scalarField& Udiag = UEqn.diag();
- 
+
     apply(Udiag, V, rho, U);
 }
 
diff --git a/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.H b/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.H
index 299335b7..64fe5ff2 100644
--- a/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.H
+++ b/src/finiteVolume/cfdTools/general/porosityModel/powerLaw/powerLaw.H
@@ -151,7 +151,7 @@ public:
         virtual void correct
         (
             const fvVectorMatrix& UEqn,
-            volTensorField& AU            
+            volTensorField& AU
         ) const;
 
 
diff --git a/src/finiteVolume/fields/fvPatchFields/basic/fixedGradient/fixedGradientFvPatchField.H b/src/finiteVolume/fields/fvPatchFields/basic/fixedGradient/fixedGradientFvPatchField.H
index 3d007354..6b9d2a5d 100644
--- a/src/finiteVolume/fields/fvPatchFields/basic/fixedGradient/fixedGradientFvPatchField.H
+++ b/src/finiteVolume/fields/fvPatchFields/basic/fixedGradient/fixedGradientFvPatchField.H
@@ -47,7 +47,7 @@ Description
 
     \table
         Property     | Description             | Required    | Default value
-        gradient     | gradient                | yes         | 
+        gradient     | gradient                | yes         |
     \endtable
 
     Example of the boundary condition specification:
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/flowRateInletVelocity/flowRateInletVelocityFvPatchVectorField.H b/src/finiteVolume/fields/fvPatchFields/derived/flowRateInletVelocity/flowRateInletVelocityFvPatchVectorField.H
index 80512611..de5e29dd 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/flowRateInletVelocity/flowRateInletVelocityFvPatchVectorField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/flowRateInletVelocity/flowRateInletVelocityFvPatchVectorField.H
@@ -71,7 +71,7 @@ Description
         rhoInlet            1.0;
     }
     \endverbatim
-    
+
     The \c flowRate entry is a \c DataEntry type, meaning that it can be
     specified as constant, a polynomial fuction of time, and ...
 
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/inletOutletTotalTemperature/inletOutletTotalTemperatureFvPatchScalarField.H b/src/finiteVolume/fields/fvPatchFields/derived/inletOutletTotalTemperature/inletOutletTotalTemperatureFvPatchScalarField.H
index 430ee1e5..a0923e05 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/inletOutletTotalTemperature/inletOutletTotalTemperatureFvPatchScalarField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/inletOutletTotalTemperature/inletOutletTotalTemperatureFvPatchScalarField.H
@@ -58,7 +58,7 @@ Description
         value           uniform 0;
     }
     \endverbatim
-   
+
 SeeAlso
     Foam::inletOutletFvPatchField
 
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/mappedFixedValue/mappedFixedValueFvPatchField.H b/src/finiteVolume/fields/fvPatchFields/derived/mappedFixedValue/mappedFixedValueFvPatchField.H
index 011ec5b2..fdf1caa2 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/mappedFixedValue/mappedFixedValueFvPatchField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/mappedFixedValue/mappedFixedValueFvPatchField.H
@@ -29,11 +29,11 @@ Group
 
 Description
     This boundary condition maps the value at a set of cells or patch faces
-    back to *this.  
+    back to *this.
 
     The sample mode is set by the underlying mapping engine, provided by the
     mappedPatchBase class.
-    
+
     \heading Patch usage
 
     \table
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/pressureDirectedInletVelocity/pressureDirectedInletVelocityFvPatchVectorField.H b/src/finiteVolume/fields/fvPatchFields/derived/pressureDirectedInletVelocity/pressureDirectedInletVelocityFvPatchVectorField.H
index c98ad304..de652495 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/pressureDirectedInletVelocity/pressureDirectedInletVelocityFvPatchVectorField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/pressureDirectedInletVelocity/pressureDirectedInletVelocityFvPatchVectorField.H
@@ -54,7 +54,7 @@ Description
     \endverbatim
 
 Note
-    If reverse flow is possible or expected use the 
+    If reverse flow is possible or expected use the
     pressureDirectedInletOutletVelocityFvPatchVectorField condition instead.
 
 
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/rotatingPressureInletOutletVelocity/rotatingPressureInletOutletVelocityFvPatchVectorField.H b/src/finiteVolume/fields/fvPatchFields/derived/rotatingPressureInletOutletVelocity/rotatingPressureInletOutletVelocityFvPatchVectorField.H
index cc114d7c..5bb40741 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/rotatingPressureInletOutletVelocity/rotatingPressureInletOutletVelocityFvPatchVectorField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/rotatingPressureInletOutletVelocity/rotatingPressureInletOutletVelocityFvPatchVectorField.H
@@ -39,7 +39,7 @@ Description
         Property     | Description             | Required    | Default value
         phi          | flux field name         | no          | phi
         tangentialVelocity | tangential velocity field | no  |
-        omega        | angular velocty of the frame [rad/s] | yes    | 
+        omega        | angular velocty of the frame [rad/s] | yes    |
     \endtable
 
     Example of the boundary condition specification:
@@ -49,7 +49,7 @@ Description
         type            rotatingPressureInletOutletVelocity;
         phi             phi;
         tangentialVelocity uniform (0 0 0);
-        omega           100;        
+        omega           100;
     }
     \endverbatim
 
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/rotatingTotalPressure/rotatingTotalPressureFvPatchScalarField.H b/src/finiteVolume/fields/fvPatchFields/derived/rotatingTotalPressure/rotatingTotalPressureFvPatchScalarField.H
index 22d806c3..53f16ffe 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/rotatingTotalPressure/rotatingTotalPressureFvPatchScalarField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/rotatingTotalPressure/rotatingTotalPressureFvPatchScalarField.H
@@ -41,7 +41,7 @@ Description
         psi          | compressibility field name | no       | none
         gamma        | ratio of specific heats (Cp/Cv) | yes |
         p0           | static pressure reference | yes       |
-        omega        | angular velocty of the frame [rad/s] | yes    | 
+        omega        | angular velocty of the frame [rad/s] | yes    |
     \endtable
 
     Example of the boundary condition specification:
@@ -55,7 +55,7 @@ Description
         psi             psi;
         gamma           1.4;
         p0              uniform 1e5;
-        omega           100;        
+        omega           100;
     }
     \endverbatim
 
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/rotatingWallVelocity/rotatingWallVelocityFvPatchVectorField.H b/src/finiteVolume/fields/fvPatchFields/derived/rotatingWallVelocity/rotatingWallVelocityFvPatchVectorField.H
index a3d5d568..cba0050c 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/rotatingWallVelocity/rotatingWallVelocityFvPatchVectorField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/rotatingWallVelocity/rotatingWallVelocityFvPatchVectorField.H
@@ -36,7 +36,7 @@ Description
         Property     | Description             | Required    | Default value
         origin       | origin of rotation in Cartesian co-ordinates | yes|
         axis         | axis of rotation        | yes         |
-        omega        | angular velocty of the frame [rad/s] | yes    | 
+        omega        | angular velocty of the frame [rad/s] | yes    |
     \endtable
 
     Example of the boundary condition specification:
@@ -52,7 +52,7 @@ Description
 
     The \c omega entry is a DataEntry type, able to describe time varying
     functions.
-    
+
 SeeAlso
     Foam::DataEntry
     Foam::fixedValueFvPatchField
diff --git a/src/finiteVolume/fields/fvPatchFields/derived/supersonicFreestream/supersonicFreestreamFvPatchVectorField.H b/src/finiteVolume/fields/fvPatchFields/derived/supersonicFreestream/supersonicFreestreamFvPatchVectorField.H
index 6f6ea27b..a00814c9 100644
--- a/src/finiteVolume/fields/fvPatchFields/derived/supersonicFreestream/supersonicFreestreamFvPatchVectorField.H
+++ b/src/finiteVolume/fields/fvPatchFields/derived/supersonicFreestream/supersonicFreestreamFvPatchVectorField.H
@@ -46,7 +46,7 @@ Description
         UInf         | free-stream velocity    | yes         |
         pInf         | free-stream pressure    | yes         |
         TInf         | free-stream temperature | yes         |
-        gamma        | heat capacity ratio (cp/Cv) | yes     | 
+        gamma        | heat capacity ratio (cp/Cv) | yes     |
     \endtable
 
     Example of the boundary condition specification:
diff --git a/src/finiteVolume/fields/fvPatchFields/fvPatchField/fvPatchField.C b/src/finiteVolume/fields/fvPatchFields/fvPatchField/fvPatchField.C
index e9c57903..17844397 100644
--- a/src/finiteVolume/fields/fvPatchFields/fvPatchField/fvPatchField.C
+++ b/src/finiteVolume/fields/fvPatchFields/fvPatchField/fvPatchField.C
@@ -78,14 +78,14 @@ Foam::fvPatchField<Type>::fvPatchField
     patchType_(ptf.patchType_)
 {
     // For unmapped faces set to internal field value (zero-gradient)
-    if (&iF && iF.size())
+    if (reinterpret_cast<const void*>(&iF) && iF.size())
     {
         Field<Type>& f = *this;
 
         if
         (
             mapper.direct()
-         && &mapper.directAddressing()
+         && reinterpret_cast<const void*>(&mapper.directAddressing())
          && mapper.directAddressing().size()
         )
         {
@@ -262,7 +262,7 @@ void Foam::fvPatchField<Type>::autoMap
         if
         (
             mapper.direct()
-         && &mapper.directAddressing()
+         && reinterpret_cast<const void*>(&mapper.directAddressing())
          && mapper.directAddressing().size()
         )
         {
diff --git a/src/fvAgglomerationMethods/Allwmake b/src/fvAgglomerationMethods/Allwmake
index abbcf466..de88ae3e 100755
--- a/src/fvAgglomerationMethods/Allwmake
+++ b/src/fvAgglomerationMethods/Allwmake
@@ -1,13 +1,22 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
-export ParMGridGen=$WM_THIRD_PARTY_DIR/ParMGridGen-1.0
+if [ "$(uname -s)" != "Darwin" ]; then
+	export ParMGridGen=$WM_THIRD_PARTY_DIR/ParMGridGen-1.0
 
-if [ -e "$FOAM_LIBBIN/libMGridGen.so" ]
-then
-    wmake $makeType MGridGenGamgAgglomeration
+	if [ -e "$FOAM_LIBBIN/libMGridGen.so" ]
+	then
+		wmake $makeType MGridGenGamgAgglomeration
+	fi
+else
+	export ParMGridGen=/usr/local/opt/parmgridgen
+
+	if [ -e "$ParMGridGen/lib/libmgrid.a" ]
+	then
+		wmake $makeType MGridGenGamgAgglomeration
+	fi
 fi
 
 wmake $makeType pairPatchAgglomeration
diff --git a/src/fvAgglomerationMethods/MGridGenGamgAgglomeration/Make/options b/src/fvAgglomerationMethods/MGridGenGamgAgglomeration/Make/options
index a58b65fb..44bbdcb6 100644
--- a/src/fvAgglomerationMethods/MGridGenGamgAgglomeration/Make/options
+++ b/src/fvAgglomerationMethods/MGridGenGamgAgglomeration/Make/options
@@ -5,6 +5,15 @@ TYPE_REAL=
 TYPE_REAL=-DTYPE_REAL
 #endif
 
+#if defined(darwin64)
+EXE_INC = \
+    -I$(LIB_SRC)/finiteVolume/lnInclude \
+    -I$(ParMGridGen)/include \
+    $(TYPE_REAL)
+
+LIB_LIBS = \
+    -L$(ParMGridGen)/lib -lmgrid
+#else
 EXE_INC = \
     -I$(LIB_SRC)/finiteVolume/lnInclude \
     -I$(ParMGridGen)/MGridGen/Lib/lnInclude \
@@ -13,3 +22,4 @@ EXE_INC = \
 
 LIB_LIBS = \
     -L$(FOAM_EXT_LIBBIN) -lMGridGen
+#endif
diff --git a/src/fvOptions/Make/options b/src/fvOptions/Make/options
index a98e673d..e8de5c7a 100644
--- a/src/fvOptions/Make/options
+++ b/src/fvOptions/Make/options
@@ -13,5 +13,4 @@ LIB_LIBS = \
     -lfiniteVolume \
     -lsampling \
     -lmeshTools \
-    /*-lsolidThermo*/ \
     -lcompressibleTurbulenceModel
diff --git a/src/lagrangian/Allwmake b/src/lagrangian/Allwmake
index a4be0856..ad73243a 100755
--- a/src/lagrangian/Allwmake
+++ b/src/lagrangian/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType distributionModels
 wmake $makeType basic
diff --git a/src/lagrangian/coalCombustion/submodels/surfaceReactionModel/COxidationHurtMitchell/COxidationHurtMitchell.H b/src/lagrangian/coalCombustion/submodels/surfaceReactionModel/COxidationHurtMitchell/COxidationHurtMitchell.H
index cd780032..dcf71cc2 100644
--- a/src/lagrangian/coalCombustion/submodels/surfaceReactionModel/COxidationHurtMitchell/COxidationHurtMitchell.H
+++ b/src/lagrangian/coalCombustion/submodels/surfaceReactionModel/COxidationHurtMitchell/COxidationHurtMitchell.H
@@ -41,7 +41,7 @@ Description
     Model validity:
         Gas temperature: Tc > 1500 K
         Particle sizes:  75 um -> 200 um
-        Pox > 0.3 atm        
+        Pox > 0.3 atm
 
 \*---------------------------------------------------------------------------*/
 
diff --git a/src/lagrangian/distributionModels/uniform/uniform.C b/src/lagrangian/distributionModels/uniform/uniform.C
index 4d1504b6..c2681665 100644
--- a/src/lagrangian/distributionModels/uniform/uniform.C
+++ b/src/lagrangian/distributionModels/uniform/uniform.C
@@ -47,8 +47,7 @@ Foam::distributionModels::uniform::uniform
 :
     distributionModel(typeName, dict, rndGen),
     minValue_(readScalar(distributionModelDict_.lookup("minValue"))),
-    maxValue_(readScalar(distributionModelDict_.lookup("maxValue"))),
-    range_(maxValue_ - minValue_)
+    maxValue_(readScalar(distributionModelDict_.lookup("maxValue")))
 {
     check();
 }
diff --git a/src/lagrangian/distributionModels/uniform/uniform.H b/src/lagrangian/distributionModels/uniform/uniform.H
index 5a8f6650..524a86fc 100644
--- a/src/lagrangian/distributionModels/uniform/uniform.H
+++ b/src/lagrangian/distributionModels/uniform/uniform.H
@@ -61,7 +61,7 @@ class uniform
         scalar maxValue_;
 
         //- Distribution range
-        scalar range_;
+        // scalar range_;
 
 
 public:
diff --git a/src/lagrangian/intermediate/submodels/Kinematic/InjectionModel/InjectionModel/InjectionModelList.H b/src/lagrangian/intermediate/submodels/Kinematic/InjectionModel/InjectionModel/InjectionModelList.H
index 22213e20..68757790 100644
--- a/src/lagrangian/intermediate/submodels/Kinematic/InjectionModel/InjectionModel/InjectionModelList.H
+++ b/src/lagrangian/intermediate/submodels/Kinematic/InjectionModel/InjectionModel/InjectionModelList.H
@@ -89,7 +89,7 @@ public:
 
             //- Return the maximum end-of-injection time
             scalar timeEnd() const;
- 
+
             //- Volume of parcels to introduce relative to SOI
             scalar volumeToInject(const scalar time0, const scalar time1);
 
diff --git a/src/lagrangian/molecularDynamics/Allwmake b/src/lagrangian/molecularDynamics/Allwmake
index 7c17819a..0dbfb47a 100755
--- a/src/lagrangian/molecularDynamics/Allwmake
+++ b/src/lagrangian/molecularDynamics/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType potential
 wmake $makeType molecularMeasurements
diff --git a/src/lagrangian/spray/submodels/BreakupModel/PilchErdman/PilchErdman.H b/src/lagrangian/spray/submodels/BreakupModel/PilchErdman/PilchErdman.H
index 69190de1..09d1f3fe 100644
--- a/src/lagrangian/spray/submodels/BreakupModel/PilchErdman/PilchErdman.H
+++ b/src/lagrangian/spray/submodels/BreakupModel/PilchErdman/PilchErdman.H
@@ -51,7 +51,7 @@ Description
     The authors suggest that:
         compressible flow   : B1 = 0.75*1.0; B2 = 3*0.116
         incompressible flow : B1 = 0.75*0.5; B2 = 3*0.0758
-        
+
 
 \*---------------------------------------------------------------------------*/
 
diff --git a/src/mesh/Allwmake b/src/mesh/Allwmake
index 4653b1d3..abb01b19 100755
--- a/src/mesh/Allwmake
+++ b/src/mesh/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType autoMesh
 wmake $makeType blockMesh
diff --git a/src/meshTools/momentOfInertia/volumeIntegration/volInt.c b/src/meshTools/momentOfInertia/volumeIntegration/volInt.c
index 76016554..9e8db568 100644
--- a/src/meshTools/momentOfInertia/volumeIntegration/volInt.c
+++ b/src/meshTools/momentOfInertia/volumeIntegration/volInt.c
@@ -34,8 +34,8 @@
 			Thanks to Zoran Popovic for catching this one.
 
 	27 May 1997     Corrected sign error in translation of inertia
-	                product terms to center of mass frame.  Changes 
-			confined to function main().  Thanks to 
+	                product terms to center of mass frame.  Changes
+			confined to function main().  Thanks to
 			Chris Hecker.
 */
 
@@ -123,16 +123,16 @@ void readPolyhedron(char *name, POLYHEDRON *p)
   double dx1, dy1, dz1, dx2, dy2, dz2, nx, ny, nz, len;
   FACE *f;
 
-  
+
   if (!(fp = fopen(name, "r"))) {
     printf("i/o error\n");
     exit(1);
   }
-  
+
   fscanf(fp, "%d", &p->numVerts);
   printf("Reading in %d vertices\n", p->numVerts);
   for (i = 0; i < p->numVerts; i++)
-    fscanf(fp, "%lf %lf %lf", 
+    fscanf(fp, "%lf %lf %lf",
 	   &p->verts[i][X], &p->verts[i][Y], &p->verts[i][Z]);
 
   fscanf(fp, "%d", &p->numFaces);
@@ -196,7 +196,7 @@ void compProjectionIntegrals(FACE *f)
     db = b1 - b0;
     a0_2 = a0 * a0; a0_3 = a0_2 * a0; a0_4 = a0_3 * a0;
     b0_2 = b0 * b0; b0_3 = b0_2 * b0; b0_4 = b0_3 * b0;
-    a1_2 = a1 * a1; a1_3 = a1_2 * a1; 
+    a1_2 = a1 * a1; a1_3 = a1_2 * a1;
     b1_2 = b1 * b1; b1_3 = b1_2 * b1;
 
     C1 = a1 + a0;
@@ -253,7 +253,7 @@ compFaceIntegrals(FACE *f)
 
   Faaa = k1 * Paaa;
   Fbbb = k1 * Pbbb;
-  Fccc = -k4 * (CUBE(n[A])*Paaa + 3*SQR(n[A])*n[B]*Paab 
+  Fccc = -k4 * (CUBE(n[A])*Paaa + 3*SQR(n[A])*n[B]*Paab
 	   + 3*n[A]*SQR(n[B])*Pabb + CUBE(n[B])*Pbbb
 	   + 3*w*(SQR(n[A])*Paa + 2*n[A]*n[B]*Pab + SQR(n[B])*Pbb)
 	   + w*w*(3*(n[A]*Pa + n[B]*Pb) + w*P1));
@@ -270,8 +270,8 @@ void compVolumeIntegrals(POLYHEDRON *p)
   double nx, ny, nz;
   int i;
 
-  T0 = T1[X] = T1[Y] = T1[Z] 
-     = T2[X] = T2[Y] = T2[Z] 
+  T0 = T1[X] = T1[Y] = T1[Z]
+     = T2[X] = T2[Y] = T2[Z]
      = TP[X] = TP[Y] = TP[Z] = 0;
 
   for (i = 0; i < p->numFaces; i++) {
@@ -336,7 +336,7 @@ int main(int argc, char *argv[])
   printf("Tx =   %+20.6f\n", T1[X]);
   printf("Ty =   %+20.6f\n", T1[Y]);
   printf("Tz =   %+20.6f\n\n", T1[Z]);
-  
+
   printf("Txx =  %+20.6f\n", T2[X]);
   printf("Tyy =  %+20.6f\n", T2[Y]);
   printf("Tzz =  %+20.6f\n\n", T2[Z]);
@@ -366,9 +366,9 @@ int main(int argc, char *argv[])
   J[X][X] -= mass * (r[Y]*r[Y] + r[Z]*r[Z]);
   J[Y][Y] -= mass * (r[Z]*r[Z] + r[X]*r[X]);
   J[Z][Z] -= mass * (r[X]*r[X] + r[Y]*r[Y]);
-  J[X][Y] = J[Y][X] += mass * r[X] * r[Y]; 
-  J[Y][Z] = J[Z][Y] += mass * r[Y] * r[Z]; 
-  J[Z][X] = J[X][Z] += mass * r[Z] * r[X]; 
+  J[X][Y] = J[Y][X] += mass * r[X] * r[Y];
+  J[Y][Z] = J[Z][Y] += mass * r[Y] * r[Z];
+  J[Z][X] = J[X][Z] += mass * r[Z] * r[X];
 
   printf("center of mass:  (%+12.6f,%+12.6f,%+12.6f)\n\n", r[X], r[Y], r[Z]);
 
@@ -376,5 +376,5 @@ int main(int argc, char *argv[])
   printf("%+15.6f  %+15.6f  %+15.6f\n", J[X][X], J[X][Y], J[X][Z]);
   printf("%+15.6f  %+15.6f  %+15.6f\n", J[Y][X], J[Y][Y], J[Y][Z]);
   printf("%+15.6f  %+15.6f  %+15.6f\n\n", J[Z][X], J[Z][Y], J[Z][Z]);
-  
+
 }
diff --git a/src/parallel/Allwmake b/src/parallel/Allwmake
index ab84e5b7..2b8df74b 100755
--- a/src/parallel/Allwmake
+++ b/src/parallel/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 decompose/Allwmake $*
 reconstruct/Allwmake $*
diff --git a/src/parallel/decompose/Allwmake b/src/parallel/decompose/Allwmake
index 5cea1fbd..fda7c620 100755
--- a/src/parallel/decompose/Allwmake
+++ b/src/parallel/decompose/Allwmake
@@ -6,11 +6,15 @@ makeType=${1:-libso}
 if settings=`$WM_PROJECT_DIR/bin/foamEtcFile config/scotch.sh`
 then
     . $settings
+    [ -z "$WM_SILENT_RULES" ] && {
     echo "using SCOTCH_ARCH_PATH=$SCOTCH_ARCH_PATH"
+    }
 else
+    [ -z "$WM_SILENT_RULES" ] && {
     echo
     echo "Error: no config/scotch.sh settings"
     echo
+    }
 fi
 
 
@@ -21,7 +25,7 @@ fi
 #
 wmakeMpiLib()
 {
-    set +x
+    [ -z "$WM_SILENT_RULES" ] && set +x
     for libName
     do
     (
@@ -29,15 +33,15 @@ wmakeMpiLib()
         whichmpi="$libName/Make/$WM_OPTIONS/using:$FOAM_MPI"
         whichscotch="$libName/Make/$WM_OPTIONS/using:$SCOTCH_VERSION"
         [ -e "$whichmpi" -a -e "$whichscotch" ] || wclean $libName
-        echo "wmake $makeType $libName"
+        [ -z "$WM_SILENT_RULES" ] && echo "wmake $makeType $libName"
         wmake $makeType $libName
         touch "$whichmpi" "$whichscotch"
     )
     done
-    set -x
+    [ -z "$WM_SILENT_RULES" ] && set -x
 }
 
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmakeLnInclude decompositionMethods
 
@@ -47,19 +51,15 @@ then
 
     if [ -d "$FOAM_LIBBIN/$FOAM_MPI" ]
     then
-        #- Bit of a hack: ptscotch 6 requires scotch linked as well as. Can be
-        #  removed once ptscotch declares dependency on scotch itself.
-        if [ "$SCOTCH_VERSION" = "scotch_6.0.0" ]
-        then
-            export LINK_FLAGS="-lscotch"
-        fi
-
+		export LINK_FLAGS="-lscotch"
         wmakeMpiLib ptscotchDecomp
     fi
 else
+    [ -z "$WM_SILENT_RULES" ] && {
     echo
     echo "Skipping scotchDecomp (ptscotchDecomp)"
     echo
+    }
 fi
 
 wmake $makeType decompositionMethods
diff --git a/src/parallel/decompose/AllwmakeLnInclude b/src/parallel/decompose/AllwmakeLnInclude
index c6a537aa..9dbb195f 100755
--- a/src/parallel/decompose/AllwmakeLnInclude
+++ b/src/parallel/decompose/AllwmakeLnInclude
@@ -1,6 +1,6 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmakeLnInclude decompositionMethods
 wmakeLnInclude metisDecomp
diff --git a/src/parallel/decompose/ptscotchDecomp/Make/options b/src/parallel/decompose/ptscotchDecomp/Make/options
index acdebd89..b40b7201 100644
--- a/src/parallel/decompose/ptscotchDecomp/Make/options
+++ b/src/parallel/decompose/ptscotchDecomp/Make/options
@@ -3,10 +3,12 @@ sinclude $(RULES)/mplib$(WM_MPLIB)
 
 EXE_INC = \
     $(PFLAGS) $(PINC) \
-    -I$(SCOTCH_ROOT)/include \
-    -I$(SCOTCH_ARCH_PATH)/include/$(FOAM_MPI) \
-    -I/usr/include/scotch \
+    -I$(SCOTCH_ARCH_PATH)/include \
     -I../decompositionMethods/lnInclude
 
 LIB_LIBS = \
-    -L$(SCOTCH_ROOT)/lib -L$(FOAM_EXT_LIBBIN)/$(FOAM_MPI) -lptscotch -lptscotcherrexit ${LINK_FLAGS} -lrt
+    -L$(SCOTCH_ARCH_PATH)/lib -lptscotch -lptscotcherrexit ${LINK_FLAGS}
+
+ifneq ($(shell uname -s),Darwin)
+LIB_LIBS += -lrt
+endif
diff --git a/src/parallel/decompose/scotchDecomp/Make/options b/src/parallel/decompose/scotchDecomp/Make/options
index 3bb11fba..23701f5d 100644
--- a/src/parallel/decompose/scotchDecomp/Make/options
+++ b/src/parallel/decompose/scotchDecomp/Make/options
@@ -7,10 +7,12 @@ sinclude $(RULES)/mplib$(WM_MPLIB)
 
 EXE_INC = \
     $(PFLAGS) $(PINC) \
-    -I$(SCOTCH_ROOT)/include \
     -I$(SCOTCH_ARCH_PATH)/include \
-    -I/usr/include/scotch \
     -I../decompositionMethods/lnInclude
 
 LIB_LIBS = \
-    -L$(SCOTCH_ROOT)/lib -L$(FOAM_EXT_LIBBIN) -lscotch -lscotcherrexit -lrt
+    -L$(SCOTCH_ARCH_PATH)/lib -lscotch -lscotcherrexit
+
+ifneq ($(shell uname -s),Darwin)
+LIB_LIBS += -lrt
+endif
diff --git a/src/parallel/reconstruct/Allwmake b/src/parallel/reconstruct/Allwmake
index 85e8e972..277117f0 100755
--- a/src/parallel/reconstruct/Allwmake
+++ b/src/parallel/reconstruct/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType reconstruct
 
diff --git a/src/postProcessing/Allwmake b/src/postProcessing/Allwmake
index 24b764c4..a5e7dada 100755
--- a/src/postProcessing/Allwmake
+++ b/src/postProcessing/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake libo postCalc
 wmake $makeType foamCalcFunctions
diff --git a/src/postProcessing/functionObjects/Allwmake b/src/postProcessing/functionObjects/Allwmake
index 178a1a3c..b8193d41 100755
--- a/src/postProcessing/functionObjects/Allwmake
+++ b/src/postProcessing/functionObjects/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType cloud
 wmake $makeType field
diff --git a/src/postProcessing/functionObjects/field/fieldValues/faceSource/faceSource.H b/src/postProcessing/functionObjects/field/fieldValues/faceSource/faceSource.H
index 15efc230..785fcd08 100644
--- a/src/postProcessing/functionObjects/field/fieldValues/faceSource/faceSource.H
+++ b/src/postProcessing/functionObjects/field/fieldValues/faceSource/faceSource.H
@@ -211,14 +211,14 @@ private:
         //- Set faces according to sampledSurface
         void sampledSurfaceFaces(const dictionary&);
 
-        //- Combine mesh faces and points from multiple processors 
+        //- Combine mesh faces and points from multiple processors
         void combineMeshGeometry
         (
             faceList& faces,
             pointField& points
         ) const;
 
-        //- Combine surface faces and points from multiple processors 
+        //- Combine surface faces and points from multiple processors
         void combineSurfaceGeometry
         (
             faceList& faces,
diff --git a/src/regionModels/Allwclean b/src/regionModels/Allwclean
index f95d816a..a6e0038e 100755
--- a/src/regionModels/Allwclean
+++ b/src/regionModels/Allwclean
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wclean $makeType regionModel
 wclean $makeType pyrolysisModels
diff --git a/src/regionModels/Allwmake b/src/regionModels/Allwmake
index 0ca6e633..509ae2e8 100755
--- a/src/regionModels/Allwmake
+++ b/src/regionModels/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType regionModel
 wmake $makeType pyrolysisModels
diff --git a/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelCollection.C b/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelCollection.C
index d11f2d1a..6d0a1487 100644
--- a/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelCollection.C
+++ b/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelCollection.C
@@ -53,7 +53,7 @@ namespace pyrolysisModels
 pyrolysisModelCollection::pyrolysisModelCollection(const fvMesh& mesh)
 :
     PtrList<pyrolysisModel>()
-    
+
 {
     IOdictionary pyrolysisZonesDict
     (
diff --git a/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelNew.C b/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelNew.C
index 0e1a5076..223405f2 100644
--- a/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelNew.C
+++ b/src/regionModels/pyrolysisModels/pyrolysisModel/pyrolysisModelNew.C
@@ -115,7 +115,7 @@ autoPtr<pyrolysisModel> pyrolysisModel::New
     (
         cstrIter()
         (
-            modelType, 
+            modelType,
             mesh,
             dict,
             regionType
diff --git a/src/regionModels/thermalBaffleModels/noThermo/noThermo.C b/src/regionModels/thermalBaffleModels/noThermo/noThermo.C
index e5205db4..d603203f 100644
--- a/src/regionModels/thermalBaffleModels/noThermo/noThermo.C
+++ b/src/regionModels/thermalBaffleModels/noThermo/noThermo.C
@@ -151,7 +151,7 @@ const solidThermo& noThermo::thermo() const
     FatalErrorIn("const volScalarField& noThermo::T() const")
         << "T field not available for " << type()
         << abort(FatalError);
-    return *reinterpret_cast<const solidThermo*>(NULL);
+    return NullObjectRef<solidThermo>();
 }
 
 
diff --git a/src/renumber/Allwmake b/src/renumber/Allwmake
index d7f72d93..b232945e 100755
--- a/src/renumber/Allwmake
+++ b/src/renumber/Allwmake
@@ -2,19 +2,7 @@
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
 
-## get ZOLTAN_ARCH_PATH
-#if settings=`$WM_PROJECT_DIR/bin/foamEtcFile config/zoltan.sh`
-#then
-#    . $settings
-#    echo "using ZOLTAN_ARCH_PATH=$ZOLTAN_ARCH_PATH"
-#else
-#    echo
-#    echo "Error: no config/zoltan.sh settings"
-#    echo
-#fi
-
-
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType renumberMethods
 
@@ -22,19 +10,11 @@ if [ -n "$BOOST_ARCH_PATH" ]
 then
     wmake $makeType SloanRenumber
 else
+    [ -z "$WM_SILENT_RULES" ] && {
     echo
     echo "Skipping SloanRenumber"
     echo
-fi
-
-
-if [ -n "$ZOLTAN_ARCH_PATH" ]
-then
-    wmake $makeType zoltanRenumber
-else
-    echo
-    echo "Skipping zoltanRenumber"
-    echo
+    }
 fi
 
 # ----------------------------------------------------------------- end-of-file
diff --git a/src/renumber/SloanRenumber/Make/options b/src/renumber/SloanRenumber/Make/options
index 492a3ae1..f22a1e6c 100644
--- a/src/renumber/SloanRenumber/Make/options
+++ b/src/renumber/SloanRenumber/Make/options
@@ -1,12 +1,17 @@
 EXE_INC = \
-    /* -DFULLDEBUG -g -O0 */ \
     -I$(BOOST_ARCH_PATH)/include \
     -I$(LIB_SRC)/meshTools/lnInclude \
     -I$(LIB_SRC)/parallel/decompose/decompositionMethods/lnInclude \
     -I$(LIB_SRC)/renumber/renumberMethods/lnInclude
 
 LIB_LIBS = \
-    -L$(BOOST_ARCH_PATH)/lib -lboost_thread \
+    -L$(BOOST_ARCH_PATH)/lib \
     -lmeshTools \
     -ldecompositionMethods \
     -lrenumberMethods
+
+ifneq ("$(wildcard $(BOOST_ARCH_PATH)/lib/libboost_thread-mt.dylib)","")
+LIB_LIBS += -lboost_thread-mt
+else
+LIB_LIBS += -lboost_thread
+endif
diff --git a/src/sampling/cuttingPlane/cuttingPlane.C b/src/sampling/cuttingPlane/cuttingPlane.C
index 87f004a0..03f29dd2 100644
--- a/src/sampling/cuttingPlane/cuttingPlane.C
+++ b/src/sampling/cuttingPlane/cuttingPlane.C
@@ -51,7 +51,7 @@ void Foam::cuttingPlane::calcCutCells
     const edgeList& edges = mesh.edges();
 
     label listSize = cellEdges.size();
-    if (&cellIdLabels)
+    if (notNull(cellIdLabels))
     {
         listSize = cellIdLabels.size();
     }
@@ -64,7 +64,7 @@ void Foam::cuttingPlane::calcCutCells
     for (label listI = 0; listI < listSize; ++listI)
     {
         label cellI = listI;
-        if (&cellIdLabels)
+        if (notNull(cellIdLabels))
         {
             cellI = cellIdLabels[listI];
         }
@@ -400,7 +400,7 @@ void Foam::cuttingPlane::remapFaces
 )
 {
     // recalculate the cells cut
-    if (&faceMap && faceMap.size())
+    if (notNull(faceMap) && faceMap.size())
     {
         MeshStorage::remapFaces(faceMap);
 
diff --git a/src/sampling/sampledSurface/sampledPatch/sampledPatch.C b/src/sampling/sampledSurface/sampledPatch/sampledPatch.C
index da2d90c9..bbf62902 100644
--- a/src/sampling/sampledSurface/sampledPatch/sampledPatch.C
+++ b/src/sampling/sampledSurface/sampledPatch/sampledPatch.C
@@ -203,7 +203,7 @@ bool Foam::sampledPatch::update()
 void Foam::sampledPatch::remapFaces(const labelUList& faceMap)
 {
     // recalculate the cells cut
-    if (&faceMap && faceMap.size())
+    if (notNull(faceMap) && faceMap.size())
     {
         MeshStorage::remapFaces(faceMap);
         patchFaceLabels_ = labelList
diff --git a/src/sampling/sampledSurface/writers/nastran/nastranSurfaceWriter.C b/src/sampling/sampledSurface/writers/nastran/nastranSurfaceWriter.C
index eaa16feb..f18c8f12 100644
--- a/src/sampling/sampledSurface/writers/nastran/nastranSurfaceWriter.C
+++ b/src/sampling/sampledSurface/writers/nastran/nastranSurfaceWriter.C
@@ -111,7 +111,7 @@ void Foam::nastranSurfaceWriter::writeCoord
             os.unsetf(ios_base::left);
             os.setf(ios_base::right);
             os  << setw(8) << pointI + 1
-                << "        " 
+                << "        "
                 << setw(8) << p.x()
                 << setw(8) << p.y()
                 << setw(8) << p.z()
diff --git a/src/surfMesh/MeshedSurface/MeshedSurface.C b/src/surfMesh/MeshedSurface/MeshedSurface.C
index 43719de2..c0536623 100644
--- a/src/surfMesh/MeshedSurface/MeshedSurface.C
+++ b/src/surfMesh/MeshedSurface/MeshedSurface.C
@@ -433,7 +433,7 @@ void Foam::MeshedSurface<Face>::remapFaces
 )
 {
     // recalculate the zone start/size
-    if (&faceMap && faceMap.size())
+    if (notNull(faceMap) && faceMap.size())
     {
         surfZoneList& zones = storedZones();
 
@@ -526,17 +526,17 @@ void Foam::MeshedSurface<Face>::reset
 
     // Take over new primitive data.
     // Optimized to avoid overwriting data at all
-    if (&pointLst)
+    if (notNull(pointLst))
     {
         storedPoints().transfer(pointLst());
     }
 
-    if (&faceLst)
+    if (notNull(faceLst))
     {
         storedFaces().transfer(faceLst());
     }
 
-    if (&zoneLst)
+    if (notNull(zoneLst))
     {
         storedZones().transfer(zoneLst());
     }
@@ -555,17 +555,17 @@ void Foam::MeshedSurface<Face>::reset
 
     // Take over new primitive data.
     // Optimized to avoid overwriting data at all
-    if (&pointLst)
+    if (notNull(pointLst))
     {
         storedPoints().transfer(pointLst());
     }
 
-    if (&faceLst)
+    if (notNull(faceLst))
     {
         storedFaces().transfer(faceLst());
     }
 
-    if (&zoneLst)
+    if (notNull(zoneLst))
     {
         storedZones().transfer(zoneLst());
     }
@@ -860,7 +860,7 @@ Foam::label Foam::MeshedSurface<Face>::triangulate
     // nothing to do
     if (nTri <= faceLst.size())
     {
-        if (&faceMapOut)
+        if (reinterpret_cast<const void*>(&faceMapOut))
         {
             faceMapOut.clear();
         }
@@ -871,7 +871,7 @@ Foam::label Foam::MeshedSurface<Face>::triangulate
     List<label> faceMap;
 
     // reuse storage from optional faceMap
-    if (&faceMapOut)
+    if (reinterpret_cast<const void*>(&faceMapOut))
     {
         faceMap.transfer(faceMapOut);
     }
@@ -928,7 +928,7 @@ Foam::label Foam::MeshedSurface<Face>::triangulate
     remapFaces(faceMap);
 
     // optionally return the faceMap
-    if (&faceMapOut)
+    if (reinterpret_cast<const void*>(&faceMapOut))
     {
         faceMapOut.transfer(faceMap);
     }
diff --git a/src/surfMesh/MeshedSurface/MeshedSurface.H b/src/surfMesh/MeshedSurface/MeshedSurface.H
index 2170781d..f52ca824 100644
--- a/src/surfMesh/MeshedSurface/MeshedSurface.H
+++ b/src/surfMesh/MeshedSurface/MeshedSurface.H
@@ -469,7 +469,7 @@ inline label MeshedSurface<triFace>::triangulate()
 template<>
 inline label MeshedSurface<triFace>::triangulate(List<label>& faceMap)
 {
-    if (&faceMap)
+    if (notNull(faceMap))
     {
         faceMap.clear();
     }
diff --git a/src/surfMesh/MeshedSurfaceAllocator/MeshedSurfaceIOAllocator.C b/src/surfMesh/MeshedSurfaceAllocator/MeshedSurfaceIOAllocator.C
index 1a97d5d3..c8ca9b79 100644
--- a/src/surfMesh/MeshedSurfaceAllocator/MeshedSurfaceIOAllocator.C
+++ b/src/surfMesh/MeshedSurfaceAllocator/MeshedSurfaceIOAllocator.C
@@ -88,12 +88,12 @@ void Foam::MeshedSurfaceIOAllocator::resetFaces
     const Xfer<surfZoneList>& zones
 )
 {
-    if (&faces)
+    if (notNull(faces))
     {
         faces_.transfer(faces());
     }
 
-    if (&zones)
+    if (notNull(zones))
     {
         zones_.transfer(zones());
     }
@@ -109,7 +109,7 @@ void Foam::MeshedSurfaceIOAllocator::reset
 {
     // Take over new primitive data.
     // Optimized to avoid overwriting data at all
-    if (&points)
+    if (notNull(points))
     {
         points_.transfer(points());
     }
@@ -127,7 +127,7 @@ void Foam::MeshedSurfaceIOAllocator::reset
 {
     // Take over new primitive data.
     // Optimized to avoid overwriting data at all
-    if (&points)
+    if (notNull(points))
     {
         points_.transfer(points());
     }
diff --git a/src/surfMesh/UnsortedMeshedSurface/UnsortedMeshedSurface.C b/src/surfMesh/UnsortedMeshedSurface/UnsortedMeshedSurface.C
index 7f6de730..8c562ef5 100644
--- a/src/surfMesh/UnsortedMeshedSurface/UnsortedMeshedSurface.C
+++ b/src/surfMesh/UnsortedMeshedSurface/UnsortedMeshedSurface.C
@@ -401,7 +401,7 @@ void Foam::UnsortedMeshedSurface<Face>::remapFaces
 )
 {
     // re-assign the zone Ids
-    if (&faceMap && faceMap.size())
+    if (notNull(faceMap) && faceMap.size())
     {
         if (zoneToc_.empty())
         {
@@ -612,7 +612,7 @@ void Foam::UnsortedMeshedSurface<Face>::reset
         Xfer<surfZoneList>()
     );
 
-    if (&zoneIds)
+    if (notNull(zoneIds))
     {
         zoneIds_.transfer(zoneIds());
     }
@@ -634,7 +634,7 @@ void Foam::UnsortedMeshedSurface<Face>::reset
         Xfer<surfZoneList>()
     );
 
-    if (&zoneIds)
+    if (notNull(zoneIds))
     {
         zoneIds_.transfer(zoneIds());
     }
diff --git a/src/surfMesh/surfMesh/surfMesh.C b/src/surfMesh/surfMesh/surfMesh.C
index 88a74271..4740948e 100644
--- a/src/surfMesh/surfMesh/surfMesh.C
+++ b/src/surfMesh/surfMesh/surfMesh.C
@@ -209,7 +209,7 @@ Foam::surfMesh::surfMesh
     }
 
     // We can also send Xfer<..>::null just to initialize without allocating
-    if (&surf)
+    if (notNull(surf))
     {
         transfer(surf());
     }
diff --git a/src/thermophysicalModels/Allwmake b/src/thermophysicalModels/Allwmake
index dbd8310a..7f97ad67 100755
--- a/src/thermophysicalModels/Allwmake
+++ b/src/thermophysicalModels/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType specie
 wmake $makeType solidSpecie
diff --git a/src/thermophysicalModels/properties/Allwmake b/src/thermophysicalModels/properties/Allwmake
index f088d140..eaa7559a 100755
--- a/src/thermophysicalModels/properties/Allwmake
+++ b/src/thermophysicalModels/properties/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType liquidProperties
 wmake $makeType liquidMixtureProperties
diff --git a/src/thermophysicalModels/reactionThermo/chemistryReaders/chemkinReader/chemkinReader.C b/src/thermophysicalModels/reactionThermo/chemistryReaders/chemkinReader/chemkinReader.C
index 63dd057f..f18daf08 100644
--- a/src/thermophysicalModels/reactionThermo/chemistryReaders/chemkinReader/chemkinReader.C
+++ b/src/thermophysicalModels/reactionThermo/chemistryReaders/chemkinReader/chemkinReader.C
@@ -400,6 +400,14 @@ void Foam::chemkinReader::addPressureDependentReaction
 
         default:
         {
+            FatalErrorIn("chemkinReader::addPressureDependentReaction")
+                << "Fall-off function type "
+                << fallOffFunctionNames[fofType]
+                << " on line " << lineNo_-1
+                << " not implemented"
+                << exit(FatalError);
+
+            /*
             if (fofType < 4)
             {
                 FatalErrorIn("chemkinReader::addPressureDependentReaction")
@@ -416,6 +424,7 @@ void Foam::chemkinReader::addPressureDependentReaction
                     << " on line " << lineNo_-1
                     << exit(FatalError);
             }
+            */
         }
     }
 }
diff --git a/src/thermophysicalModels/specie/reaction/Reactions/Reaction/Reaction.C b/src/thermophysicalModels/specie/reaction/Reactions/Reaction/Reaction.C
index 2a8a5ca1..16df3ae9 100644
--- a/src/thermophysicalModels/specie/reaction/Reactions/Reaction/Reaction.C
+++ b/src/thermophysicalModels/specie/reaction/Reactions/Reaction/Reaction.C
@@ -503,7 +503,7 @@ const Foam::speciesTable& Foam::Reaction<ReactionThermo>::gasSpecies() const
         "const speciesTable& gasSpecies() const"
         " for this reaction"
     );
-    return *reinterpret_cast<speciesTable*>(0);
+    return NullObjectRef<speciesTable>();
 }
 
 
@@ -516,7 +516,7 @@ Foam::Reaction<ReactionThermo>::glhs() const
         "inline const List<typename Reaction<ReactionThermo>::specieCoeffs>&"
         "Reaction<ReactionThermo>::glhs()"
     );
-    return *reinterpret_cast<List<specieCoeffs>*>(0);
+    return NullObjectRef<List<specieCoeffs> >();
 }
 
 
@@ -529,7 +529,7 @@ Foam::Reaction<ReactionThermo>::grhs() const
         "inline const List<typename Reaction<ReactionThermo>::specieCoeffs>&"
         "Reaction<ReactionThermo>::grhs()"
     );
-    return *reinterpret_cast<List<specieCoeffs>*>(0);
+    return NullObjectRef<List<specieCoeffs> >();
 }
 
 // ************************************************************************* //
diff --git a/src/transportModels/Allwmake b/src/transportModels/Allwmake
index 120dfae7..c5110bb3 100755
--- a/src/transportModels/Allwmake
+++ b/src/transportModels/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType twoPhaseMixture
 wmake $makeType interfaceProperties
diff --git a/src/turbulenceModels/Allwmake b/src/turbulenceModels/Allwmake
index 3cba27ed..ffdcf0a2 100755
--- a/src/turbulenceModels/Allwmake
+++ b/src/turbulenceModels/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 LES/Allwmake $*
 incompressible/Allwmake $*
diff --git a/src/turbulenceModels/LES/Allwmake b/src/turbulenceModels/LES/Allwmake
index 6ee54e6c..fa0bae8c 100755
--- a/src/turbulenceModels/LES/Allwmake
+++ b/src/turbulenceModels/LES/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmakeLnInclude ../incompressible/LES
 
diff --git a/src/turbulenceModels/compressible/Allwmake b/src/turbulenceModels/compressible/Allwmake
index 6e230c01..2b61363b 100755
--- a/src/turbulenceModels/compressible/Allwmake
+++ b/src/turbulenceModels/compressible/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType turbulenceModel
 wmake $makeType RAS
diff --git a/src/turbulenceModels/compressible/LES/DESModel/DESModelDoc.H b/src/turbulenceModels/compressible/LES/DESModel/DESModelDoc.H
index e9deb320..e7bb541a 100644
--- a/src/turbulenceModels/compressible/LES/DESModel/DESModelDoc.H
+++ b/src/turbulenceModels/compressible/LES/DESModel/DESModelDoc.H
@@ -28,5 +28,5 @@ License
     \ingroup grpCmpTurbulence
     This group contains compressible DES models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/compressible/LES/GenEddyVisc/GenEddyVisc.H b/src/turbulenceModels/compressible/LES/GenEddyVisc/GenEddyVisc.H
index d4af6e5e..68ce924c 100644
--- a/src/turbulenceModels/compressible/LES/GenEddyVisc/GenEddyVisc.H
+++ b/src/turbulenceModels/compressible/LES/GenEddyVisc/GenEddyVisc.H
@@ -116,7 +116,7 @@ public:
                 new volScalarField
                 (
                     IOobject
-                    (   
+                    (
                         "epsilon",
                         runTime_.timeName(),
                         mesh_,
diff --git a/src/turbulenceModels/compressible/LES/GenSGSStress/GenSGSStress.H b/src/turbulenceModels/compressible/LES/GenSGSStress/GenSGSStress.H
index 44eef6da..1e84390f 100644
--- a/src/turbulenceModels/compressible/LES/GenSGSStress/GenSGSStress.H
+++ b/src/turbulenceModels/compressible/LES/GenSGSStress/GenSGSStress.H
@@ -117,7 +117,7 @@ public:
                 new volScalarField
                 (
                     IOobject
-                    (   
+                    (
                         "k",
                         runTime_.timeName(),
                         mesh_,
@@ -139,7 +139,7 @@ public:
                 new volScalarField
                 (
                     IOobject
-                    (   
+                    (
                         "epsilon",
                         runTime_.timeName(),
                         mesh_,
diff --git a/src/turbulenceModels/compressible/LES/LESModel/LESModelDoc.H b/src/turbulenceModels/compressible/LES/LESModel/LESModelDoc.H
index ac8c52e3..3f1d1c10 100644
--- a/src/turbulenceModels/compressible/LES/LESModel/LESModelDoc.H
+++ b/src/turbulenceModels/compressible/LES/LESModel/LESModelDoc.H
@@ -28,5 +28,5 @@ License
     \ingroup grpCmpTurbulence
     This group contains compressible LES models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/compressible/RAS/RASModel/RASModelDoc.H b/src/turbulenceModels/compressible/RAS/RASModel/RASModelDoc.H
index 53757f81..300be13d 100644
--- a/src/turbulenceModels/compressible/RAS/RASModel/RASModelDoc.H
+++ b/src/turbulenceModels/compressible/RAS/RASModel/RASModelDoc.H
@@ -28,5 +28,5 @@ License
     \ingroup grpCmpTurbulence
     This group contains compressible RAS models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H b/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H
index 63aa24b8..4d0d5f32 100644
--- a/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H
+++ b/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H
@@ -36,7 +36,7 @@ Description
         \f[
             \epsilon_p = \frac{C_{\mu}^{0.75} k^{1.5}}{L}
         \f]
-   
+
     where
 
     \vartable
diff --git a/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H b/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H
index cafd2d9d..0f3484c7 100644
--- a/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H
+++ b/src/turbulenceModels/compressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H
@@ -35,7 +35,7 @@ Description
         \f[
             \omega_p = \frac{k^{0.5}}{C_{\mu}^{0.25} L}
         \f]
-   
+
     where
 
     \vartable
diff --git a/src/turbulenceModels/compressible/turbulenceModel/turbulenceModelDoc.H b/src/turbulenceModels/compressible/turbulenceModel/turbulenceModelDoc.H
index 17bc2109..b3bd0519 100644
--- a/src/turbulenceModels/compressible/turbulenceModel/turbulenceModelDoc.H
+++ b/src/turbulenceModels/compressible/turbulenceModel/turbulenceModelDoc.H
@@ -27,5 +27,5 @@ License
 @{
     This group contains compressible turbulence models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/incompressible/Allwmake b/src/turbulenceModels/incompressible/Allwmake
index 6e230c01..2b61363b 100755
--- a/src/turbulenceModels/incompressible/Allwmake
+++ b/src/turbulenceModels/incompressible/Allwmake
@@ -1,7 +1,7 @@
 #!/bin/sh
 cd ${0%/*} || exit 1    # run from this directory
 makeType=${1:-libso}
-set -x
+[ -z "$WM_SILENT_RULES" ] && set -x
 
 wmake $makeType turbulenceModel
 wmake $makeType RAS
diff --git a/src/turbulenceModels/incompressible/LES/DESModel/DESModelDoc.H b/src/turbulenceModels/incompressible/LES/DESModel/DESModelDoc.H
index 5311d09d..d100318d 100644
--- a/src/turbulenceModels/incompressible/LES/DESModel/DESModelDoc.H
+++ b/src/turbulenceModels/incompressible/LES/DESModel/DESModelDoc.H
@@ -28,5 +28,5 @@ License
     \ingroup grpIcoTurbulence
     This group contains incompressible DES models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/incompressible/LES/GenEddyVisc/GenEddyVisc.H b/src/turbulenceModels/incompressible/LES/GenEddyVisc/GenEddyVisc.H
index e1dc9c2b..0cd340a3 100644
--- a/src/turbulenceModels/incompressible/LES/GenEddyVisc/GenEddyVisc.H
+++ b/src/turbulenceModels/incompressible/LES/GenEddyVisc/GenEddyVisc.H
@@ -112,7 +112,7 @@ public:
                 new volScalarField
                 (
                     IOobject
-                    (   
+                    (
                         "epsilon",
                         runTime_.timeName(),
                         mesh_,
diff --git a/src/turbulenceModels/incompressible/LES/GenSGSStress/GenSGSStress.H b/src/turbulenceModels/incompressible/LES/GenSGSStress/GenSGSStress.H
index 4f24f791..8d94ed19 100644
--- a/src/turbulenceModels/incompressible/LES/GenSGSStress/GenSGSStress.H
+++ b/src/turbulenceModels/incompressible/LES/GenSGSStress/GenSGSStress.H
@@ -112,7 +112,7 @@ public:
                 new volScalarField
                 (
                     IOobject
-                    (   
+                    (
                         "k",
                         runTime_.timeName(),
                         mesh_,
@@ -128,13 +128,13 @@ public:
         virtual tmp<volScalarField> epsilon() const
         {
             const volScalarField K(k());
-            
+
             return tmp<volScalarField>
             (
                 new volScalarField
                 (
                     IOobject
-                    (   
+                    (
                         "epsilon",
                         runTime_.timeName(),
                         mesh_,
diff --git a/src/turbulenceModels/incompressible/LES/LESModel/LESModelDoc.H b/src/turbulenceModels/incompressible/LES/LESModel/LESModelDoc.H
index 9b400e23..87845454 100644
--- a/src/turbulenceModels/incompressible/LES/LESModel/LESModelDoc.H
+++ b/src/turbulenceModels/incompressible/LES/LESModel/LESModelDoc.H
@@ -28,5 +28,5 @@ License
     \ingroup grpIcoTurbulence
     This group contains incompressible LES models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/incompressible/RAS/RASModel/RASModelDoc.H b/src/turbulenceModels/incompressible/RAS/RASModel/RASModelDoc.H
index 21616566..f1bd133d 100644
--- a/src/turbulenceModels/incompressible/RAS/RASModel/RASModelDoc.H
+++ b/src/turbulenceModels/incompressible/RAS/RASModel/RASModelDoc.H
@@ -28,5 +28,5 @@ License
     \ingroup grpIcoTurbulence
     This group contains incompressible RAS models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/atmBoundaryLayerInletEpsilon/atmBoundaryLayerInletEpsilonFvPatchScalarField.H b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/atmBoundaryLayerInletEpsilon/atmBoundaryLayerInletEpsilonFvPatchScalarField.H
index b94500ae..b5f7c71a 100644
--- a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/atmBoundaryLayerInletEpsilon/atmBoundaryLayerInletEpsilonFvPatchScalarField.H
+++ b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/atmBoundaryLayerInletEpsilon/atmBoundaryLayerInletEpsilonFvPatchScalarField.H
@@ -45,7 +45,7 @@ Description
         z_0     | surface roughness length [m]
         z_g     | minimum vlaue in z direction [m]
     \endvartable
- 
+
     and:
 
         \f[
diff --git a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentHeatFluxTemperature/turbulentHeatFluxTemperatureFvPatchScalarField.H b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentHeatFluxTemperature/turbulentHeatFluxTemperatureFvPatchScalarField.H
index 59b8106d..68b6b2c0 100644
--- a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentHeatFluxTemperature/turbulentHeatFluxTemperatureFvPatchScalarField.H
+++ b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentHeatFluxTemperature/turbulentHeatFluxTemperatureFvPatchScalarField.H
@@ -57,7 +57,7 @@ Note
     - it is assumed that the units of \c alphaEff are [kg/m/s]
     - the specific heat capcaity is read from the transport dictionary entry
       \c Cp0
-    
+
 SourceFiles
     turbulentHeatFluxTemperatureFvPatchScalarField.C
 
diff --git a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H
index 13496315..db0e8655 100644
--- a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H
+++ b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthDissipationRateInlet/turbulentMixingLengthDissipationRateInletFvPatchScalarField.H
@@ -36,7 +36,7 @@ Description
         \f[
             \epsilon_p = \frac{C_{\mu}^{0.75} k^{1.5}}{L}
         \f]
-   
+
     where
 
     \vartable
diff --git a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H
index 9fdff8d9..249e3afb 100644
--- a/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H
+++ b/src/turbulenceModels/incompressible/RAS/derivedFvPatchFields/turbulentMixingLengthFrequencyInlet/turbulentMixingLengthFrequencyInletFvPatchScalarField.H
@@ -35,7 +35,7 @@ Description
         \f[
             \omega_p = \frac{k^{0.5}}{C_{\mu}^{0.25} L}
         \f]
-   
+
     where
 
     \vartable
diff --git a/src/turbulenceModels/incompressible/turbulenceModel/turbulenceModelDoc.H b/src/turbulenceModels/incompressible/turbulenceModel/turbulenceModelDoc.H
index f9751dc5..739af738 100644
--- a/src/turbulenceModels/incompressible/turbulenceModel/turbulenceModelDoc.H
+++ b/src/turbulenceModels/incompressible/turbulenceModel/turbulenceModelDoc.H
@@ -27,5 +27,5 @@ License
 @{
     This group contains incompressible turbulence models.
 @}
-    
+
 \*---------------------------------------------------------------------------*/
diff --git a/wmake/Makefile b/wmake/Makefile
index 96e18853..ecf86a7a 100644
--- a/wmake/Makefile
+++ b/wmake/Makefile
@@ -92,6 +92,9 @@ LIB             = libNULL
 
 # Shared library extension
 SO              = so
+ifeq ("$(shell uname -s)","Darwin")
+SO              = dylib
+endif
 
 # Project executable
 EXE             = $(WM_PROJECT).out
@@ -112,7 +115,11 @@ include $(GENERAL_RULES)/general
 include $(RULES)/general
 include $(RULES)/$(WM_LINK_LANGUAGE)
 
-MAKE_DEP   = @$(MKDEP) $< | $(WM_SCRIPTS)/addCompile $<
+ifneq ($(WM_SILENT_RULES),)
+MAKE_DEP   = @$(call WM_MESSAGE,DEP,$<); $(MKDEP) $< | $(WM_SCRIPTS)/addCompile $<
+else
+MAKE_DEP   = $(MKDEP) $< | $(WM_SCRIPTS)/addCompile $<
+endif
 
 
 #------------------------------------------------------------------------------
@@ -132,31 +139,40 @@ include $(OBJECTS_DIR)/dependencyFiles
 # set header file include paths
 #------------------------------------------------------------------------------
 
-LIB_HEADER_DIRS = \
-        $(EXE_INC) \
-        -IlnInclude \
-        -I. \
-        $(PROJECT_INC) \
-        $(GINC) \
-        $(SYS_INC)
+LIB_HEADER_DIRS = $(EXE_INC) \
+		  -IlnInclude \
+		  -I. \
+		  $(PROJECT_INC) \
+		  $(GINC) \
+		  $(SYS_INC)
 
 
 #------------------------------------------------------------------------------
 # define link statements for executables
 #------------------------------------------------------------------------------
 
-$(EXE):  $(OBJECTS)
-	     @$(WM_SCRIPTS)/makeTargetDir $(EXE)
-	     $(LINKEXE) $(OBJECTS) -L$(LIB_PLATFORMS) \
-	     $(EXE_LIBS) $(PROJECT_LIBS) $(SYS_LIBS) $(LINK_LIBS) $(GLIBS) -o $(EXE)
+ifneq ($(WM_SILENT_RULES),)
+UP_TO_DATE = @echo "$(call WM_BOLDL,"->>")" "$(call WM_BOLDL,$(notdir $1))"
+else
+UP_TO_DATE = @echo \'$1\' is up to date.
+endif
 
-exe:     $(SEXE)
-	     @echo \'$(SEXE)\' is up to date.
+$(EXE): T$(EXE)
+	$(call UP_TO_DATE,$(EXE))
+
+T$(EXE): $(OBJECTS)
+	@$(WM_SCRIPTS)/makeTargetDir $(EXE)
+	$(AT)$(LINKEXE) $(OBJECTS) -L$(LIB_PLATFORMS) \
+		$(EXE_LIBS) $(PROJECT_LIBS) $(SYS_LIBS) $(LINK_LIBS) $(GLIBS) -o $(EXE)
+
+exe: $(SEXE)
+	$(call UP_TO_DATE,$(SEXE))
 
 $(SEXE): $(OBJECTS)
-	     @$(WM_SCRIPTS)/makeTargetDir $(SEXE)
-	     $(LINKEXE) $(OBJECTS) $(EXE_LIBS) \
-         $(SYS_LIBS) $(LINK_LIBS) $(GLIBS) -o $(SEXE)
+	@$(WM_SCRIPTS)/makeTargetDir $(SEXE)
+	$(call WM_MESSAGE,LD,$(notdir $(SEXE)))
+	$(AT)$(LINKEXE) $(OBJECTS) $(EXE_LIBS) \
+		$(SYS_LIBS) $(LINK_LIBS) $(GLIBS) -o $(SEXE)
 
 
 #------------------------------------------------------------------------------
@@ -165,45 +181,50 @@ $(SEXE): $(OBJECTS)
 
 objects: $(OBJECTS)
 
-libso:   $(LIB).$(SO)
-	     @echo \'$(LIB).$(SO)\' is up to date.
+libso: $(LIB).$(SO)
+	$(call UP_TO_DATE,$(LIB).$(SO))
 
 $(LIB).$(SO): $(OBJECTS)
-	     @$(WM_SCRIPTS)/makeTargetDir $(LIB)
-	     @rm -f so_locations
-	     @cd $(OBJECTS_DIR) ; \
-	     $(LINKLIBSO) $(LOCAL_OBJECTS) -L$(LIB_PLATFORMS) $(LIB_LIBS) $(GLIB_LIBS) -o $(LIB).$(SO)
+	@$(WM_SCRIPTS)/makeTargetDir $(LIB)
+	@rm -f so_locations
+	$(call WM_MESSAGE,LD,$(notdir $(LIB).$(SO)))
+	@cd $(OBJECTS_DIR) ; \
+		$(LINKLIBSO) $(LOCAL_OBJECTS) -L$(LIB_PLATFORMS) $(LIB_LIBS) $(GLIB_LIBS) -o $(LIB).$(SO)
 
-lib:     $(LIB).a
-	     @echo \'$(LIB).a\' is up to date.
+lib: $(LIB).a
+	$(call UP_TO_DATE,$(LIB).a)
 
 $(LIB).a: $(OBJECTS)
-	     @$(WM_SCRIPTS)/makeTargetDir $(LIB)
-	     @rm -f $(LIB).a
-	     $(AR) $(ARFLAGS) $(LIB).a $(OBJECTS)
-	     $(RANLIB) $(LIB).a
+	@$(WM_SCRIPTS)/makeTargetDir $(LIB)
+	@rm -f $(LIB).a
+	$(call WM_MESSAGE,AR,$(notdir $(LIB)).a)
+	$(AT)$(AR) $(ARFLAGS) $(LIB).a $(OBJECTS)
+	$(call WM_MESSAGE,RANLIB,$(notdir $(LIB)).a)
+	$(AT)$(RANLIB) $(LIB).a
 
 libo:    $(LIB).o
-	     @echo \'$(LIB).o\' is up to date.
+	$(call UP_TO_DATE,$(LIB).o)
 
 $(LIB).o: $(OBJECTS)
-	     @$(WM_SCRIPTS)/makeTargetDir $(LIB)
-	     @rm -f $(LIB).o
-	     $(LD) -r -o $(LIB).o $(OBJECTS)
+	@$(WM_SCRIPTS)/makeTargetDir $(LIB)
+	@rm -f $(LIB).o
+	$(call WM_MESSAGE,LD,$(notdir $(LIB)).o)
+	$(AT)$(LD) -r -o $(LIB).o $(OBJECTS)
 
-jar:     $(LIB).jar
-	     @echo \'$(LIB).jar\' is up to date.
+jar: $(LIB).jar
+	$(call UP_TO_DATE,$(LIB).jar)
 
 $(LIB).jar: $(OBJECTS)
-	     @$(WM_SCRIPTS)/makeTargetDir $(LIB)
-	     jar cfm $(LIB).jar $(LIB_LIBS) -C $(CLASSES_DIR) .
+	@$(WM_SCRIPTS)/makeTargetDir $(LIB)
+	$(call WM_MESSAGE,JAR,$(notdir $(LIB).jar))
+	$(AT)jar cfm $(LIB).jar $(LIB_LIBS) -C $(CLASSES_DIR) .
 
 #------------------------------------------------------------------------------
 # Set rule to create the include directory for libraries
 #------------------------------------------------------------------------------
 
 lnInclude/uptodate: $(MAKE_DIR)/files $(MAKE_DIR)/options
-	     @rm -rf lnInclude ; wmakeLnInclude . ; touch lnInclude/uptodate
+	@rm -rf lnInclude ; wmakeLnInclude . ; touch lnInclude/uptodate
 
 
 #------------------------------------------------------------------------------
diff --git a/wmake/rules/General/CGAL b/wmake/rules/General/CGAL
index 167a420a..1b599bc3 100644
--- a/wmake/rules/General/CGAL
+++ b/wmake/rules/General/CGAL
@@ -1,11 +1,24 @@
-CGAL_INC = \
-    -Wno-old-style-cast \
-    -I$(CGAL_ARCH_PATH)/include \
-    -I$(MPFR_ARCH_PATH)/include \
-    -I$(GMP_ARCH_PATH)/include \
-    -I$(BOOST_ARCH_PATH)/include
-
-CGAL_LIBS = \
-    -L$(MPFR_ARCH_PATH)/lib \
-    -L$(GMP_ARCH_PATH)/lib \
-    -L$(BOOST_ARCH_PATH)/lib
+CGAL_INC = -Wno-old-style-cast
+
+ifneq ($(CGAL_ARCH_PATH),)
+CGAL_INC += -I$(CGAL_ARCH_PATH)/include
+endif
+
+CGAL_LIBS =
+
+ifneq ($(MPFR_ARCH_PATH),)
+CGAL_INC += -I$(MPFR_ARCH_PATH)/include
+CGAL_LIBS += -L$(MPFR_ARCH_PATH)/lib
+endif
+
+ifneq ($(GMP_ARCH_PATH),)
+CGAL_INC += -I$(GMP_ARCH_PATH)/include
+CGAL_LIBS += -L$(GMP_ARCH_PATH)/lib
+endif
+
+ifneq ($(BOOST_ARCH_PATH),)
+CGAL_INC += -I$(BOOST_ARCH_PATH)/include
+CGAL_LIBS += -L$(BOOST_ARCH_PATH)/lib
+endif
+
+# vim: set ft=make:
diff --git a/wmake/rules/General/X b/wmake/rules/General/X
index f55fa8b3..1761158f 100644
--- a/wmake/rules/General/X
+++ b/wmake/rules/General/X
@@ -3,3 +3,5 @@
 XFLAGS     =
 XINC       = $(XFLAGS) -I/usr/include/X11
 XLIBS      = -lXext -lX11
+
+# vim: set ft=make:
diff --git a/wmake/rules/General/bison b/wmake/rules/General/bison
index dd02dbd7..d3447949 100644
--- a/wmake/rules/General/bison
+++ b/wmake/rules/General/bison
@@ -1,11 +1,21 @@
 .SUFFIXES: .y .Y
 
-ytoo = bison -v -d -y $$SOURCE ; mv y.tab.c $*.c ; mv y.tab.h $*.h ; $(cc) $(cFLAGS) -c $*.c -o $@
+ifeq ($(WM_BISON),)
+ifeq ($(shell uname -s),Darwin)
+WM_BISON = xcrun bison
+else
+WM_BISON = bison
+endif
+endif
 
-Ytoo = bison -v -d -y $$SOURCE ; mv y.tab.c $*.C ; mv y.tab.h $*.H ; $(CC) $(c++FLAGS) -c $*.C -o $@
+ytoo = $(WM_BISON) -v -d -y $$SOURCE ; mv y.tab.c $*.c ; mv y.tab.h $*.h ; $(cc) $(cFLAGS) -c $*.c -o $@
+
+Ytoo = $(WM_BISON) -v -d -y $$SOURCE ; mv y.tab.c $*.C ; mv y.tab.h $*.H ; $(CC) $(c++FLAGS) -c $*.C -o $@
 
 .y.dep:
 	$(MAKE_DEP)
 
 .Y.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/btyacc b/wmake/rules/General/btyacc
index aaec4406..bb3823e3 100644
--- a/wmake/rules/General/btyacc
+++ b/wmake/rules/General/btyacc
@@ -4,3 +4,5 @@ ytoo = btyacc -v -d $(SKELETON) $$SOURCE ; mv y_tab.c $*.C ; mv y_tab.h $*.H ; $
 
 .y.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/btyacc++ b/wmake/rules/General/btyacc++
index 0d2bd33e..fbb2505c 100644
--- a/wmake/rules/General/btyacc++
+++ b/wmake/rules/General/btyacc++
@@ -4,3 +4,5 @@ Ytoo = btyacc++ -v -d $(SKELETON) $$SOURCE ; mv y_tab.c $*.C ; mv y_tab.h $*.H ;
 
 .Y.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/byacc b/wmake/rules/General/byacc
index e3393ee7..aa170526 100644
--- a/wmake/rules/General/byacc
+++ b/wmake/rules/General/byacc
@@ -1,6 +1,8 @@
 .SUFFIXES: .y
 
-ytoo = byacc -v $(YYPREFIX) -d $$SOURCE ; mv y.tab.c $*.C ; mv y.tab.h $*.H ; $(CC) $(c++FLAGS) -c $*.C -o $@
+ytoo = $(call WM_MESSAGE,yy,$1); $(AT)byacc -v $(YYPREFIX) -d $$SOURCE ; mv y.tab.c $*.C ; mv y.tab.h $*.H ; $(CC) $(c++FLAGS) -c $*.C -o $@
 
 .y.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/coco-cpp b/wmake/rules/General/coco-cpp
deleted file mode 100644
index 94264971..00000000
--- a/wmake/rules/General/coco-cpp
+++ /dev/null
@@ -1,15 +0,0 @@
-# handle Coco/R attributed grammars written for the C++ version
-#     http://www.ssw.uni-linz.ac.at/Coco/
-#     http://github.com/olesenm/coco-cpp/
-#
-
-.SUFFIXES: .atg
-
-atgtoo =  \
-    $(WM_THIRD_PARTY_DIR)/platforms/$(WM_ARCH)$(WM_COMPILER)/coco-cpp/bin/coco-cpp \
-    -single \
-    $$SOURCE -o $(OBJECTS_DIR) && \
-    $(CC) $(c++FLAGS) -c $*.cpp -o $@
-
-.atg.dep:
-	$(MAKE_DEP)
diff --git a/wmake/rules/General/flex b/wmake/rules/General/flex
index 853780e1..81cbb3ca 100644
--- a/wmake/rules/General/flex
+++ b/wmake/rules/General/flex
@@ -1,6 +1,16 @@
 .SUFFIXES: .l
 
-ltoo = flex -o$*.c $$SOURCE ; $(cc) $(cFLAGS) -c $*.c -o $@
+ifeq ($(WM_FLEX),)
+ifeq ($(shell uname -s),Darwin)
+WM_FLEX = xcrun flex
+else
+WM_FLEX = flex
+endif
+endif
+
+ltoo = $(WM_FLEX) -o$*.c $$SOURCE ; $(cc) $(cFLAGS) -c $*.c -o $@
 
 .l.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/flex++ b/wmake/rules/General/flex++
index cf829e09..6895ea73 100644
--- a/wmake/rules/General/flex++
+++ b/wmake/rules/General/flex++
@@ -1,6 +1,17 @@
 .SUFFIXES: .L
 
-Ltoo = flex -+ -o$*.C -f $$SOURCE ; $(CC) $(c++FLAGS) -c $*.C -o $@
+ifeq ($(WM_FLEX),)
+ifeq ($(shell uname -s),Darwin)
+WM_FLEX = xcrun flex
+else
+WM_FLEX = flex
+endif
+endif
+
+
+Ltoo = $(WM_FLEX) -+ -o$*.C -f $$SOURCE ; $(CC) $(c++FLAGS) -c $*.C -o $@
 
 .L.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/general b/wmake/rules/General/general
index d0253e80..1c946fc0 100644
--- a/wmake/rules/General/general
+++ b/wmake/rules/General/general
@@ -8,3 +8,5 @@ GFLAGS     = -D$(WM_ARCH) -DWM_$(WM_PRECISION_OPTION)
 GINC       =
 GLIBS      = -lm
 GLIB_LIBS  =
+
+# vi: ft=make
diff --git a/wmake/rules/General/moc b/wmake/rules/General/moc
index f47f586a..2e9e89de 100644
--- a/wmake/rules/General/moc
+++ b/wmake/rules/General/moc
@@ -4,3 +4,5 @@ qttoo = $(QTDIR)/bin/moc -f $$SOURCE -o $*.C ; $(CC) $(c++FLAGS) -c $*.C -o $@
 
 .qt.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/mplib b/wmake/rules/General/mplib
index 294bd861..703a2c3f 100644
--- a/wmake/rules/General/mplib
+++ b/wmake/rules/General/mplib
@@ -1,3 +1,5 @@
 PFLAGS     =
 PINC       =
 PLIBS      =
+
+# vi: ft=make
diff --git a/wmake/rules/General/mplibGAMMA b/wmake/rules/General/mplibGAMMA
index 11606f29..47d873db 100644
--- a/wmake/rules/General/mplibGAMMA
+++ b/wmake/rules/General/mplibGAMMA
@@ -1,3 +1,5 @@
 PFLAGS     =
 PINC       = -I$(MPI_ARCH_PATH)/include
 PLIBS      = -L$(MPI_ARCH_PATH)/lib -lgamma
+
+# vi: ft=make
diff --git a/wmake/rules/General/sourceToDep b/wmake/rules/General/sourceToDep
index 329e7f40..532a4e66 100644
--- a/wmake/rules/General/sourceToDep
+++ b/wmake/rules/General/sourceToDep
@@ -1,6 +1,11 @@
 .SUFFIXES: .c .cc .cxx .cpp .C .F .f .dep
 
-MKDEP       = $(WMAKE_BIN)/wmkdep -I$(*D) $(LIB_HEADER_DIRS)
+QUIET =
+ifneq ($WM_SILENT_RULES,)
+QUIET = -q
+endif
+
+MKDEP       = $(WMAKE_BIN)/wmkdep $(QUIET) -I$(*D) $(LIB_HEADER_DIRS)
 
 .c.dep:
 	$(MAKE_DEP)
@@ -22,3 +27,5 @@ MKDEP       = $(WMAKE_BIN)/wmkdep -I$(*D) $(LIB_HEADER_DIRS)
 
 .f.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/General/standard b/wmake/rules/General/standard
index d3e977df..f62ec8a8 100644
--- a/wmake/rules/General/standard
+++ b/wmake/rules/General/standard
@@ -1,3 +1,17 @@
+ifneq ($(WM_SILENT_RULES),)
+AT = @
+WM_BOLD_ON = $(shell tput bold)
+WM_BOLD_OFF = $(shell tput sgr0)
+WM_COLUMN_WIDTH = 6
+WM_BOLDR = $(shell printf $(if $(WMAKE_TTY),'$(WM_BOLD_ON)%$(WM_COLUMN_WIDTH)s$(WM_BOLD_OFF)','%$(WM_COLUMN_WIDTH)s') $1)
+WM_BOLDL = $(shell printf $(if $(WMAKE_TTY),'$(WM_BOLD_ON)%s$(WM_BOLD_OFF)','%s') $1)
+WM_MESSAGE = @echo "$(call WM_BOLDR,$1) $(notdir $2)"
+else
+AT =
+WM_MESSAGE =
+WM_BOLD =
+endif
+
 include $(GENERAL_RULES)/version
 
 include $(GENERAL_RULES)/sourceToDep
@@ -11,3 +25,5 @@ include $(GENERAL_RULES)/bison
 include $(GENERAL_RULES)/moc
 
 include $(GENERAL_RULES)/X
+
+# vi: ft=make
diff --git a/wmake/rules/General/version b/wmake/rules/General/version
index 19633ffc..5f9d5c2e 100644
--- a/wmake/rules/General/version
+++ b/wmake/rules/General/version
@@ -3,11 +3,19 @@
 #
 # update version strings in C++ file and in $WM_PROJECT_DIR/.build file
 #
+ifneq ("$(WM_SILENT_RULES)","")
 Cvertoo = \
     sed -e 's!VERSION_STRING!$(shell wmakePrintBuild -major)!' \
         -e 's!BUILD_STRING!$(shell wmakePrintBuild -update)!' \
         $$SOURCE > $*.C; \
     $(CC) $(c++FLAGS) -c $*.C -o $@
+else
+Cvertoo = \
+    sed -e 's!VERSION_STRING!$(shell wmakePrintBuild -major)!' \
+        -e 's!BUILD_STRING!$(shell wmakePrintBuild -update)!' \
+        $$SOURCE > $*.C; \
+    $(CC) $(c++FLAGS) -c $*.C -o $@
+endif
 
 .Cver.dep:
 	$(MAKE_DEP)
diff --git a/wmake/rules/General/yacc b/wmake/rules/General/yacc
index 959d4297..cec9554a 100644
--- a/wmake/rules/General/yacc
+++ b/wmake/rules/General/yacc
@@ -1,11 +1,22 @@
 .SUFFIXES: .y .Y
 
-ytoo = yacc -v -d $$SOURCE ; mv y.tab.c $*.c ; mv y.tab.h $(@D)/parser.h ; $(CC) $(c++FLAGS) -c $*.c -o $@
+ifeq ($(WM_YACC),)
+ifeq ($(shell uname -s),Darwin)
+WM_FLEX = xcrun yacc
+else
+WM_FLEX = yacc
+endif
+endif
 
-Ytoo = yacc -v -d $$SOURCE ; mv y.tab.c $*.C ; mv y.tab.h $(@D)/parser.H ; $(CC) $(c++FLAGS) -c $*.C -o $@
+
+ytoo = $(WM_YACC) -v -d $$SOURCE ; mv y.tab.c $*.c ; mv y.tab.h $(@D)/parser.h ; $(CC) $(c++FLAGS) -c $*.c -o $@
+
+Ytoo = $(WM_YACC) -v -d $$SOURCE ; mv y.tab.c $*.C ; mv y.tab.h $(@D)/parser.H ; $(CC) $(c++FLAGS) -c $*.C -o $@
 
 .y.dep:
 	$(MAKE_DEP)
 
 .Y.dep:
 	$(MAKE_DEP)
+
+# vi: ft=make
diff --git a/wmake/rules/darwin64Clang/CGAL b/wmake/rules/darwin64Clang/CGAL
new file mode 100644
index 00000000..b6df26e2
--- /dev/null
+++ b/wmake/rules/darwin64Clang/CGAL
@@ -0,0 +1,7 @@
+CGAL_INC = \
+    -Wno-old-style-cast \
+    -I/usr/local/include \
+    -I/usr/local/include/eigen3
+
+CGAL_LIBS = \
+    -L/usr/local/lib
diff --git a/wmake/rules/darwin64Clang/c b/wmake/rules/darwin64Clang/c
new file mode 100644
index 00000000..fe327efb
--- /dev/null
+++ b/wmake/rules/darwin64Clang/c
@@ -0,0 +1,20 @@
+.SUFFIXES: .c .h
+
+cWARN        = -Wall
+
+cc          = xcrun cc -arch x86_64
+
+include $(RULES)/c$(WM_COMPILE_OPTION)
+
+cFLAGS      = $(GFLAGS) $(cWARN) $(cOPT) $(cDBUG) $(LIB_HEADER_DIRS) -fPIC
+
+ifneq ("$(OSX_SDK_PATH)","")
+cFLAGS +=  -isysroot $(OSX_SDK_PATH)
+endif
+
+ctoo        = @$(WM_SCHEDULER) $(cc) $(cFLAGS) -c $$SOURCE -o $@
+
+LINK_LIBS   = $(cDBUG)
+
+LINKLIBSO   = $(cc) -Wl,-dylib,-undefined,dynamic_lookup
+LINKEXE     = $(cc) -Wl,-execute,-undefined,dynamic_lookup
diff --git a/wmake/rules/darwin64Clang/c++ b/wmake/rules/darwin64Clang/c++
new file mode 100644
index 00000000..b593ddda
--- /dev/null
+++ b/wmake/rules/darwin64Clang/c++
@@ -0,0 +1,28 @@
+.SUFFIXES: .C .cxx .cc .cpp
+
+c++WARN     = -Wall -Wextra -Wno-unused-parameter -Wno-overloaded-virtual \
+              -Wno-c++11-extensions -Wno-unused-variable \
+	      -Wno-unused-local-typedef -Wno-deprecated-register
+
+CC          = xcrun c++ -arch x86_64 -std=c++14
+
+include $(RULES)/c++$(WM_COMPILE_OPTION)
+
+ptFLAGS     = -DNoRepository -ftemplate-depth-100
+
+c++FLAGS    = $(GFLAGS) $(c++WARN) $(c++OPT) $(c++DBUG) $(ptFLAGS) $(LIB_HEADER_DIRS) -fPIC
+
+ifneq ("$(OSX_SDK_PATH)","")
+cFLAGS +=  -isysroot $(OSX_SDK_PATH)
+endif
+
+Ctoo        = $(WM_SCHEDULER) $(CC) $(c++FLAGS) -c $$SOURCE -o $@
+cxxtoo      = $(Ctoo)
+cctoo       = $(Ctoo)
+cpptoo      = $(Ctoo)
+
+LINK_LIBS   = $(c++DBUG)
+
+LINKLIBSO   = $(CC) $(c++FLAGS) -Wl,-dylib,-undefined,dynamic_lookup
+
+LINKEXE     = $(CC) $(c++FLAGS) -Wl,-execute,-undefined,dynamic_lookup
diff --git a/wmake/rules/darwin64Clang/c++Debug b/wmake/rules/darwin64Clang/c++Debug
new file mode 100644
index 00000000..1c63335a
--- /dev/null
+++ b/wmake/rules/darwin64Clang/c++Debug
@@ -0,0 +1,2 @@
+c++DBUG    = -g -DFULLDEBUG
+c++OPT      = -O0
diff --git a/wmake/rules/darwin64Clang/c++Opt b/wmake/rules/darwin64Clang/c++Opt
new file mode 100644
index 00000000..3363be80
--- /dev/null
+++ b/wmake/rules/darwin64Clang/c++Opt
@@ -0,0 +1,3 @@
+#c++DBUG     = -O0 -DFULLDEBUG -g
+c++DBUG     =
+c++OPT      = -O3
diff --git a/wmake/rules/darwin64Clang/c++Prof b/wmake/rules/darwin64Clang/c++Prof
new file mode 100644
index 00000000..3bda4dad
--- /dev/null
+++ b/wmake/rules/darwin64Clang/c++Prof
@@ -0,0 +1,2 @@
+c++DBUG    = -pg
+c++OPT     = -O2
diff --git a/wmake/rules/darwin64Clang/cDebug b/wmake/rules/darwin64Clang/cDebug
new file mode 100644
index 00000000..7b7adf10
--- /dev/null
+++ b/wmake/rules/darwin64Clang/cDebug
@@ -0,0 +1,2 @@
+cDBUG       = -g -DFULLDEBUG
+cOPT        = -O0
diff --git a/wmake/rules/darwin64Clang/cOpt b/wmake/rules/darwin64Clang/cOpt
new file mode 100644
index 00000000..17318709
--- /dev/null
+++ b/wmake/rules/darwin64Clang/cOpt
@@ -0,0 +1,2 @@
+cDBUG       =
+cOPT        = -O3
diff --git a/wmake/rules/darwin64Clang/cProf b/wmake/rules/darwin64Clang/cProf
new file mode 100644
index 00000000..ca3ac9bf
--- /dev/null
+++ b/wmake/rules/darwin64Clang/cProf
@@ -0,0 +1,2 @@
+cDBUG       = -pg
+cOPT        = -O2
diff --git a/wmake/rules/darwin64Clang/general b/wmake/rules/darwin64Clang/general
new file mode 100644
index 00000000..a3b2767c
--- /dev/null
+++ b/wmake/rules/darwin64Clang/general
@@ -0,0 +1,14 @@
+AR         = xcrun ar
+ARFLAGS    = cr
+RANLIB     = xcrun ranlib
+CPP        = xcrun cpp -traditional-cpp $(GFLAGS)
+LD         = xcrun ld
+
+PROJECT_LIBS = -l$(WM_PROJECT) -ldl
+
+OSX_SDK_PATH = $(shell xcrun --show-sdk-path)
+
+include $(GENERAL_RULES)/standard
+
+include $(RULES)/c
+include $(RULES)/c++
diff --git a/wmake/scripts/addCompile b/wmake/scripts/addCompile
index 63a5b262..068c4841 100755
--- a/wmake/scripts/addCompile
+++ b/wmake/scripts/addCompile
@@ -40,6 +40,9 @@ depName=${1%.*}.dep
 
 sourceDir=${1%/*}
 
+AT=
+[ -n "$WM_SILENT_RULES" ] && AT=@
+
 if [ "$sourceDir" = "$sourceName" ]
 then
     sourceDir=.
@@ -59,6 +62,10 @@ sed -e s%".*.o.*:"%'$(OBJECTS_DIR)/'"$objectName\:"%  \
 echo '$(OBJECTS_DIR)/'$objectName': $(EXE_DEP)' >> $depName
 echo '$(OBJECTS_DIR)/'$objectName':' >> $depName
 echo '	@SOURCE_DIR='$sourceDir >> $depName
-echo '	SOURCE='$1' ; $('$sub'too)' >> $depName
+t=$sub
+[ "$t" = "Cver" ] && t=C
+[ -n "$WM_SILENT_RULES" ] \
+    && echo '\t$(call WM_MESSAGE,'$t$t','$1')' >> $depName
+echo '	'$AT'SOURCE='$1' ; $('$sub'too)' >> $depName
 
 #------------------------------------------------------------------------------
diff --git a/wmake/src/Makefile b/wmake/src/Makefile
index 328f3e53..dab998cb 100644
--- a/wmake/src/Makefile
+++ b/wmake/src/Makefile
@@ -62,18 +62,21 @@ include $(RULES)/$(WM_LINK_LANGUAGE)
 all:  $(WMAKE_BIN)/dirToString $(WMAKE_BIN)/wmkdep $(WMAKE_BIN)/wmkdepend
 
 clean:
-	rm -f $(WMAKE_BIN)/* 2>/dev/null
+	$(AT)rm -f $(WMAKE_BIN)/* 2>/dev/null
 
 
 $(WMAKE_BIN)/dirToString: dirToString.c
 	@mkdir -p $(WMAKE_BIN)
-	$(cc) $(cFLAGS) dirToString.c -o $(WMAKE_BIN)/dirToString
+	$(call WM_MESSAGE,cc,dirToString.c)
+	$(AT)$(cc) $(cFLAGS) dirToString.c -o $(WMAKE_BIN)/dirToString
 
 
 $(WMAKE_BIN)/wmkdep: wmkdep.l
 	@mkdir -p $(WMAKE_BIN)
-	flex wmkdep.l
-	$(cc) $(cFLAGS) lex.yy.c -o $(WMAKE_BIN)/wmkdep
+	$(call WM_MESSAGE,ll,$<)
+	$(AT)flex $<
+	$(call WM_MESSAGE,cc,lex.yy.cc)
+	$(AT)$(cc) $(cFLAGS) -Wno-unused-function lex.yy.c -o $(WMAKE_BIN)/wmkdep
 	@rm -f lex.yy.c 2>/dev/null
 
 
@@ -82,8 +85,9 @@ $(WMAKE_BIN)/wmkdepend: wmkdepend.cpp \
     wmkdependParser.cpp wmkdependScanner.cpp \
     wmkdependParser.h   wmkdependScanner.h
 	@mkdir -p $(WMAKE_BIN)
-	$(CC) $(c++FLAGS) \
-	     wmkdepend.cpp wmkdependParser.cpp wmkdependScanner.cpp \
-	    -o $(WMAKE_BIN)/wmkdepend
+	$(call WM_MESSAGE,LD,wmkdepend)
+	$(AT)$(CC) $(c++FLAGS) \
+		wmkdepend.cpp wmkdependParser.cpp wmkdependScanner.cpp \
+		-o $(WMAKE_BIN)/wmkdepend
 
 #------------------------------------------------------------------------------
diff --git a/wmake/src/wmkdep.l b/wmake/src/wmkdep.l
index 86c6f64e..1928add8 100644
--- a/wmake/src/wmkdep.l
+++ b/wmake/src/wmkdep.l
@@ -138,6 +138,7 @@ int nDirectories = 0;
 char** directories;
 char* sourceFile = NULL;
 char* depFile = NULL;
+int quiet;
 
 /* Set of files already visited */
 struct HashEntry* visitedFiles[HASH_TABLE_SIZE];
@@ -157,9 +158,9 @@ int main(int argc, char* argv[])
         exit(1);
     }
 
-    sourceFile = strdup(argv[argc-1]);
-    fprintf(stderr, "Making dependency list for source file %s\n", sourceFile);
+    quiet = (strncmp(argv[1], "-q", 2) == 0);
 
+    sourceFile = strdup(argv[argc-1]);
 
     if ((basePos = strrchr(sourceFile, '/')) == NULL)
     {
@@ -333,12 +334,15 @@ void nextFile(const char* fileName)
             free(pathName);
         }
 
-        fprintf
-        (
-            stderr,
-            "could not open file %s for source file %s\n",
-            fileName, sourceFile
-        );
+	if (!quiet)
+	{
+            fprintf
+            (
+                stderr,
+                "could not open file %s for source file %s\n",
+                fileName, sourceFile
+            );
+	}
 
         fflush(stdout);
         fflush(stderr);
diff --git a/wmake/wmake b/wmake/wmake
index ebcd38cb..504dd0df 100755
--- a/wmake/wmake
+++ b/wmake/wmake
@@ -61,6 +61,35 @@ USAGE
     exit 1
 }
 
+replace_vars () {
+    [ $# -lt 1 ] && return 1
+    r=$(echo $1 | sed s%$WM_PROJECT_DIR%\$WM_PROJECT_DIR%)
+    r=$(echo $r | sed s%$HOME%\~%)
+    echo $r
+    return 0
+}
+
+repeat_char () {
+    [ $# -lt 1 ] && return 1
+    printf "%*s" $1 | tr " " $2
+}
+
+header () {
+    if [ -n "$2" ]
+    then
+        local ncol="$(tput cols)"
+        local len="${#1}"
+        echo "- $1 $(repeat_char $((ncol - len - 3)) '-')"
+    else
+        echo ':: ' $1
+    fi
+    return 0
+}
+
+# is wmake run on TTY?
+WMAKE_TTY=
+[ -t 1 ] && WMAKE_TTY=Y
+
 # normally use "make"
 make="make"
 
@@ -243,13 +272,15 @@ OBJECTS_DIR=$MakeDir/$WM_OPTIONS
 
 touch $OBJECTS_DIR/dontIncludeDeps
 
+[ -n "$WM_SILENT_RULES" ] && echo $(header $(replace_vars $(pwd)) $WMAKE_TTY)
+
 case "$makeType" in
 lib | libo | libso )
-    $make -s -f $WM_DIR/Makefile MAKE_DIR=$MakeDir INCLUDE_DEPS=$OBJECTS_DIR/dontIncludeDeps lnInclude/uptodate
+    $make -s -f $WM_DIR/Makefile WMAKE_TTY=$WMAKE_TTY MAKE_DIR=$MakeDir INCLUDE_DEPS=$OBJECTS_DIR/dontIncludeDeps lnInclude/uptodate
     ;;
 esac
 
-$make -s -f $WM_DIR/Makefile MAKE_DIR=$MakeDir INCLUDE_DEPS=$OBJECTS_DIR/dontIncludeDeps $OBJECTS_DIR/dependencies
+$make -s -f $WM_DIR/Makefile WMAKE_TTY=$WMAKE_TTY MAKE_DIR=$MakeDir INCLUDE_DEPS=$OBJECTS_DIR/dontIncludeDeps $OBJECTS_DIR/dependencies
 
 rc=$?
 [ $rc -eq 0 ] || exit $rc
@@ -258,7 +289,7 @@ rc=$?
 # make the object files and link
 #------------------------------------------------------------------------------
 
-cmd="$make -f $WM_DIR/Makefile MAKE_DIR=$MakeDir INCLUDE_DEPS=$OBJECTS_DIR/includeDeps $makeType"
+cmd="$make -f $WM_DIR/Makefile WMAKE_TTY=$WMAKE_TTY MAKE_DIR=$MakeDir INCLUDE_DEPS=$OBJECTS_DIR/includeDeps $makeType"
 # echo "cmd=$cmd"
 exec $cmd
 
diff --git a/wmake/wmakeLnInclude b/wmake/wmakeLnInclude
index fa8dc97f..cab9df83 100755
--- a/wmake/wmakeLnInclude
+++ b/wmake/wmakeLnInclude
@@ -63,6 +63,18 @@ USAGE
 
 #------------------------------------------------------------------------------
 
+ln_message ()
+{
+    local cols=6
+    local fmt="%${cols}s %s\n"
+    [ -t 1 ] && fmt="$(tput bold)%${cols}s$(tput sgr0) %s\n"
+    local folder=$(pwd)
+    [ $# -ge 1 ] && folder=$1
+    local r=$(echo $(dirname $folder) | sed s%$WM_PROJECT_DIR%\$WM_PROJECT_DIR%)
+    r=$(echo $r | sed s%$HOME%\~%)
+    printf "$fmt" "LN" $r 1>&2
+}
+
 # default 'find' option
 unset findOpt
 
@@ -142,7 +154,12 @@ cd $incDir || exit 1
 
 if [ "$silentOpt" != true ]
 then
-    echo "$Script: linking include files to $incDir" 1>&2
+    if [ "$WM_SILENT_RULES" = "" ]
+    then
+        echo "$Script: linking include files to $incDir" 1>&2
+    else
+        ln_message $(pwd)
+    fi
 fi
 
 #
